---
http_interactions:
- request:
    method: get
    uri: https://api.github.com/repos/1powechri2/Grit-Hub/commits/b2e705773e1072948cfd47aa165874f75116348f
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Faraday v0.15.2
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - GitHub.com
      Date:
      - Fri, 24 Aug 2018 14:27:17 GMT
      Content-Type:
      - application/json; charset=utf-8
      Transfer-Encoding:
      - chunked
      Status:
      - 200 OK
      X-Ratelimit-Limit:
      - '60'
      X-Ratelimit-Remaining:
      - '58'
      X-Ratelimit-Reset:
      - '1535122878'
      Cache-Control:
      - public, max-age=60, s-maxage=60
      Vary:
      - Accept
      Etag:
      - W/"598802a242059d39dc14a030a133e440"
      Last-Modified:
      - Wed, 22 Aug 2018 21:33:59 GMT
      X-Github-Media-Type:
      - github.v3; format=json
      Access-Control-Expose-Headers:
      - ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining,
        X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
      Access-Control-Allow-Origin:
      - "*"
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      X-Frame-Options:
      - deny
      X-Content-Type-Options:
      - nosniff
      X-Xss-Protection:
      - 1; mode=block
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Content-Security-Policy:
      - default-src 'none'
      X-Runtime-Rack:
      - '0.048065'
      X-Github-Request-Id:
      - 974A:55A2:74712E:1175F0E:5B8015C5
    body:
      encoding: ASCII-8BIT
      string: '{"sha":"b2e705773e1072948cfd47aa165874f75116348f","node_id":"MDY6Q29tbWl0MTQ1NDg2ODEwOmIyZTcwNTc3M2UxMDcyOTQ4Y2ZkNDdhYTE2NTg3NGY3NTExNjM0OGY=","commit":{"author":{"name":"Chris
        Powell","email":"chris.ian.powell@gmail.com","date":"2018-08-22T21:33:59Z"},"committer":{"name":"Chris
        Powell","email":"chris.ian.powell@gmail.com","date":"2018-08-22T21:33:59Z"},"message":"adds
        refactors for activity presenter and repo presenter","tree":{"sha":"2b3d7b4526e53f5631cc884a08695bf0ce779d15","url":"https://api.github.com/repos/1powechri2/Grit-Hub/git/trees/2b3d7b4526e53f5631cc884a08695bf0ce779d15"},"url":"https://api.github.com/repos/1powechri2/Grit-Hub/git/commits/b2e705773e1072948cfd47aa165874f75116348f","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/1powechri2/Grit-Hub/commits/b2e705773e1072948cfd47aa165874f75116348f","html_url":"https://github.com/1powechri2/Grit-Hub/commit/b2e705773e1072948cfd47aa165874f75116348f","comments_url":"https://api.github.com/repos/1powechri2/Grit-Hub/commits/b2e705773e1072948cfd47aa165874f75116348f/comments","author":{"login":"1powechri2","id":34900620,"node_id":"MDQ6VXNlcjM0OTAwNjIw","avatar_url":"https://avatars1.githubusercontent.com/u/34900620?v=4","gravatar_id":"","url":"https://api.github.com/users/1powechri2","html_url":"https://github.com/1powechri2","followers_url":"https://api.github.com/users/1powechri2/followers","following_url":"https://api.github.com/users/1powechri2/following{/other_user}","gists_url":"https://api.github.com/users/1powechri2/gists{/gist_id}","starred_url":"https://api.github.com/users/1powechri2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1powechri2/subscriptions","organizations_url":"https://api.github.com/users/1powechri2/orgs","repos_url":"https://api.github.com/users/1powechri2/repos","events_url":"https://api.github.com/users/1powechri2/events{/privacy}","received_events_url":"https://api.github.com/users/1powechri2/received_events","type":"User","site_admin":false},"committer":{"login":"1powechri2","id":34900620,"node_id":"MDQ6VXNlcjM0OTAwNjIw","avatar_url":"https://avatars1.githubusercontent.com/u/34900620?v=4","gravatar_id":"","url":"https://api.github.com/users/1powechri2","html_url":"https://github.com/1powechri2","followers_url":"https://api.github.com/users/1powechri2/followers","following_url":"https://api.github.com/users/1powechri2/following{/other_user}","gists_url":"https://api.github.com/users/1powechri2/gists{/gist_id}","starred_url":"https://api.github.com/users/1powechri2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1powechri2/subscriptions","organizations_url":"https://api.github.com/users/1powechri2/orgs","repos_url":"https://api.github.com/users/1powechri2/repos","events_url":"https://api.github.com/users/1powechri2/events{/privacy}","received_events_url":"https://api.github.com/users/1powechri2/received_events","type":"User","site_admin":false},"parents":[{"sha":"a7913647ae64b75042305824d58632435902ad8f","url":"https://api.github.com/repos/1powechri2/Grit-Hub/commits/a7913647ae64b75042305824d58632435902ad8f","html_url":"https://github.com/1powechri2/Grit-Hub/commit/a7913647ae64b75042305824d58632435902ad8f"}],"stats":{"total":87,"additions":60,"deletions":27},"files":[{"sha":"ac610b218b5f4cd5038e1643c6e974e216976860","filename":"app/controllers/activities_controller.rb","status":"modified","additions":1,"deletions":2,"changes":3,"blob_url":"https://github.com/1powechri2/Grit-Hub/blob/b2e705773e1072948cfd47aa165874f75116348f/app/controllers/activities_controller.rb","raw_url":"https://github.com/1powechri2/Grit-Hub/raw/b2e705773e1072948cfd47aa165874f75116348f/app/controllers/activities_controller.rb","contents_url":"https://api.github.com/repos/1powechri2/Grit-Hub/contents/app/controllers/activities_controller.rb?ref=b2e705773e1072948cfd47aa165874f75116348f","patch":"@@
        -1,6 +1,5 @@\n class ActivitiesController < ApplicationController\n   def
        index\n-    repositories = RepoPresenter.most_recent_repositories(current_user.token)\n-    @recent_activities
        = ActivityPresenter.recent_activities(current_user.name, current_user.token,
        repositories)\n+    @recent_activities = ActivityPresenter.new(current_user.name,
        current_user.token).recent_activities\n   end\n end"},{"sha":"d6cfe188c9d453a87c558089d82afadb2082fb71","filename":"app/controllers/repositories_controller.rb","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/1powechri2/Grit-Hub/blob/b2e705773e1072948cfd47aa165874f75116348f/app/controllers/repositories_controller.rb","raw_url":"https://github.com/1powechri2/Grit-Hub/raw/b2e705773e1072948cfd47aa165874f75116348f/app/controllers/repositories_controller.rb","contents_url":"https://api.github.com/repos/1powechri2/Grit-Hub/contents/app/controllers/repositories_controller.rb?ref=b2e705773e1072948cfd47aa165874f75116348f","patch":"@@
        -1,5 +1,5 @@\n class RepositoriesController < ApplicationController\n   def
        index\n-    @repos = RepoPresenter.repositories(current_user.token)\n+    @repos
        = RepoPresenter.new(current_user.name, current_user.token).repositories\n   end\n
        end"},{"sha":"e189adfef7ecea3eb16acf1a38ef9b5728d3eca7","filename":"app/controllers/users_controller.rb","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/1powechri2/Grit-Hub/blob/b2e705773e1072948cfd47aa165874f75116348f/app/controllers/users_controller.rb","raw_url":"https://github.com/1powechri2/Grit-Hub/raw/b2e705773e1072948cfd47aa165874f75116348f/app/controllers/users_controller.rb","contents_url":"https://api.github.com/repos/1powechri2/Grit-Hub/contents/app/controllers/users_controller.rb?ref=b2e705773e1072948cfd47aa165874f75116348f","patch":"@@
        -1,6 +1,6 @@\n class UsersController < ApplicationController\n   def show\n-    @followers
        = FollowerPresenter.get_followers(current_user.name, current_user.token)\n-    @followings
        = FollowingPresenter.get_followings(current_user.name, current_user.token)\n+    @followers
        = FollowerPresenter.new.get_followers(current_user.name, current_user.token)\n+    @followings
        = FollowingPresenter.new.get_followings(current_user.name, current_user.token)\n   end\n
        end"},{"sha":"8ae982e53f6303a3737e2543b352074a0d4a8ed2","filename":"app/models/activity_presenter.rb","status":"modified","additions":14,"deletions":7,"changes":21,"blob_url":"https://github.com/1powechri2/Grit-Hub/blob/b2e705773e1072948cfd47aa165874f75116348f/app/models/activity_presenter.rb","raw_url":"https://github.com/1powechri2/Grit-Hub/raw/b2e705773e1072948cfd47aa165874f75116348f/app/models/activity_presenter.rb","contents_url":"https://api.github.com/repos/1powechri2/Grit-Hub/contents/app/models/activity_presenter.rb?ref=b2e705773e1072948cfd47aa165874f75116348f","patch":"@@
        -1,19 +1,26 @@\n class ActivityPresenter\n-  def self.recent_activities(name,
        token, repos)\n-    raw_data = repo_commits(name, token, repos)\n \n-    raw_data.each
        do |data|\n+  def initialize(name, token)\n+    @token   = token\n+    @service
        = GithubService.new(name, token)\n+  end\n+\n+  def recent_activities\n+    repo_commits.each
        do |data|\n       @commits = data.map do |commit_data|\n         Commit.new(commit_data)\n       end\n     end\n     @commits\n   end\n
        \n-  def self.repo_commits(name, token, repos)\n-    repos.map do |repo|\n-      response
        = GithubService.get_api.get(\"/repos/#{name}/#{repo.name}/commits?access_token=#{token}\")\n-      commit_data
        = JSON.parse(response.body, symbolize_names: true)\n+  def repo_commits\n+    latest_repos.map
        do |repo|\n+      @service.repo_commits_json(repo.name)\n     end\n   end\n+\n+  def
        latest_repos\n+    RepoPresenter.new(@name, @token).most_recent_repositories\n+  end\n
        end"},{"sha":"eccbadd14c48adf33583cff9b09fe3300dc8ba5d","filename":"app/models/follower_presenter.rb","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/1powechri2/Grit-Hub/blob/b2e705773e1072948cfd47aa165874f75116348f/app/models/follower_presenter.rb","raw_url":"https://github.com/1powechri2/Grit-Hub/raw/b2e705773e1072948cfd47aa165874f75116348f/app/models/follower_presenter.rb","contents_url":"https://api.github.com/repos/1powechri2/Grit-Hub/contents/app/models/follower_presenter.rb?ref=b2e705773e1072948cfd47aa165874f75116348f","patch":"@@
        -1,6 +1,6 @@\n class FollowerPresenter\n-  def self.get_followers(name, token)\n-    response
        = GithubService.get_api.get(\"/users/#{name}/followers?access_token=#{token}\")\n+  def
        get_followers(name, token)\n+    response = GithubService.new(name, token).connect.get(\"/users/#{name}/followers?access_token=#{token}\")\n     followers
        = JSON.parse(response.body, symbolize_names: true)\n     followers.map do
        |follower_data|\n       Follower.new(follower_data)"},{"sha":"46c67b57e0219e9c818c1576d7701e5bd16cd59f","filename":"app/models/following_presenter.rb","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/1powechri2/Grit-Hub/blob/b2e705773e1072948cfd47aa165874f75116348f/app/models/following_presenter.rb","raw_url":"https://github.com/1powechri2/Grit-Hub/raw/b2e705773e1072948cfd47aa165874f75116348f/app/models/following_presenter.rb","contents_url":"https://api.github.com/repos/1powechri2/Grit-Hub/contents/app/models/following_presenter.rb?ref=b2e705773e1072948cfd47aa165874f75116348f","patch":"@@
        -1,6 +1,6 @@\n class FollowingPresenter\n-  def self.get_followings(name,
        token)\n-    response = GithubService.get_api.get(\"/users/#{name}/following?access_token=#{token}\")\n+  def
        get_followings(name, token)\n+    response = GithubService.new(name, token).connect.get(\"/users/#{name}/following?access_token=#{token}\")\n     followings
        = JSON.parse(response.body, symbolize_names: true)\n     followings.map do
        |follower_data|\n       Following.new(follower_data)"},{"sha":"ecce1292c46f4e38261f79f16e6125116ea9231c","filename":"app/models/repo_presenter.rb","status":"modified","additions":13,"deletions":7,"changes":20,"blob_url":"https://github.com/1powechri2/Grit-Hub/blob/b2e705773e1072948cfd47aa165874f75116348f/app/models/repo_presenter.rb","raw_url":"https://github.com/1powechri2/Grit-Hub/raw/b2e705773e1072948cfd47aa165874f75116348f/app/models/repo_presenter.rb","contents_url":"https://api.github.com/repos/1powechri2/Grit-Hub/contents/app/models/repo_presenter.rb?ref=b2e705773e1072948cfd47aa165874f75116348f","patch":"@@
        -1,16 +1,22 @@\n class RepoPresenter\n-  def self.repositories(token)\n-    response
        = GithubService.get_api.get(\"/user/repos?access_token=#{token}\")\n-    repos
        = JSON.parse(response.body, symbolize_names: true)\n+\n+  def initialize(name,
        token)\n+    @name = name\n+    @service = GithubService.new(name, token)\n+  end\n+\n+  def
        repos\n+    @service.repos_json\n+  end\n+\n+  def repositories\n     repos.map
        do |repo_data|\n       Repository.new(repo_data)\n     end\n   end\n \n-  def
        self.most_recent_repositories(token)\n-    recent = self.repositories(token)\n-\n-    recent.map
        do |repo|\n+  def most_recent_repositories\n+    repositories.map do |repo|\n       if
        Date.parse(repo.updated_at) > Date.today - 5\n         repo\n       end"},{"sha":"2f0559b8a76519c25fada823e7172b3d2693ec53","filename":"app/services/github_service.rb","status":"modified","additions":22,"deletions":1,"changes":23,"blob_url":"https://github.com/1powechri2/Grit-Hub/blob/b2e705773e1072948cfd47aa165874f75116348f/app/services/github_service.rb","raw_url":"https://github.com/1powechri2/Grit-Hub/raw/b2e705773e1072948cfd47aa165874f75116348f/app/services/github_service.rb","contents_url":"https://api.github.com/repos/1powechri2/Grit-Hub/contents/app/services/github_service.rb?ref=b2e705773e1072948cfd47aa165874f75116348f","patch":"@@
        -1,7 +1,28 @@\n class GithubService\n-  def self.get_api\n+  def initialize(name
        = nil, token = nil)\n+    @name  = name\n+    @token = token\n+  end\n+\n+  def
        connect\n     Faraday.new(url: \"https://api.github.com\") do |faraday|\n       faraday.adapter
        Faraday.default_adapter\n     end\n   end\n+\n+  def get_repo_commits(name)\n+    @get_repo_commits
        ||= connect.get(\"/repos/#{@name}/#{name}/commits?access_token=#{@token}\")\n+  end\n+\n+  def
        get_repos\n+    @get_repos ||= connect.get(\"/user/repos?access_token=#{@token}\")\n+  end\n+\n+  def
        repo_commits_json(name)\n+    JSON.parse(get_repo_commits(name).body, symbolize_names:
        true)\n+  end\n+\n+  def repos_json\n+    JSON.parse(get_repos.body, symbolize_names:
        true)\n+  end\n end"},{"sha":"11d615f2472c3db0039cfc7361bfa01a52e9307f","filename":"app/views/activities/index.html.erb","status":"modified","additions":3,"deletions":3,"changes":6,"blob_url":"https://github.com/1powechri2/Grit-Hub/blob/b2e705773e1072948cfd47aa165874f75116348f/app/views/activities/index.html.erb","raw_url":"https://github.com/1powechri2/Grit-Hub/raw/b2e705773e1072948cfd47aa165874f75116348f/app/views/activities/index.html.erb","contents_url":"https://api.github.com/repos/1powechri2/Grit-Hub/contents/app/views/activities/index.html.erb?ref=b2e705773e1072948cfd47aa165874f75116348f","patch":"@@
        -1,7 +1,7 @@\n <ul>\n <% @recent_activities.each do |activity| %>\n-<%= activity.author
        %>\n-<%= activity.message %>\n-<%= link_to ''See Commit'', activity.url %>\n+<li><%=
        activity.author %></li>\n+<li><%= activity.message %></li>\n+<li><%= link_to
        ''See Commit'', activity.url %></li>\n <% end %>\n </ul>"}]}'
    http_version: 
  recorded_at: Fri, 24 Aug 2018 14:27:30 GMT
- request:
    method: get
    uri: https://api.github.com/repos/1powechri2/Grit-Hub/commits/7c534d8b15ac884d3be1f1c9d1be3d7e8b7fa0a5
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Faraday v0.15.2
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - GitHub.com
      Date:
      - Fri, 24 Aug 2018 14:27:17 GMT
      Content-Type:
      - application/json; charset=utf-8
      Transfer-Encoding:
      - chunked
      Status:
      - 200 OK
      X-Ratelimit-Limit:
      - '60'
      X-Ratelimit-Remaining:
      - '57'
      X-Ratelimit-Reset:
      - '1535122878'
      Cache-Control:
      - public, max-age=60, s-maxage=60
      Vary:
      - Accept
      Etag:
      - W/"0a53ff31f8c13413c61161089702431d"
      Last-Modified:
      - Wed, 22 Aug 2018 13:23:29 GMT
      X-Github-Media-Type:
      - github.v3; format=json
      Access-Control-Expose-Headers:
      - ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining,
        X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
      Access-Control-Allow-Origin:
      - "*"
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      X-Frame-Options:
      - deny
      X-Content-Type-Options:
      - nosniff
      X-Xss-Protection:
      - 1; mode=block
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Content-Security-Policy:
      - default-src 'none'
      X-Runtime-Rack:
      - '0.094330'
      X-Github-Request-Id:
      - 48C6:55A0:B0F3EE:18CF09C:5B8015C5
    body:
      encoding: ASCII-8BIT
      string: '{"sha":"7c534d8b15ac884d3be1f1c9d1be3d7e8b7fa0a5","node_id":"MDY6Q29tbWl0MTQ1NDg2ODEwOjdjNTM0ZDhiMTVhYzg4NGQzYmUxZjFjOWQxYmUzZDdlOGI3ZmEwYTU=","commit":{"author":{"name":"Chris
        Powell","email":"chris.ian.powell@gmail.com","date":"2018-08-22T13:23:29Z"},"committer":{"name":"Chris
        Powell","email":"chris.ian.powell@gmail.com","date":"2018-08-22T13:23:29Z"},"message":"adds
        some styling","tree":{"sha":"2b3d87a749f39c4cc83e6d46d7f4c424884108c2","url":"https://api.github.com/repos/1powechri2/Grit-Hub/git/trees/2b3d87a749f39c4cc83e6d46d7f4c424884108c2"},"url":"https://api.github.com/repos/1powechri2/Grit-Hub/git/commits/7c534d8b15ac884d3be1f1c9d1be3d7e8b7fa0a5","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/1powechri2/Grit-Hub/commits/7c534d8b15ac884d3be1f1c9d1be3d7e8b7fa0a5","html_url":"https://github.com/1powechri2/Grit-Hub/commit/7c534d8b15ac884d3be1f1c9d1be3d7e8b7fa0a5","comments_url":"https://api.github.com/repos/1powechri2/Grit-Hub/commits/7c534d8b15ac884d3be1f1c9d1be3d7e8b7fa0a5/comments","author":{"login":"1powechri2","id":34900620,"node_id":"MDQ6VXNlcjM0OTAwNjIw","avatar_url":"https://avatars1.githubusercontent.com/u/34900620?v=4","gravatar_id":"","url":"https://api.github.com/users/1powechri2","html_url":"https://github.com/1powechri2","followers_url":"https://api.github.com/users/1powechri2/followers","following_url":"https://api.github.com/users/1powechri2/following{/other_user}","gists_url":"https://api.github.com/users/1powechri2/gists{/gist_id}","starred_url":"https://api.github.com/users/1powechri2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1powechri2/subscriptions","organizations_url":"https://api.github.com/users/1powechri2/orgs","repos_url":"https://api.github.com/users/1powechri2/repos","events_url":"https://api.github.com/users/1powechri2/events{/privacy}","received_events_url":"https://api.github.com/users/1powechri2/received_events","type":"User","site_admin":false},"committer":{"login":"1powechri2","id":34900620,"node_id":"MDQ6VXNlcjM0OTAwNjIw","avatar_url":"https://avatars1.githubusercontent.com/u/34900620?v=4","gravatar_id":"","url":"https://api.github.com/users/1powechri2","html_url":"https://github.com/1powechri2","followers_url":"https://api.github.com/users/1powechri2/followers","following_url":"https://api.github.com/users/1powechri2/following{/other_user}","gists_url":"https://api.github.com/users/1powechri2/gists{/gist_id}","starred_url":"https://api.github.com/users/1powechri2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1powechri2/subscriptions","organizations_url":"https://api.github.com/users/1powechri2/orgs","repos_url":"https://api.github.com/users/1powechri2/repos","events_url":"https://api.github.com/users/1powechri2/events{/privacy}","received_events_url":"https://api.github.com/users/1powechri2/received_events","type":"User","site_admin":false},"parents":[{"sha":"ac6eb56610c082716c72e21b481693fcc98cf9a4","url":"https://api.github.com/repos/1powechri2/Grit-Hub/commits/ac6eb56610c082716c72e21b481693fcc98cf9a4","html_url":"https://github.com/1powechri2/Grit-Hub/commit/ac6eb56610c082716c72e21b481693fcc98cf9a4"}],"stats":{"total":32,"additions":14,"deletions":18},"files":[{"sha":"df2fdcda77122e14b4777a2ccdeade51e125a893","filename":"app/assets/stylesheets/application.css","status":"modified","additions":5,"deletions":15,"changes":20,"blob_url":"https://github.com/1powechri2/Grit-Hub/blob/7c534d8b15ac884d3be1f1c9d1be3d7e8b7fa0a5/app/assets/stylesheets/application.css","raw_url":"https://github.com/1powechri2/Grit-Hub/raw/7c534d8b15ac884d3be1f1c9d1be3d7e8b7fa0a5/app/assets/stylesheets/application.css","contents_url":"https://api.github.com/repos/1powechri2/Grit-Hub/contents/app/assets/stylesheets/application.css?ref=7c534d8b15ac884d3be1f1c9d1be3d7e8b7fa0a5","patch":"@@
        -1,15 +1,5 @@\n-/*\n- * This is a manifest file that''ll be compiled into
        application.css, which will include all the files\n- * listed below.\n- *\n-
        * Any CSS and SCSS file within this directory, lib/assets/stylesheets, or
        any plugin''s\n- * vendor/assets/stylesheets directory can be referenced here
        using a relative path.\n- *\n- * You''re free to add application-wide styles
        to this file and they''ll appear at the bottom of the\n- * compiled file so
        the styles you add here take precedence over styles defined in any other CSS/SCSS\n-
        * files in this directory. Styles in this file should be added after the last
        require_* statement.\n- * It is generally better to create a new file per
        style scope.\n- *\n- *= require_tree .\n- *= require_self\n- */\n+nav {\n+  background-color:
        Black;\n+  height: 50px;\n+  text-color: white;\n+}"},{"sha":"215d02af642312a3300b095dad8cb86b1118fae8","filename":"app/models/repo_presenter.rb","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/1powechri2/Grit-Hub/blob/7c534d8b15ac884d3be1f1c9d1be3d7e8b7fa0a5/app/models/repo_presenter.rb","raw_url":"https://github.com/1powechri2/Grit-Hub/raw/7c534d8b15ac884d3be1f1c9d1be3d7e8b7fa0a5/app/models/repo_presenter.rb","contents_url":"https://api.github.com/repos/1powechri2/Grit-Hub/contents/app/models/repo_presenter.rb?ref=7c534d8b15ac884d3be1f1c9d1be3d7e8b7fa0a5","patch":"@@
        -1,4 +1,4 @@\n-class RepoPresenter\n+qclass RepoPresenter\n   def self.repositories(token)\n     response
        = GithubService.get_api.get(\"/user/repos?access_token=#{token}\")\n     repos
        = JSON.parse(response.body, symbolize_names: true)"},{"sha":"5928d0d2fa5495bccc876a85cdc6cc49db607728","filename":"app/views/layouts/application.html.erb","status":"modified","additions":8,"deletions":0,"changes":8,"blob_url":"https://github.com/1powechri2/Grit-Hub/blob/7c534d8b15ac884d3be1f1c9d1be3d7e8b7fa0a5/app/views/layouts/application.html.erb","raw_url":"https://github.com/1powechri2/Grit-Hub/raw/7c534d8b15ac884d3be1f1c9d1be3d7e8b7fa0a5/app/views/layouts/application.html.erb","contents_url":"https://api.github.com/repos/1powechri2/Grit-Hub/contents/app/views/layouts/application.html.erb?ref=7c534d8b15ac884d3be1f1c9d1be3d7e8b7fa0a5","patch":"@@
        -10,6 +10,14 @@\n   </head>\n \n   <body>\n+      <% if current_user %>\n+      <nav>\n+        <p
        class=''repos''><%= link_to \"Repositories\", repositories_path %></p>\n+        <p
        class=''activity''><%= link_to \"Recent Activity\", recent_activity_path%></p>\n+      </nav>\n+      <%
        else %>\n+      <nav></nav>\n+      <% end %>\n     <%= yield %>\n   </body>\n
        </html>"},{"sha":"17b3739af6bd107128eef8b1402b29f32a0e4809","filename":"app/views/users/show.html.erb","status":"modified","additions":0,"deletions":2,"changes":2,"blob_url":"https://github.com/1powechri2/Grit-Hub/blob/7c534d8b15ac884d3be1f1c9d1be3d7e8b7fa0a5/app/views/users/show.html.erb","raw_url":"https://github.com/1powechri2/Grit-Hub/raw/7c534d8b15ac884d3be1f1c9d1be3d7e8b7fa0a5/app/views/users/show.html.erb","contents_url":"https://api.github.com/repos/1powechri2/Grit-Hub/contents/app/views/users/show.html.erb?ref=7c534d8b15ac884d3be1f1c9d1be3d7e8b7fa0a5","patch":"@@
        -1,4 +1,2 @@\n <p>Git Hub Username: <%= current_user.name %></p>\n <%= image_tag
        current_user.pic %>\n-<%= link_to \"Repositories\", repositories_path %>\n-<%=
        link_to \"Recent Activity\", recent_activity_path%>"}]}'
    http_version: 
  recorded_at: Fri, 24 Aug 2018 14:27:30 GMT
- request:
    method: get
    uri: https://api.github.com/repos/1powechri2/Grit-Hub/commits/a7913647ae64b75042305824d58632435902ad8f
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Faraday v0.15.2
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - GitHub.com
      Date:
      - Fri, 24 Aug 2018 14:27:18 GMT
      Content-Type:
      - application/json; charset=utf-8
      Transfer-Encoding:
      - chunked
      Status:
      - 200 OK
      X-Ratelimit-Limit:
      - '60'
      X-Ratelimit-Remaining:
      - '56'
      X-Ratelimit-Reset:
      - '1535122878'
      Cache-Control:
      - public, max-age=60, s-maxage=60
      Vary:
      - Accept
      Etag:
      - W/"943887d4a9442a46616873efe0e1e594"
      Last-Modified:
      - Wed, 22 Aug 2018 14:24:44 GMT
      X-Github-Media-Type:
      - github.v3; format=json
      Access-Control-Expose-Headers:
      - ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining,
        X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
      Access-Control-Allow-Origin:
      - "*"
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      X-Frame-Options:
      - deny
      X-Content-Type-Options:
      - nosniff
      X-Xss-Protection:
      - 1; mode=block
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Content-Security-Policy:
      - default-src 'none'
      X-Runtime-Rack:
      - '0.098081'
      X-Github-Request-Id:
      - 1E22:55A3:F1C5E4:1EAC741:5B8015C5
    body:
      encoding: ASCII-8BIT
      string: '{"sha":"a7913647ae64b75042305824d58632435902ad8f","node_id":"MDY6Q29tbWl0MTQ1NDg2ODEwOmE3OTEzNjQ3YWU2NGI3NTA0MjMwNTgyNGQ1ODYzMjQzNTkwMmFkOGY=","commit":{"author":{"name":"Chris
        Powell","email":"chris.ian.powell@gmail.com","date":"2018-08-22T14:24:44Z"},"committer":{"name":"Chris
        Powell","email":"chris.ian.powell@gmail.com","date":"2018-08-22T14:24:44Z"},"message":"adds
        followers and following to dashboard","tree":{"sha":"b844ccfad39d742b4002e74e8c02be279e694b3a","url":"https://api.github.com/repos/1powechri2/Grit-Hub/git/trees/b844ccfad39d742b4002e74e8c02be279e694b3a"},"url":"https://api.github.com/repos/1powechri2/Grit-Hub/git/commits/a7913647ae64b75042305824d58632435902ad8f","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/1powechri2/Grit-Hub/commits/a7913647ae64b75042305824d58632435902ad8f","html_url":"https://github.com/1powechri2/Grit-Hub/commit/a7913647ae64b75042305824d58632435902ad8f","comments_url":"https://api.github.com/repos/1powechri2/Grit-Hub/commits/a7913647ae64b75042305824d58632435902ad8f/comments","author":{"login":"1powechri2","id":34900620,"node_id":"MDQ6VXNlcjM0OTAwNjIw","avatar_url":"https://avatars1.githubusercontent.com/u/34900620?v=4","gravatar_id":"","url":"https://api.github.com/users/1powechri2","html_url":"https://github.com/1powechri2","followers_url":"https://api.github.com/users/1powechri2/followers","following_url":"https://api.github.com/users/1powechri2/following{/other_user}","gists_url":"https://api.github.com/users/1powechri2/gists{/gist_id}","starred_url":"https://api.github.com/users/1powechri2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1powechri2/subscriptions","organizations_url":"https://api.github.com/users/1powechri2/orgs","repos_url":"https://api.github.com/users/1powechri2/repos","events_url":"https://api.github.com/users/1powechri2/events{/privacy}","received_events_url":"https://api.github.com/users/1powechri2/received_events","type":"User","site_admin":false},"committer":{"login":"1powechri2","id":34900620,"node_id":"MDQ6VXNlcjM0OTAwNjIw","avatar_url":"https://avatars1.githubusercontent.com/u/34900620?v=4","gravatar_id":"","url":"https://api.github.com/users/1powechri2","html_url":"https://github.com/1powechri2","followers_url":"https://api.github.com/users/1powechri2/followers","following_url":"https://api.github.com/users/1powechri2/following{/other_user}","gists_url":"https://api.github.com/users/1powechri2/gists{/gist_id}","starred_url":"https://api.github.com/users/1powechri2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1powechri2/subscriptions","organizations_url":"https://api.github.com/users/1powechri2/orgs","repos_url":"https://api.github.com/users/1powechri2/repos","events_url":"https://api.github.com/users/1powechri2/events{/privacy}","received_events_url":"https://api.github.com/users/1powechri2/received_events","type":"User","site_admin":false},"parents":[{"sha":"7c534d8b15ac884d3be1f1c9d1be3d7e8b7fa0a5","url":"https://api.github.com/repos/1powechri2/Grit-Hub/commits/7c534d8b15ac884d3be1f1c9d1be3d7e8b7fa0a5","html_url":"https://github.com/1powechri2/Grit-Hub/commit/7c534d8b15ac884d3be1f1c9d1be3d7e8b7fa0a5"}],"stats":{"total":53,"additions":48,"deletions":5},"files":[{"sha":"bb1681a7ea945677954ad7aad48a5ecc5c2348f6","filename":"app/controllers/users_controller.rb","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/1powechri2/Grit-Hub/blob/a7913647ae64b75042305824d58632435902ad8f/app/controllers/users_controller.rb","raw_url":"https://github.com/1powechri2/Grit-Hub/raw/a7913647ae64b75042305824d58632435902ad8f/app/controllers/users_controller.rb","contents_url":"https://api.github.com/repos/1powechri2/Grit-Hub/contents/app/controllers/users_controller.rb?ref=a7913647ae64b75042305824d58632435902ad8f","patch":"@@
        -1,5 +1,6 @@\n class UsersController < ApplicationController\n   def show\n-\n+    @followers
        = FollowerPresenter.get_followers(current_user.name, current_user.token)\n+    @followings
        = FollowingPresenter.get_followings(current_user.name, current_user.token)\n   end\n
        end"},{"sha":"1936c32602780963932c2076e9dfc389b29446b4","filename":"app/models/follower.rb","status":"added","additions":8,"deletions":0,"changes":8,"blob_url":"https://github.com/1powechri2/Grit-Hub/blob/a7913647ae64b75042305824d58632435902ad8f/app/models/follower.rb","raw_url":"https://github.com/1powechri2/Grit-Hub/raw/a7913647ae64b75042305824d58632435902ad8f/app/models/follower.rb","contents_url":"https://api.github.com/repos/1powechri2/Grit-Hub/contents/app/models/follower.rb?ref=a7913647ae64b75042305824d58632435902ad8f","patch":"@@
        -0,0 +1,8 @@\n+class Follower\n+  attr_reader :login, :url\n+\n+  def initialize(data)\n+    @login
        = data[:login]\n+    @url   = data[:html_url]\n+  end\n+end"},{"sha":"856d4ac2d15666fd66482c2443fd5de8b441ac1d","filename":"app/models/follower_presenter.rb","status":"added","additions":9,"deletions":0,"changes":9,"blob_url":"https://github.com/1powechri2/Grit-Hub/blob/a7913647ae64b75042305824d58632435902ad8f/app/models/follower_presenter.rb","raw_url":"https://github.com/1powechri2/Grit-Hub/raw/a7913647ae64b75042305824d58632435902ad8f/app/models/follower_presenter.rb","contents_url":"https://api.github.com/repos/1powechri2/Grit-Hub/contents/app/models/follower_presenter.rb?ref=a7913647ae64b75042305824d58632435902ad8f","patch":"@@
        -0,0 +1,9 @@\n+class FollowerPresenter\n+  def self.get_followers(name, token)\n+    response
        = GithubService.get_api.get(\"/users/#{name}/followers?access_token=#{token}\")\n+    followers
        = JSON.parse(response.body, symbolize_names: true)\n+    followers.map do
        |follower_data|\n+      Follower.new(follower_data)\n+    end\n+  end\n+end"},{"sha":"e12aecb35ee096c1020f18b77f2244aed64054e1","filename":"app/models/following.rb","status":"added","additions":8,"deletions":0,"changes":8,"blob_url":"https://github.com/1powechri2/Grit-Hub/blob/a7913647ae64b75042305824d58632435902ad8f/app/models/following.rb","raw_url":"https://github.com/1powechri2/Grit-Hub/raw/a7913647ae64b75042305824d58632435902ad8f/app/models/following.rb","contents_url":"https://api.github.com/repos/1powechri2/Grit-Hub/contents/app/models/following.rb?ref=a7913647ae64b75042305824d58632435902ad8f","patch":"@@
        -0,0 +1,8 @@\n+class Following\n+  attr_reader :login, :url\n+\n+  def initialize(data)\n+    @login
        = data[:login]\n+    @url   = data[:html_url]\n+  end\n+end"},{"sha":"10ff55ff7b6578d949db4f121d402957cdc8a24f","filename":"app/models/following_presenter.rb","status":"added","additions":9,"deletions":0,"changes":9,"blob_url":"https://github.com/1powechri2/Grit-Hub/blob/a7913647ae64b75042305824d58632435902ad8f/app/models/following_presenter.rb","raw_url":"https://github.com/1powechri2/Grit-Hub/raw/a7913647ae64b75042305824d58632435902ad8f/app/models/following_presenter.rb","contents_url":"https://api.github.com/repos/1powechri2/Grit-Hub/contents/app/models/following_presenter.rb?ref=a7913647ae64b75042305824d58632435902ad8f","patch":"@@
        -0,0 +1,9 @@\n+class FollowingPresenter\n+  def self.get_followings(name,
        token)\n+    response = GithubService.get_api.get(\"/users/#{name}/following?access_token=#{token}\")\n+    followings
        = JSON.parse(response.body, symbolize_names: true)\n+    followings.map do
        |follower_data|\n+      Following.new(follower_data)\n+    end\n+  end\n+end"},{"sha":"ad0897358d811976320d7c40837e5dc45a62873f","filename":"app/models/repo_presenter.rb","status":"modified","additions":3,"deletions":3,"changes":6,"blob_url":"https://github.com/1powechri2/Grit-Hub/blob/a7913647ae64b75042305824d58632435902ad8f/app/models/repo_presenter.rb","raw_url":"https://github.com/1powechri2/Grit-Hub/raw/a7913647ae64b75042305824d58632435902ad8f/app/models/repo_presenter.rb","contents_url":"https://api.github.com/repos/1powechri2/Grit-Hub/contents/app/models/repo_presenter.rb?ref=a7913647ae64b75042305824d58632435902ad8f","patch":"@@
        -1,16 +1,16 @@\n-qclass RepoPresenter\n+class RepoPresenter\n   def self.repositories(token)\n     response
        = GithubService.get_api.get(\"/user/repos?access_token=#{token}\")\n     repos
        = JSON.parse(response.body, symbolize_names: true)\n-    repos = repos.map
        do |repo_data|\n+    repos.map do |repo_data|\n       Repository.new(repo_data)\n     end\n   end\n
        \n   def self.most_recent_repositories(token)\n     recent = self.repositories(token)\n
        \n-    thing = recent.map do |repo|\n+    recent.map do |repo|\n       if
        Date.parse(repo.updated_at) > Date.today - 5\n         repo\n       end"},{"sha":"172a66663b2b56631006f604a61b2f36369ce83b","filename":"app/views/users/show.html.erb","status":"modified","additions":9,"deletions":1,"changes":10,"blob_url":"https://github.com/1powechri2/Grit-Hub/blob/a7913647ae64b75042305824d58632435902ad8f/app/views/users/show.html.erb","raw_url":"https://github.com/1powechri2/Grit-Hub/raw/a7913647ae64b75042305824d58632435902ad8f/app/views/users/show.html.erb","contents_url":"https://api.github.com/repos/1powechri2/Grit-Hub/contents/app/views/users/show.html.erb?ref=a7913647ae64b75042305824d58632435902ad8f","patch":"@@
        -1,2 +1,10 @@\n-<p>Git Hub Username: <%= current_user.name %></p>\n <%= image_tag
        current_user.pic %>\n+<p>Git Hub Username: <%= current_user.name %></p>\n+<p>Followers</p>\n+<p><%
        @followers.each do |follower| %>\n+<%= link_to follower.login, follower.url
        %><br>\n+<% end %></p>\n+<p>Following</p>\n+<p><% @followings.each do |following|
        %>\n+<%= link_to following.login, following.url %><br>\n+<% end %></p>"}]}'
    http_version: 
  recorded_at: Fri, 24 Aug 2018 14:27:30 GMT
- request:
    method: get
    uri: https://api.github.com/repos/1powechri2/Grit-Hub/commits/ac6eb56610c082716c72e21b481693fcc98cf9a4
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Faraday v0.15.2
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - GitHub.com
      Date:
      - Fri, 24 Aug 2018 14:27:18 GMT
      Content-Type:
      - application/json; charset=utf-8
      Transfer-Encoding:
      - chunked
      Status:
      - 200 OK
      X-Ratelimit-Limit:
      - '60'
      X-Ratelimit-Remaining:
      - '55'
      X-Ratelimit-Reset:
      - '1535122878'
      Cache-Control:
      - public, max-age=60, s-maxage=60
      Vary:
      - Accept
      Etag:
      - W/"6d099f064a92fae74635538a5ceecde1"
      Last-Modified:
      - Tue, 21 Aug 2018 23:38:56 GMT
      X-Github-Media-Type:
      - github.v3; format=json
      Access-Control-Expose-Headers:
      - ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining,
        X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
      Access-Control-Allow-Origin:
      - "*"
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      X-Frame-Options:
      - deny
      X-Content-Type-Options:
      - nosniff
      X-Xss-Protection:
      - 1; mode=block
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Content-Security-Policy:
      - default-src 'none'
      X-Runtime-Rack:
      - '0.116779'
      X-Github-Request-Id:
      - 34C4:55A3:F1C601:1EAC785:5B8015C6
    body:
      encoding: ASCII-8BIT
      string: '{"sha":"ac6eb56610c082716c72e21b481693fcc98cf9a4","node_id":"MDY6Q29tbWl0MTQ1NDg2ODEwOmFjNmViNTY2MTBjMDgyNzE2YzcyZTIxYjQ4MTY5M2ZjYzk4Y2Y5YTQ=","commit":{"author":{"name":"Chris
        Powell","email":"chris.ian.powell@gmail.com","date":"2018-08-21T23:38:56Z"},"committer":{"name":"Chris
        Powell","email":"chris.ian.powell@gmail.com","date":"2018-08-21T23:38:56Z"},"message":"adds
        functionality to see commits over last 5 days","tree":{"sha":"c49cda6d0c717d58570f791dc9f7045bf3f8e62e","url":"https://api.github.com/repos/1powechri2/Grit-Hub/git/trees/c49cda6d0c717d58570f791dc9f7045bf3f8e62e"},"url":"https://api.github.com/repos/1powechri2/Grit-Hub/git/commits/ac6eb56610c082716c72e21b481693fcc98cf9a4","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/1powechri2/Grit-Hub/commits/ac6eb56610c082716c72e21b481693fcc98cf9a4","html_url":"https://github.com/1powechri2/Grit-Hub/commit/ac6eb56610c082716c72e21b481693fcc98cf9a4","comments_url":"https://api.github.com/repos/1powechri2/Grit-Hub/commits/ac6eb56610c082716c72e21b481693fcc98cf9a4/comments","author":{"login":"1powechri2","id":34900620,"node_id":"MDQ6VXNlcjM0OTAwNjIw","avatar_url":"https://avatars1.githubusercontent.com/u/34900620?v=4","gravatar_id":"","url":"https://api.github.com/users/1powechri2","html_url":"https://github.com/1powechri2","followers_url":"https://api.github.com/users/1powechri2/followers","following_url":"https://api.github.com/users/1powechri2/following{/other_user}","gists_url":"https://api.github.com/users/1powechri2/gists{/gist_id}","starred_url":"https://api.github.com/users/1powechri2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1powechri2/subscriptions","organizations_url":"https://api.github.com/users/1powechri2/orgs","repos_url":"https://api.github.com/users/1powechri2/repos","events_url":"https://api.github.com/users/1powechri2/events{/privacy}","received_events_url":"https://api.github.com/users/1powechri2/received_events","type":"User","site_admin":false},"committer":{"login":"1powechri2","id":34900620,"node_id":"MDQ6VXNlcjM0OTAwNjIw","avatar_url":"https://avatars1.githubusercontent.com/u/34900620?v=4","gravatar_id":"","url":"https://api.github.com/users/1powechri2","html_url":"https://github.com/1powechri2","followers_url":"https://api.github.com/users/1powechri2/followers","following_url":"https://api.github.com/users/1powechri2/following{/other_user}","gists_url":"https://api.github.com/users/1powechri2/gists{/gist_id}","starred_url":"https://api.github.com/users/1powechri2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1powechri2/subscriptions","organizations_url":"https://api.github.com/users/1powechri2/orgs","repos_url":"https://api.github.com/users/1powechri2/repos","events_url":"https://api.github.com/users/1powechri2/events{/privacy}","received_events_url":"https://api.github.com/users/1powechri2/received_events","type":"User","site_admin":false},"parents":[{"sha":"0b7f6133eb0bf5d221ed9df3ccdbee12227bddf1","url":"https://api.github.com/repos/1powechri2/Grit-Hub/commits/0b7f6133eb0bf5d221ed9df3ccdbee12227bddf1","html_url":"https://github.com/1powechri2/Grit-Hub/commit/0b7f6133eb0bf5d221ed9df3ccdbee12227bddf1"}],"stats":{"total":61,"additions":56,"deletions":5},"files":[{"sha":"587c90347c0f2180c51405786ad31e1826e889cb","filename":"app/controllers/activities_controller.rb","status":"added","additions":6,"deletions":0,"changes":6,"blob_url":"https://github.com/1powechri2/Grit-Hub/blob/ac6eb56610c082716c72e21b481693fcc98cf9a4/app/controllers/activities_controller.rb","raw_url":"https://github.com/1powechri2/Grit-Hub/raw/ac6eb56610c082716c72e21b481693fcc98cf9a4/app/controllers/activities_controller.rb","contents_url":"https://api.github.com/repos/1powechri2/Grit-Hub/contents/app/controllers/activities_controller.rb?ref=ac6eb56610c082716c72e21b481693fcc98cf9a4","patch":"@@
        -0,0 +1,6 @@\n+class ActivitiesController < ApplicationController\n+  def
        index\n+    repositories = RepoPresenter.most_recent_repositories(current_user.token)\n+    @recent_activities
        = ActivityPresenter.recent_activities(current_user.name, current_user.token,
        repositories)\n+  end\n+end"},{"sha":"87045d10e7c63a4d830d4613d56e63205ccc1822","filename":"app/models/activity_presenter.rb","status":"added","additions":19,"deletions":0,"changes":19,"blob_url":"https://github.com/1powechri2/Grit-Hub/blob/ac6eb56610c082716c72e21b481693fcc98cf9a4/app/models/activity_presenter.rb","raw_url":"https://github.com/1powechri2/Grit-Hub/raw/ac6eb56610c082716c72e21b481693fcc98cf9a4/app/models/activity_presenter.rb","contents_url":"https://api.github.com/repos/1powechri2/Grit-Hub/contents/app/models/activity_presenter.rb?ref=ac6eb56610c082716c72e21b481693fcc98cf9a4","patch":"@@
        -0,0 +1,19 @@\n+class ActivityPresenter\n+  def self.recent_activities(name,
        token, repos)\n+    raw_data = repo_commits(name, token, repos)\n+\n+    raw_data.each
        do |data|\n+      @commits = data.map do |commit_data|\n+        Commit.new(commit_data)\n+      end\n+    end\n+    @commits\n+  end\n+\n+  def
        self.repo_commits(name, token, repos)\n+    repos.map do |repo|\n+      response
        = GithubService.get_api.get(\"/repos/#{name}/#{repo.name}/commits?access_token=#{token}\")\n+      commit_data
        = JSON.parse(response.body, symbolize_names: true)\n+    end\n+  end\n+end"},{"sha":"8a231f05514bdb98733b053d013262f7041226bf","filename":"app/models/commit.rb","status":"added","additions":9,"deletions":0,"changes":9,"blob_url":"https://github.com/1powechri2/Grit-Hub/blob/ac6eb56610c082716c72e21b481693fcc98cf9a4/app/models/commit.rb","raw_url":"https://github.com/1powechri2/Grit-Hub/raw/ac6eb56610c082716c72e21b481693fcc98cf9a4/app/models/commit.rb","contents_url":"https://api.github.com/repos/1powechri2/Grit-Hub/contents/app/models/commit.rb?ref=ac6eb56610c082716c72e21b481693fcc98cf9a4","patch":"@@
        -0,0 +1,9 @@\n+class Commit\n+  attr_reader :author, :message, :url\n+\n+  def
        initialize(data)\n+    @author = data[:commit][:author][:name]\n+    @message
        = data[:commit][:message]\n+    @url = data[:html_url]\n+  end\n+end"},{"sha":"723d1c3ecce0ae2103a6e21f344bd6784fb068f8","filename":"app/models/repo_presenter.rb","status":"modified","additions":11,"deletions":1,"changes":12,"blob_url":"https://github.com/1powechri2/Grit-Hub/blob/ac6eb56610c082716c72e21b481693fcc98cf9a4/app/models/repo_presenter.rb","raw_url":"https://github.com/1powechri2/Grit-Hub/raw/ac6eb56610c082716c72e21b481693fcc98cf9a4/app/models/repo_presenter.rb","contents_url":"https://api.github.com/repos/1powechri2/Grit-Hub/contents/app/models/repo_presenter.rb?ref=ac6eb56610c082716c72e21b481693fcc98cf9a4","patch":"@@
        -1,9 +1,19 @@\n-class RepoPresenter < ApplicationRecord\n+class RepoPresenter\n   def
        self.repositories(token)\n     response = GithubService.get_api.get(\"/user/repos?access_token=#{token}\")\n     repos
        = JSON.parse(response.body, symbolize_names: true)\n     repos = repos.map
        do |repo_data|\n       Repository.new(repo_data)\n     end\n   end\n+\n+  def
        self.most_recent_repositories(token)\n+    recent = self.repositories(token)\n+\n+    thing
        = recent.map do |repo|\n+      if Date.parse(repo.updated_at) > Date.today
        - 5\n+        repo\n+      end\n+    end.compact\n+  end\n end"},{"sha":"6b0582fef3ab6f15ee1ff4b065d7c7888d2c4e94","filename":"app/services/github_service.rb","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/1powechri2/Grit-Hub/blob/ac6eb56610c082716c72e21b481693fcc98cf9a4/app/services/github_service.rb","raw_url":"https://github.com/1powechri2/Grit-Hub/raw/ac6eb56610c082716c72e21b481693fcc98cf9a4/app/services/github_service.rb","contents_url":"https://api.github.com/repos/1powechri2/Grit-Hub/contents/app/services/github_service.rb?ref=ac6eb56610c082716c72e21b481693fcc98cf9a4","patch":"@@
        -1,6 +1,6 @@\n class GithubService\n   def self.get_api\n-    @connection
        = Faraday.new(url: \"https://api.github.com\") do |faraday|\n+    Faraday.new(url:
        \"https://api.github.com\") do |faraday|\n       faraday.adapter Faraday.default_adapter\n     end\n   end"},{"sha":"04fd449082398a3a2df75906d1753ab8bd61401c","filename":"app/views/activities/index.html.erb","status":"added","additions":7,"deletions":0,"changes":7,"blob_url":"https://github.com/1powechri2/Grit-Hub/blob/ac6eb56610c082716c72e21b481693fcc98cf9a4/app/views/activities/index.html.erb","raw_url":"https://github.com/1powechri2/Grit-Hub/raw/ac6eb56610c082716c72e21b481693fcc98cf9a4/app/views/activities/index.html.erb","contents_url":"https://api.github.com/repos/1powechri2/Grit-Hub/contents/app/views/activities/index.html.erb?ref=ac6eb56610c082716c72e21b481693fcc98cf9a4","patch":"@@
        -0,0 +1,7 @@\n+<ul>\n+<% @recent_activities.each do |activity| %>\n+<%= activity.author
        %>\n+<%= activity.message %>\n+<%= link_to ''See Commit'', activity.url %>\n+<%
        end %>\n+</ul>"},{"sha":"ebb9b329736aeef4d0d5918790ccac9f37c6e088","filename":"app/views/repositories/index.html.erb","status":"modified","additions":1,"deletions":3,"changes":4,"blob_url":"https://github.com/1powechri2/Grit-Hub/blob/ac6eb56610c082716c72e21b481693fcc98cf9a4/app/views/repositories/index.html.erb","raw_url":"https://github.com/1powechri2/Grit-Hub/raw/ac6eb56610c082716c72e21b481693fcc98cf9a4/app/views/repositories/index.html.erb","contents_url":"https://api.github.com/repos/1powechri2/Grit-Hub/contents/app/views/repositories/index.html.erb?ref=ac6eb56610c082716c72e21b481693fcc98cf9a4","patch":"@@
        -1,9 +1,7 @@\n <% @repos.each do |repo| %>\n <ul>\n-  <li><%= repo.name %></li>\n+  <li><%=
        link_to repo.name, repo.url %></li>\n   <li><%= repo.description %></li>\n   <li><%=
        repo.url %></li>\n-  <li><%= repo.created_at %></li>\n-  <li><%= repo.updated_at
        %></li>\n </ul>\n <% end %>"},{"sha":"5efa47f37a4e798bb94cf364301c608a00ef3962","filename":"app/views/users/show.html.erb","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/1powechri2/Grit-Hub/blob/ac6eb56610c082716c72e21b481693fcc98cf9a4/app/views/users/show.html.erb","raw_url":"https://github.com/1powechri2/Grit-Hub/raw/ac6eb56610c082716c72e21b481693fcc98cf9a4/app/views/users/show.html.erb","contents_url":"https://api.github.com/repos/1powechri2/Grit-Hub/contents/app/views/users/show.html.erb?ref=ac6eb56610c082716c72e21b481693fcc98cf9a4","patch":"@@
        -1,3 +1,4 @@\n <p>Git Hub Username: <%= current_user.name %></p>\n <%= image_tag
        current_user.pic %>\n <%= link_to \"Repositories\", repositories_path %>\n+<%=
        link_to \"Recent Activity\", recent_activity_path%>"},{"sha":"86944cd19169b0ba8c440cb719fb0dbd4460fe80","filename":"config/routes.rb","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/1powechri2/Grit-Hub/blob/ac6eb56610c082716c72e21b481693fcc98cf9a4/config/routes.rb","raw_url":"https://github.com/1powechri2/Grit-Hub/raw/ac6eb56610c082716c72e21b481693fcc98cf9a4/config/routes.rb","contents_url":"https://api.github.com/repos/1powechri2/Grit-Hub/contents/config/routes.rb?ref=ac6eb56610c082716c72e21b481693fcc98cf9a4","patch":"@@
        -3,4 +3,5 @@\n   get ''auth/:provider/callback'', to: ''session#create''\n   get
        ''/dashboard'', to: ''users#show''\n   get ''/repositories'', to: ''repositories#index''\n+  get
        ''/recent_activity'', to: ''activities#index''\n end"}]}'
    http_version: 
  recorded_at: Fri, 24 Aug 2018 14:27:31 GMT
- request:
    method: get
    uri: https://api.github.com/repos/1powechri2/Grit-Hub/commits/0b7f6133eb0bf5d221ed9df3ccdbee12227bddf1
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Faraday v0.15.2
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - GitHub.com
      Date:
      - Fri, 24 Aug 2018 14:27:18 GMT
      Content-Type:
      - application/json; charset=utf-8
      Transfer-Encoding:
      - chunked
      Status:
      - 200 OK
      X-Ratelimit-Limit:
      - '60'
      X-Ratelimit-Remaining:
      - '54'
      X-Ratelimit-Reset:
      - '1535122878'
      Cache-Control:
      - public, max-age=60, s-maxage=60
      Vary:
      - Accept
      Etag:
      - W/"0feb1e6fa767c37008cba4ad2c6c1335"
      Last-Modified:
      - Tue, 21 Aug 2018 19:31:31 GMT
      X-Github-Media-Type:
      - github.v3; format=json
      Access-Control-Expose-Headers:
      - ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining,
        X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
      Access-Control-Allow-Origin:
      - "*"
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      X-Frame-Options:
      - deny
      X-Content-Type-Options:
      - nosniff
      X-Xss-Protection:
      - 1; mode=block
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Content-Security-Policy:
      - default-src 'none'
      X-Runtime-Rack:
      - '0.120782'
      X-Github-Request-Id:
      - '0871:55A2:747158:1175F7E:5B8015C6'
    body:
      encoding: ASCII-8BIT
      string: '{"sha":"0b7f6133eb0bf5d221ed9df3ccdbee12227bddf1","node_id":"MDY6Q29tbWl0MTQ1NDg2ODEwOjBiN2Y2MTMzZWIwYmY1ZDIyMWVkOWRmM2NjZGJlZTEyMjI3YmRkZjE=","commit":{"author":{"name":"Chris
        Powell","email":"chris.ian.powell@gmail.com","date":"2018-08-21T19:31:31Z"},"committer":{"name":"Chris
        Powell","email":"chris.ian.powell@gmail.com","date":"2018-08-21T19:31:31Z"},"message":"adds
        refactor for RepositoriesController index method","tree":{"sha":"fc2451bd5949d46d109f19693031ebe54c2d4bed","url":"https://api.github.com/repos/1powechri2/Grit-Hub/git/trees/fc2451bd5949d46d109f19693031ebe54c2d4bed"},"url":"https://api.github.com/repos/1powechri2/Grit-Hub/git/commits/0b7f6133eb0bf5d221ed9df3ccdbee12227bddf1","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/1powechri2/Grit-Hub/commits/0b7f6133eb0bf5d221ed9df3ccdbee12227bddf1","html_url":"https://github.com/1powechri2/Grit-Hub/commit/0b7f6133eb0bf5d221ed9df3ccdbee12227bddf1","comments_url":"https://api.github.com/repos/1powechri2/Grit-Hub/commits/0b7f6133eb0bf5d221ed9df3ccdbee12227bddf1/comments","author":{"login":"1powechri2","id":34900620,"node_id":"MDQ6VXNlcjM0OTAwNjIw","avatar_url":"https://avatars1.githubusercontent.com/u/34900620?v=4","gravatar_id":"","url":"https://api.github.com/users/1powechri2","html_url":"https://github.com/1powechri2","followers_url":"https://api.github.com/users/1powechri2/followers","following_url":"https://api.github.com/users/1powechri2/following{/other_user}","gists_url":"https://api.github.com/users/1powechri2/gists{/gist_id}","starred_url":"https://api.github.com/users/1powechri2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1powechri2/subscriptions","organizations_url":"https://api.github.com/users/1powechri2/orgs","repos_url":"https://api.github.com/users/1powechri2/repos","events_url":"https://api.github.com/users/1powechri2/events{/privacy}","received_events_url":"https://api.github.com/users/1powechri2/received_events","type":"User","site_admin":false},"committer":{"login":"1powechri2","id":34900620,"node_id":"MDQ6VXNlcjM0OTAwNjIw","avatar_url":"https://avatars1.githubusercontent.com/u/34900620?v=4","gravatar_id":"","url":"https://api.github.com/users/1powechri2","html_url":"https://github.com/1powechri2","followers_url":"https://api.github.com/users/1powechri2/followers","following_url":"https://api.github.com/users/1powechri2/following{/other_user}","gists_url":"https://api.github.com/users/1powechri2/gists{/gist_id}","starred_url":"https://api.github.com/users/1powechri2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1powechri2/subscriptions","organizations_url":"https://api.github.com/users/1powechri2/orgs","repos_url":"https://api.github.com/users/1powechri2/repos","events_url":"https://api.github.com/users/1powechri2/events{/privacy}","received_events_url":"https://api.github.com/users/1powechri2/received_events","type":"User","site_admin":false},"parents":[{"sha":"ec3e6837ae61b878b9d786fa7217cd522ee9e10e","url":"https://api.github.com/repos/1powechri2/Grit-Hub/commits/ec3e6837ae61b878b9d786fa7217cd522ee9e10e","html_url":"https://github.com/1powechri2/Grit-Hub/commit/ec3e6837ae61b878b9d786fa7217cd522ee9e10e"}],"stats":{"total":28,"additions":17,"deletions":11},"files":[{"sha":"ec8a788aabdbbac93bda0419dc13489494fd9a21","filename":"app/controllers/repositories_controller.rb","status":"modified","additions":1,"deletions":11,"changes":12,"blob_url":"https://github.com/1powechri2/Grit-Hub/blob/0b7f6133eb0bf5d221ed9df3ccdbee12227bddf1/app/controllers/repositories_controller.rb","raw_url":"https://github.com/1powechri2/Grit-Hub/raw/0b7f6133eb0bf5d221ed9df3ccdbee12227bddf1/app/controllers/repositories_controller.rb","contents_url":"https://api.github.com/repos/1powechri2/Grit-Hub/contents/app/controllers/repositories_controller.rb?ref=0b7f6133eb0bf5d221ed9df3ccdbee12227bddf1","patch":"@@
        -1,15 +1,5 @@\n class RepositoriesController < ApplicationController\n   def
        index\n-    @connection = Faraday.new(url: \"https://api.github.com\") do
        |faraday|\n-        faraday.adapter Faraday.default_adapter\n-      end\n-\n-    response
        = @connection.get(\"/user/repos?access_token=#{current_user.token}\")\n-\n-    @repos
        = JSON.parse(response.body, symbolize_names: true)\n-\n-    @repos = @repos.map
        do |repo_data|\n-      Repository.new(repo_data)\n-    end\n+    @repos =
        RepoPresenter.repositories(current_user.token)\n   end\n end"},{"sha":"3058174912dfb678a76e9eb83a2d517b3d2c83f5","filename":"app/models/repo_presenter.rb","status":"added","additions":9,"deletions":0,"changes":9,"blob_url":"https://github.com/1powechri2/Grit-Hub/blob/0b7f6133eb0bf5d221ed9df3ccdbee12227bddf1/app/models/repo_presenter.rb","raw_url":"https://github.com/1powechri2/Grit-Hub/raw/0b7f6133eb0bf5d221ed9df3ccdbee12227bddf1/app/models/repo_presenter.rb","contents_url":"https://api.github.com/repos/1powechri2/Grit-Hub/contents/app/models/repo_presenter.rb?ref=0b7f6133eb0bf5d221ed9df3ccdbee12227bddf1","patch":"@@
        -0,0 +1,9 @@\n+class RepoPresenter < ApplicationRecord\n+  def self.repositories(token)\n+    response
        = GithubService.get_api.get(\"/user/repos?access_token=#{token}\")\n+    repos
        = JSON.parse(response.body, symbolize_names: true)\n+    repos = repos.map
        do |repo_data|\n+      Repository.new(repo_data)\n+    end\n+  end\n+end"},{"sha":"cef1127fb71ce664216f1c760f6a5c2c189c92b3","filename":"app/services/github_service.rb","status":"added","additions":7,"deletions":0,"changes":7,"blob_url":"https://github.com/1powechri2/Grit-Hub/blob/0b7f6133eb0bf5d221ed9df3ccdbee12227bddf1/app/services/github_service.rb","raw_url":"https://github.com/1powechri2/Grit-Hub/raw/0b7f6133eb0bf5d221ed9df3ccdbee12227bddf1/app/services/github_service.rb","contents_url":"https://api.github.com/repos/1powechri2/Grit-Hub/contents/app/services/github_service.rb?ref=0b7f6133eb0bf5d221ed9df3ccdbee12227bddf1","patch":"@@
        -0,0 +1,7 @@\n+class GithubService\n+  def self.get_api\n+    @connection
        = Faraday.new(url: \"https://api.github.com\") do |faraday|\n+      faraday.adapter
        Faraday.default_adapter\n+    end\n+  end\n+end"}]}'
    http_version: 
  recorded_at: Fri, 24 Aug 2018 14:27:31 GMT
- request:
    method: get
    uri: https://api.github.com/repos/1powechri2/Grit-Hub/commits/ec3e6837ae61b878b9d786fa7217cd522ee9e10e
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Faraday v0.15.2
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - GitHub.com
      Date:
      - Fri, 24 Aug 2018 14:27:19 GMT
      Content-Type:
      - application/json; charset=utf-8
      Transfer-Encoding:
      - chunked
      Status:
      - 200 OK
      X-Ratelimit-Limit:
      - '60'
      X-Ratelimit-Remaining:
      - '53'
      X-Ratelimit-Reset:
      - '1535122878'
      Cache-Control:
      - public, max-age=60, s-maxage=60
      Vary:
      - Accept
      Etag:
      - W/"34ab0b41fa54d5b3c52e24cb98fe143f"
      Last-Modified:
      - Tue, 21 Aug 2018 18:46:09 GMT
      X-Github-Media-Type:
      - github.v3; format=json
      Access-Control-Expose-Headers:
      - ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining,
        X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
      Access-Control-Allow-Origin:
      - "*"
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      X-Frame-Options:
      - deny
      X-Content-Type-Options:
      - nosniff
      X-Xss-Protection:
      - 1; mode=block
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Content-Security-Policy:
      - default-src 'none'
      X-Runtime-Rack:
      - '0.111198'
      X-Github-Request-Id:
      - C153:55A3:F1C643:1EAC810:5B8015C7
    body:
      encoding: ASCII-8BIT
      string: '{"sha":"ec3e6837ae61b878b9d786fa7217cd522ee9e10e","node_id":"MDY6Q29tbWl0MTQ1NDg2ODEwOmVjM2U2ODM3YWU2MWI4NzhiOWQ3ODZmYTcyMTdjZDUyMmVlOWUxMGU=","commit":{"author":{"name":"Chris
        Powell","email":"chris.ian.powell@gmail.com","date":"2018-08-21T18:46:09Z"},"committer":{"name":"Chris
        Powell","email":"chris.ian.powell@gmail.com","date":"2018-08-21T18:46:09Z"},"message":"adds
        repos functionality","tree":{"sha":"59b73a77111dc1cac4b04aa6c4d3493e3f8177f7","url":"https://api.github.com/repos/1powechri2/Grit-Hub/git/trees/59b73a77111dc1cac4b04aa6c4d3493e3f8177f7"},"url":"https://api.github.com/repos/1powechri2/Grit-Hub/git/commits/ec3e6837ae61b878b9d786fa7217cd522ee9e10e","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/1powechri2/Grit-Hub/commits/ec3e6837ae61b878b9d786fa7217cd522ee9e10e","html_url":"https://github.com/1powechri2/Grit-Hub/commit/ec3e6837ae61b878b9d786fa7217cd522ee9e10e","comments_url":"https://api.github.com/repos/1powechri2/Grit-Hub/commits/ec3e6837ae61b878b9d786fa7217cd522ee9e10e/comments","author":{"login":"1powechri2","id":34900620,"node_id":"MDQ6VXNlcjM0OTAwNjIw","avatar_url":"https://avatars1.githubusercontent.com/u/34900620?v=4","gravatar_id":"","url":"https://api.github.com/users/1powechri2","html_url":"https://github.com/1powechri2","followers_url":"https://api.github.com/users/1powechri2/followers","following_url":"https://api.github.com/users/1powechri2/following{/other_user}","gists_url":"https://api.github.com/users/1powechri2/gists{/gist_id}","starred_url":"https://api.github.com/users/1powechri2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1powechri2/subscriptions","organizations_url":"https://api.github.com/users/1powechri2/orgs","repos_url":"https://api.github.com/users/1powechri2/repos","events_url":"https://api.github.com/users/1powechri2/events{/privacy}","received_events_url":"https://api.github.com/users/1powechri2/received_events","type":"User","site_admin":false},"committer":{"login":"1powechri2","id":34900620,"node_id":"MDQ6VXNlcjM0OTAwNjIw","avatar_url":"https://avatars1.githubusercontent.com/u/34900620?v=4","gravatar_id":"","url":"https://api.github.com/users/1powechri2","html_url":"https://github.com/1powechri2","followers_url":"https://api.github.com/users/1powechri2/followers","following_url":"https://api.github.com/users/1powechri2/following{/other_user}","gists_url":"https://api.github.com/users/1powechri2/gists{/gist_id}","starred_url":"https://api.github.com/users/1powechri2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1powechri2/subscriptions","organizations_url":"https://api.github.com/users/1powechri2/orgs","repos_url":"https://api.github.com/users/1powechri2/repos","events_url":"https://api.github.com/users/1powechri2/events{/privacy}","received_events_url":"https://api.github.com/users/1powechri2/received_events","type":"User","site_admin":false},"parents":[{"sha":"6d677463c0bcc812e9b23d68c76914cb816bcfe4","url":"https://api.github.com/repos/1powechri2/Grit-Hub/commits/6d677463c0bcc812e9b23d68c76914cb816bcfe4","html_url":"https://github.com/1powechri2/Grit-Hub/commit/6d677463c0bcc812e9b23d68c76914cb816bcfe4"}],"stats":{"total":50,"additions":47,"deletions":3},"files":[{"sha":"3e5e5a9cacefce41f2ba5fbfd1e6eb1e5da668cb","filename":"app/controllers/repositories_controller.rb","status":"added","additions":15,"deletions":0,"changes":15,"blob_url":"https://github.com/1powechri2/Grit-Hub/blob/ec3e6837ae61b878b9d786fa7217cd522ee9e10e/app/controllers/repositories_controller.rb","raw_url":"https://github.com/1powechri2/Grit-Hub/raw/ec3e6837ae61b878b9d786fa7217cd522ee9e10e/app/controllers/repositories_controller.rb","contents_url":"https://api.github.com/repos/1powechri2/Grit-Hub/contents/app/controllers/repositories_controller.rb?ref=ec3e6837ae61b878b9d786fa7217cd522ee9e10e","patch":"@@
        -0,0 +1,15 @@\n+class RepositoriesController < ApplicationController\n+  def
        index\n+    @connection = Faraday.new(url: \"https://api.github.com\") do
        |faraday|\n+        faraday.adapter Faraday.default_adapter\n+      end\n+\n+    response
        = @connection.get(\"/user/repos?access_token=#{current_user.token}\")\n+\n+    @repos
        = JSON.parse(response.body, symbolize_names: true)\n+\n+    @repos = @repos.map
        do |repo_data|\n+      Repository.new(repo_data)\n+    end\n+  end\n+end"},{"sha":"926b8735cc3aa9bc23d787a6b1cc1e27fcab7986","filename":"app/models/repository.rb","status":"added","additions":19,"deletions":0,"changes":19,"blob_url":"https://github.com/1powechri2/Grit-Hub/blob/ec3e6837ae61b878b9d786fa7217cd522ee9e10e/app/models/repository.rb","raw_url":"https://github.com/1powechri2/Grit-Hub/raw/ec3e6837ae61b878b9d786fa7217cd522ee9e10e/app/models/repository.rb","contents_url":"https://api.github.com/repos/1powechri2/Grit-Hub/contents/app/models/repository.rb?ref=ec3e6837ae61b878b9d786fa7217cd522ee9e10e","patch":"@@
        -0,0 +1,19 @@\n+class Repository\n+  attr_reader :name, :description, :url,
        :created_at, :updated_at\n+\n+  def initialize(data)\n+    @name        =
        data[:name]\n+    @description = descritption_helper(data)\n+    @url         =
        data[:html_url]\n+    @created_at  = data[:created_at]\n+    @updated_at  =
        data[:updated_at]\n+  end\n+\n+  def descritption_helper(data)\n+    if data[:description]\n+      data[:description]\n+    else\n+      ''No
        Description''\n+    end\n+  end\n+end"},{"sha":"2b75946c940c31d77c2ab708beb03b6abc91abd8","filename":"app/views/repositories/index.html.erb","status":"added","additions":9,"deletions":0,"changes":9,"blob_url":"https://github.com/1powechri2/Grit-Hub/blob/ec3e6837ae61b878b9d786fa7217cd522ee9e10e/app/views/repositories/index.html.erb","raw_url":"https://github.com/1powechri2/Grit-Hub/raw/ec3e6837ae61b878b9d786fa7217cd522ee9e10e/app/views/repositories/index.html.erb","contents_url":"https://api.github.com/repos/1powechri2/Grit-Hub/contents/app/views/repositories/index.html.erb?ref=ec3e6837ae61b878b9d786fa7217cd522ee9e10e","patch":"@@
        -0,0 +1,9 @@\n+<% @repos.each do |repo| %>\n+<ul>\n+  <li><%= repo.name %></li>\n+  <li><%=
        repo.description %></li>\n+  <li><%= repo.url %></li>\n+  <li><%= repo.created_at
        %></li>\n+  <li><%= repo.updated_at %></li>\n+</ul>\n+<% end %>"},{"sha":"0618a12f8c0517a65893419212b1b0172ebb83fe","filename":"app/views/users/show.html.erb","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/1powechri2/Grit-Hub/blob/ec3e6837ae61b878b9d786fa7217cd522ee9e10e/app/views/users/show.html.erb","raw_url":"https://github.com/1powechri2/Grit-Hub/raw/ec3e6837ae61b878b9d786fa7217cd522ee9e10e/app/views/users/show.html.erb","contents_url":"https://api.github.com/repos/1powechri2/Grit-Hub/contents/app/views/users/show.html.erb?ref=ec3e6837ae61b878b9d786fa7217cd522ee9e10e","patch":"@@
        -1,2 +1,3 @@\n <p>Git Hub Username: <%= current_user.name %></p>\n <%= image_tag
        current_user.pic %>\n+<%= link_to \"Repositories\", repositories_path %>"},{"sha":"c9ddf4f749dee9bdd3a539deba618f408ccddb76","filename":"app/views/welcome/index.html.erb","status":"modified","additions":1,"deletions":2,"changes":3,"blob_url":"https://github.com/1powechri2/Grit-Hub/blob/ec3e6837ae61b878b9d786fa7217cd522ee9e10e/app/views/welcome/index.html.erb","raw_url":"https://github.com/1powechri2/Grit-Hub/raw/ec3e6837ae61b878b9d786fa7217cd522ee9e10e/app/views/welcome/index.html.erb","contents_url":"https://api.github.com/repos/1powechri2/Grit-Hub/contents/app/views/welcome/index.html.erb?ref=ec3e6837ae61b878b9d786fa7217cd522ee9e10e","patch":"@@
        -1,4 +1,3 @@\n <h1>Halo from GritHub</h1>\n \n-<%= link_to \"Login\",\n-\"https://github.com/login/oauth/authorize?client_id=#{ENV[\"GITHUB_KEY\"]}&scope=repo\"
        %>\n+<%= link_to \"Login\", \"auth/github\" %>"},{"sha":"7dd44e791299c3ef2d87c4080592668cb855e4cd","filename":"config/routes.rb","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/1powechri2/Grit-Hub/blob/ec3e6837ae61b878b9d786fa7217cd522ee9e10e/config/routes.rb","raw_url":"https://github.com/1powechri2/Grit-Hub/raw/ec3e6837ae61b878b9d786fa7217cd522ee9e10e/config/routes.rb","contents_url":"https://api.github.com/repos/1powechri2/Grit-Hub/contents/config/routes.rb?ref=ec3e6837ae61b878b9d786fa7217cd522ee9e10e","patch":"@@
        -1,5 +1,6 @@\n Rails.application.routes.draw do\n   root ''welcome#index''\n-  get
        ''auth/github/callback'', to: ''session#create''\n+  get ''auth/:provider/callback'',
        to: ''session#create''\n   get ''/dashboard'', to: ''users#show''\n+  get
        ''/repositories'', to: ''repositories#index''\n end"}]}'
    http_version: 
  recorded_at: Fri, 24 Aug 2018 14:27:32 GMT
- request:
    method: get
    uri: https://api.github.com/repos/1powechri2/Rails-Engine/commits/aac560497672b6463c1439fd17fa402681d086cd
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Faraday v0.15.2
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - GitHub.com
      Date:
      - Fri, 24 Aug 2018 14:27:19 GMT
      Content-Type:
      - application/json; charset=utf-8
      Transfer-Encoding:
      - chunked
      Status:
      - 200 OK
      X-Ratelimit-Limit:
      - '60'
      X-Ratelimit-Remaining:
      - '52'
      X-Ratelimit-Reset:
      - '1535122878'
      Cache-Control:
      - public, max-age=60, s-maxage=60
      Vary:
      - Accept
      Etag:
      - W/"8842420e2f221ca840caa90d3d926820"
      Last-Modified:
      - Fri, 17 Aug 2018 14:47:01 GMT
      X-Github-Media-Type:
      - github.v3; format=json
      Access-Control-Expose-Headers:
      - ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining,
        X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
      Access-Control-Allow-Origin:
      - "*"
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      X-Frame-Options:
      - deny
      X-Content-Type-Options:
      - nosniff
      X-Xss-Protection:
      - 1; mode=block
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Content-Security-Policy:
      - default-src 'none'
      X-Runtime-Rack:
      - '0.101917'
      X-Github-Request-Id:
      - 5CB0:55A0:B0F473:18CF19F:5B8015C7
    body:
      encoding: ASCII-8BIT
      string: '{"sha":"aac560497672b6463c1439fd17fa402681d086cd","node_id":"MDY6Q29tbWl0MTQ0NjI3MjQxOmFhYzU2MDQ5NzY3MmI2NDYzYzE0MzlmZDE3ZmE0MDI2ODFkMDg2Y2Q=","commit":{"author":{"name":"Chris
        Powell","email":"chris.ian.powell@gmail.com","date":"2018-08-17T14:47:01Z"},"committer":{"name":"Chris
        Powell","email":"chris.ian.powell@gmail.com","date":"2018-08-17T14:47:01Z"},"message":"adds
        random api functionality","tree":{"sha":"6c028831b441f0ee885cfb28b37af9d7de633833","url":"https://api.github.com/repos/1powechri2/Rails-Engine/git/trees/6c028831b441f0ee885cfb28b37af9d7de633833"},"url":"https://api.github.com/repos/1powechri2/Rails-Engine/git/commits/aac560497672b6463c1439fd17fa402681d086cd","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/aac560497672b6463c1439fd17fa402681d086cd","html_url":"https://github.com/1powechri2/Rails-Engine/commit/aac560497672b6463c1439fd17fa402681d086cd","comments_url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/aac560497672b6463c1439fd17fa402681d086cd/comments","author":{"login":"1powechri2","id":34900620,"node_id":"MDQ6VXNlcjM0OTAwNjIw","avatar_url":"https://avatars1.githubusercontent.com/u/34900620?v=4","gravatar_id":"","url":"https://api.github.com/users/1powechri2","html_url":"https://github.com/1powechri2","followers_url":"https://api.github.com/users/1powechri2/followers","following_url":"https://api.github.com/users/1powechri2/following{/other_user}","gists_url":"https://api.github.com/users/1powechri2/gists{/gist_id}","starred_url":"https://api.github.com/users/1powechri2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1powechri2/subscriptions","organizations_url":"https://api.github.com/users/1powechri2/orgs","repos_url":"https://api.github.com/users/1powechri2/repos","events_url":"https://api.github.com/users/1powechri2/events{/privacy}","received_events_url":"https://api.github.com/users/1powechri2/received_events","type":"User","site_admin":false},"committer":{"login":"1powechri2","id":34900620,"node_id":"MDQ6VXNlcjM0OTAwNjIw","avatar_url":"https://avatars1.githubusercontent.com/u/34900620?v=4","gravatar_id":"","url":"https://api.github.com/users/1powechri2","html_url":"https://github.com/1powechri2","followers_url":"https://api.github.com/users/1powechri2/followers","following_url":"https://api.github.com/users/1powechri2/following{/other_user}","gists_url":"https://api.github.com/users/1powechri2/gists{/gist_id}","starred_url":"https://api.github.com/users/1powechri2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1powechri2/subscriptions","organizations_url":"https://api.github.com/users/1powechri2/orgs","repos_url":"https://api.github.com/users/1powechri2/repos","events_url":"https://api.github.com/users/1powechri2/events{/privacy}","received_events_url":"https://api.github.com/users/1powechri2/received_events","type":"User","site_admin":false},"parents":[{"sha":"b1c21d4b6e31a93d39789289600639df2208713d","url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/b1c21d4b6e31a93d39789289600639df2208713d","html_url":"https://github.com/1powechri2/Rails-Engine/commit/b1c21d4b6e31a93d39789289600639df2208713d"}],"stats":{"total":100,"additions":97,"deletions":3},"files":[{"sha":"092f5e08a606666358cc38c9c5a0962fe1f1b844","filename":"app/controllers/api/v1/customers/random_controller.rb","status":"added","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/aac560497672b6463c1439fd17fa402681d086cd/app/controllers/api/v1/customers/random_controller.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/aac560497672b6463c1439fd17fa402681d086cd/app/controllers/api/v1/customers/random_controller.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/controllers/api/v1/customers/random_controller.rb?ref=aac560497672b6463c1439fd17fa402681d086cd","patch":"@@
        -0,0 +1,5 @@\n+class Api::V1::Customers::RandomController < ApplicationController\n+  def
        show\n+    render json: Customer.all.sample\n+  end\n+end"},{"sha":"9880714991fc6edf7ab1ac80a70865f962e17f02","filename":"app/controllers/api/v1/invoice_items/random_controller.rb","status":"added","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/aac560497672b6463c1439fd17fa402681d086cd/app/controllers/api/v1/invoice_items/random_controller.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/aac560497672b6463c1439fd17fa402681d086cd/app/controllers/api/v1/invoice_items/random_controller.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/controllers/api/v1/invoice_items/random_controller.rb?ref=aac560497672b6463c1439fd17fa402681d086cd","patch":"@@
        -0,0 +1,5 @@\n+class Api::V1::InvoiceItems::RandomController < ApplicationController\n+  def
        show\n+    render json: InvoiceItem.all.sample\n+  end\n+end"},{"sha":"dc9d8d6f972ae3c9e3915fd40dd594c39450f8e7","filename":"app/controllers/api/v1/invoices/random_controller.rb","status":"added","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/aac560497672b6463c1439fd17fa402681d086cd/app/controllers/api/v1/invoices/random_controller.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/aac560497672b6463c1439fd17fa402681d086cd/app/controllers/api/v1/invoices/random_controller.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/controllers/api/v1/invoices/random_controller.rb?ref=aac560497672b6463c1439fd17fa402681d086cd","patch":"@@
        -0,0 +1,5 @@\n+class Api::V1::Invoices::RandomController < ApplicationController\n+  def
        show\n+    render json: Invoice.all.sample\n+  end\n+end"},{"sha":"86c9c85555ff05d36f453e545b3e1e5d92dd3020","filename":"app/controllers/api/v1/items/random_controller.rb","status":"added","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/aac560497672b6463c1439fd17fa402681d086cd/app/controllers/api/v1/items/random_controller.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/aac560497672b6463c1439fd17fa402681d086cd/app/controllers/api/v1/items/random_controller.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/controllers/api/v1/items/random_controller.rb?ref=aac560497672b6463c1439fd17fa402681d086cd","patch":"@@
        -0,0 +1,5 @@\n+class Api::V1::Items::RandomController < ApplicationController\n+  def
        show\n+    render json: Item.all.sample\n+  end\n+end"},{"sha":"80c8912ebad78239270b95aafc0772b8665d08df","filename":"app/controllers/api/v1/transactions/random_controller.rb","status":"added","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/aac560497672b6463c1439fd17fa402681d086cd/app/controllers/api/v1/transactions/random_controller.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/aac560497672b6463c1439fd17fa402681d086cd/app/controllers/api/v1/transactions/random_controller.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/controllers/api/v1/transactions/random_controller.rb?ref=aac560497672b6463c1439fd17fa402681d086cd","patch":"@@
        -0,0 +1,5 @@\n+class Api::V1::Transactions::RandomController < ApplicationController\n+  def
        show\n+    render json: Transaction.all.sample\n+  end\n+end"},{"sha":"517721b4218e1b59f8531cec628c562f59a6145d","filename":"config/routes.rb","status":"modified","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/aac560497672b6463c1439fd17fa402681d086cd/config/routes.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/aac560497672b6463c1439fd17fa402681d086cd/config/routes.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/config/routes.rb?ref=aac560497672b6463c1439fd17fa402681d086cd","patch":"@@
        -15,6 +15,7 @@\n       get ''/transactions/find'', to: ''transactions/search#show''\n       get
        ''/transactions/find_all'', to: ''transactions/search#index''\n       get
        ''/transactions/:id/invoice'', to: ''transactions/invoice_relation#show''\n+      get
        ''/transactions/random'', to: ''transactions/random#show''\n       resources
        :transactions, only: [:index, :show]\n       get ''/invoices/find'', to: ''invoices/search#show''\n       get
        ''/invoices/find_all'', to: ''invoices/search#index''\n@@ -23,6 +24,7 @@\n       get
        ''/invoices/:id/transactions'', to: ''invoices/transactions_relation#index''\n       get
        ''/invoices/:id/invoice_items'', to: ''invoices/invoice_items_relation#index''\n       get
        ''/invoices/:id/items'', to: ''invoices/items_relation#index''\n+      get
        ''/invoices/random'', to: ''invoices/random#show''\n       resources :invoices,
        only: [:index, :show]\n       get ''/items/find'', to: ''items/search#show''\n       get
        ''/items/find_all'', to: ''items/search#index''\n@@ -31,17 +33,20 @@\n       get
        ''/items/most_revenue'', to: ''items/most_revenue#index''\n       get ''/items/most_items'',
        to: ''items/most_items#index''\n       get ''/items/:id/best_day'', to: ''items/best_day#show''\n+      get
        ''/items/random'', to: ''items/random#show''\n       resources :items, only:
        [:index, :show]\n       get ''/customers/find'', to: ''customers/search#show''\n       get
        ''/customers/find_all'', to: ''customers/search#index''\n       get ''/customers/:id/invoices'',
        to: ''customers/invoices_relation#index''\n       get ''/customers/:id/transactions'',
        to: ''customers/transactions_relation#index''\n       get ''/customers/:id/favorite_merchant'',
        to: ''customers/favorite_merchant#show''\n+      get ''/customers/random'',
        to: ''customers/random#show''\n       resources :customers, only: [:index,
        :show]\n       get ''/invoice_items/find'', to: ''invoice_items/search#show''\n       get
        ''/invoice_items/find_all'', to: ''invoice_items/search#index''\n       get
        ''/invoice_items/:id/invoice'', to: ''invoice_items/invoice_relation#show''\n       get
        ''/invoice_items/:id/item'', to: ''invoice_items/item_relation#show''\n+      get
        ''/invoice_items/random'', to: ''invoice_items/random#show''\n       resources
        :invoice_items, only: [:index, :show]\n     end\n   end"},{"sha":"54f937906d22ee17d2370bf303bbfa51c9fa9caa","filename":"spec/requests/api/v1/customers_request_spec.rb","status":"modified","additions":14,"deletions":2,"changes":16,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/aac560497672b6463c1439fd17fa402681d086cd/spec/requests/api/v1/customers_request_spec.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/aac560497672b6463c1439fd17fa402681d086cd/spec/requests/api/v1/customers_request_spec.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/spec/requests/api/v1/customers_request_spec.rb?ref=aac560497672b6463c1439fd17fa402681d086cd","patch":"@@
        -126,6 +126,18 @@\n       expect(response).to be_successful\n       expect(customer[0][\"last_name\"]).to
        eq(last_name)\n     end\n+    it ''finds and returns a random customer'' do\n+      customer1
        = create(:customer)\n+      customer2 = create(:customer)\n+      customer3
        = create(:customer)\n+\n+      get \"/api/v1/customers/random\"\n+\n+      expect(response).to
        be_successful\n+\n+      customer = JSON.parse(response.body)\n+\n+      expect(customer.values.count).to
        eq(3)\n+    end\n   end\n-  \n-end\n\\ No newline at end of file\n+end"},{"sha":"d5adecc0ddafac5d0877b6f26493ffda70313dc3","filename":"spec/requests/api/v1/invoice_items_request_spec.rb","status":"modified","additions":13,"deletions":0,"changes":13,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/aac560497672b6463c1439fd17fa402681d086cd/spec/requests/api/v1/invoice_items_request_spec.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/aac560497672b6463c1439fd17fa402681d086cd/spec/requests/api/v1/invoice_items_request_spec.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/spec/requests/api/v1/invoice_items_request_spec.rb?ref=aac560497672b6463c1439fd17fa402681d086cd","patch":"@@
        -219,5 +219,18 @@\n       expect(inv_items.first[''quantity'']).to eq(inv_item_1.quantity)\n       expect(inv_items.last[''quantity'']).to
        eq(inv_item_2.quantity)\n     end\n+    it ''finds and returns a random Invoice
        Item'' do\n+      invoice_item1 = create(:invoice_item)\n+      invoice_item2
        = create(:invoice_item)\n+      invoice_item3 = create(:invoice_item)\n+\n+      get
        \"/api/v1/invoice_items/random\"\n+\n+      expect(response).to be_successful\n+\n+      invoice_item
        = JSON.parse(response.body)\n+\n+      expect(invoice_item.values.count).to
        eq(5)\n+    end\n   end\n end"},{"sha":"c32631012e45571e3608e504d698389be92c406f","filename":"spec/requests/api/v1/invoices_request_spec.rb","status":"modified","additions":13,"deletions":0,"changes":13,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/aac560497672b6463c1439fd17fa402681d086cd/spec/requests/api/v1/invoices_request_spec.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/aac560497672b6463c1439fd17fa402681d086cd/spec/requests/api/v1/invoices_request_spec.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/spec/requests/api/v1/invoices_request_spec.rb?ref=aac560497672b6463c1439fd17fa402681d086cd","patch":"@@
        -185,5 +185,18 @@\n       expect(invoice.first[''status'']).to eq(inv_1.status)\n       expect(invoice.last[''status'']).to
        eq(inv_2.status)\n     end\n+    it ''finds and returns a random Invoice''
        do\n+      invoice1 = create(:invoice)\n+      invoice2 = create(:invoice)\n+      invoice3
        = create(:invoice)\n+\n+      get \"/api/v1/invoices/random\"\n+\n+      expect(response).to
        be_successful\n+\n+      invoice = JSON.parse(response.body)\n+\n+      expect(invoice.values.count).to
        eq(4)\n+    end\n   end\n end"},{"sha":"036fbbfa0b2d2460c96c3c416f2ae265cecfae33","filename":"spec/requests/api/v1/items_request_spec.rb","status":"modified","additions":13,"deletions":0,"changes":13,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/aac560497672b6463c1439fd17fa402681d086cd/spec/requests/api/v1/items_request_spec.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/aac560497672b6463c1439fd17fa402681d086cd/spec/requests/api/v1/items_request_spec.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/spec/requests/api/v1/items_request_spec.rb?ref=aac560497672b6463c1439fd17fa402681d086cd","patch":"@@
        -215,5 +215,18 @@\n       expect(item.first[''name'']).to eq(item_1.name)\n       expect(item.last[''name'']).to
        eq(item_2.name)\n     end\n+    it ''finds and returns a random Item'' do\n+      item1
        = create(:item)\n+      item2 = create(:item)\n+      item3 = create(:item)\n+\n+      get
        \"/api/v1/items/random\"\n+\n+      expect(response).to be_successful\n+\n+      item
        = JSON.parse(response.body)\n+\n+      expect(item.values.count).to eq(5)\n+    end\n   end\n
        end"},{"sha":"6250a740223b732548a9f74e90ce5cd6f383bbc5","filename":"spec/requests/api/v1/transactions_request_spec.rb","status":"modified","additions":14,"deletions":1,"changes":15,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/aac560497672b6463c1439fd17fa402681d086cd/spec/requests/api/v1/transactions_request_spec.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/aac560497672b6463c1439fd17fa402681d086cd/spec/requests/api/v1/transactions_request_spec.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/spec/requests/api/v1/transactions_request_spec.rb?ref=aac560497672b6463c1439fd17fa402681d086cd","patch":"@@
        -178,6 +178,19 @@\n       expect(response).to be_successful\n       expect(response_body[0][\"id\"]).to
        eq(transaction.id)\n     end\n-  end\n+    it ''finds and returns a random
        Transaction'' do\n+      invoice      = create(:invoice)\n+      transaction1
        = create(:transaction, invoice_id: invoice.id)\n+      transaction2 = create(:transaction,
        invoice_id: invoice.id)\n+      transaction3 = create(:transaction, invoice_id:
        invoice.id)\n+\n+      get \"/api/v1/transactions/random\"\n+\n+      expect(response).to
        be_successful\n+\n+      transaction = JSON.parse(response.body)\n \n+      expect(transaction.values.count).to
        eq(4)\n+    end\n+  end\n end"}]}'
    http_version: 
  recorded_at: Fri, 24 Aug 2018 14:27:32 GMT
- request:
    method: get
    uri: https://api.github.com/repos/1powechri2/Rails-Engine/commits/318d4ea1ccf80600848374c15fe0890af23a9344
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Faraday v0.15.2
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - GitHub.com
      Date:
      - Fri, 24 Aug 2018 14:27:19 GMT
      Content-Type:
      - application/json; charset=utf-8
      Transfer-Encoding:
      - chunked
      Status:
      - 200 OK
      X-Ratelimit-Limit:
      - '60'
      X-Ratelimit-Remaining:
      - '51'
      X-Ratelimit-Reset:
      - '1535122878'
      Cache-Control:
      - public, max-age=60, s-maxage=60
      Vary:
      - Accept
      Etag:
      - W/"fb35f1398b27d9281d6d5f7bd7d02bfc"
      Last-Modified:
      - Fri, 17 Aug 2018 13:53:18 GMT
      X-Github-Media-Type:
      - github.v3; format=json
      Access-Control-Expose-Headers:
      - ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining,
        X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
      Access-Control-Allow-Origin:
      - "*"
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      X-Frame-Options:
      - deny
      X-Content-Type-Options:
      - nosniff
      X-Xss-Protection:
      - 1; mode=block
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Content-Security-Policy:
      - default-src 'none'
      X-Runtime-Rack:
      - '0.113758'
      X-Github-Request-Id:
      - AA65:55A0:B0F48F:18CF1E4:5B8015C7
    body:
      encoding: ASCII-8BIT
      string: '{"sha":"318d4ea1ccf80600848374c15fe0890af23a9344","node_id":"MDY6Q29tbWl0MTQ0NjI3MjQxOjMxOGQ0ZWExY2NmODA2MDA4NDgzNzRjMTVmZTA4OTBhZjIzYTkzNDQ=","commit":{"author":{"name":"Eliot
        Swank","email":"eliotswank@gmail.com","date":"2018-08-17T13:53:18Z"},"committer":{"name":"Eliot
        Swank","email":"eliotswank@gmail.com","date":"2018-08-17T13:53:18Z"},"message":"adds
        merchant random endpoint","tree":{"sha":"4eb59bdc71f04d6b651218444345c1adb71ed454","url":"https://api.github.com/repos/1powechri2/Rails-Engine/git/trees/4eb59bdc71f04d6b651218444345c1adb71ed454"},"url":"https://api.github.com/repos/1powechri2/Rails-Engine/git/commits/318d4ea1ccf80600848374c15fe0890af23a9344","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/318d4ea1ccf80600848374c15fe0890af23a9344","html_url":"https://github.com/1powechri2/Rails-Engine/commit/318d4ea1ccf80600848374c15fe0890af23a9344","comments_url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/318d4ea1ccf80600848374c15fe0890af23a9344/comments","author":{"login":"EMSwank","id":31110190,"node_id":"MDQ6VXNlcjMxMTEwMTkw","avatar_url":"https://avatars1.githubusercontent.com/u/31110190?v=4","gravatar_id":"","url":"https://api.github.com/users/EMSwank","html_url":"https://github.com/EMSwank","followers_url":"https://api.github.com/users/EMSwank/followers","following_url":"https://api.github.com/users/EMSwank/following{/other_user}","gists_url":"https://api.github.com/users/EMSwank/gists{/gist_id}","starred_url":"https://api.github.com/users/EMSwank/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EMSwank/subscriptions","organizations_url":"https://api.github.com/users/EMSwank/orgs","repos_url":"https://api.github.com/users/EMSwank/repos","events_url":"https://api.github.com/users/EMSwank/events{/privacy}","received_events_url":"https://api.github.com/users/EMSwank/received_events","type":"User","site_admin":false},"committer":{"login":"EMSwank","id":31110190,"node_id":"MDQ6VXNlcjMxMTEwMTkw","avatar_url":"https://avatars1.githubusercontent.com/u/31110190?v=4","gravatar_id":"","url":"https://api.github.com/users/EMSwank","html_url":"https://github.com/EMSwank","followers_url":"https://api.github.com/users/EMSwank/followers","following_url":"https://api.github.com/users/EMSwank/following{/other_user}","gists_url":"https://api.github.com/users/EMSwank/gists{/gist_id}","starred_url":"https://api.github.com/users/EMSwank/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EMSwank/subscriptions","organizations_url":"https://api.github.com/users/EMSwank/orgs","repos_url":"https://api.github.com/users/EMSwank/repos","events_url":"https://api.github.com/users/EMSwank/events{/privacy}","received_events_url":"https://api.github.com/users/EMSwank/received_events","type":"User","site_admin":false},"parents":[{"sha":"5de05a9ae067d5b48d648040c6463708acbfdd76","url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/5de05a9ae067d5b48d648040c6463708acbfdd76","html_url":"https://github.com/1powechri2/Rails-Engine/commit/5de05a9ae067d5b48d648040c6463708acbfdd76"}],"stats":{"total":19,"additions":19,"deletions":0},"files":[{"sha":"292bd1f6b3bed6c714ade265eb53dc071a1309f0","filename":"app/controllers/api/v1/merchants/random_controller.rb","status":"added","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/318d4ea1ccf80600848374c15fe0890af23a9344/app/controllers/api/v1/merchants/random_controller.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/318d4ea1ccf80600848374c15fe0890af23a9344/app/controllers/api/v1/merchants/random_controller.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/controllers/api/v1/merchants/random_controller.rb?ref=318d4ea1ccf80600848374c15fe0890af23a9344","patch":"@@
        -0,0 +1,5 @@\n+class Api::V1::Merchants::RandomController < ApplicationController\n+  def
        show\n+    render json: Merchant.all.sample\n+  end\n+end\n\\ No newline at
        end of file"},{"sha":"d9a44c95996653f3c59c59ef8e0947f89507975b","filename":"config/routes.rb","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/318d4ea1ccf80600848374c15fe0890af23a9344/config/routes.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/318d4ea1ccf80600848374c15fe0890af23a9344/config/routes.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/config/routes.rb?ref=318d4ea1ccf80600848374c15fe0890af23a9344","patch":"@@
        -3,6 +3,7 @@\n     namespace :v1 do\n       get ''/merchants/find'', to: ''merchants/search#show''\n       get
        ''/merchants/find_all'', to: ''merchants/search#index''\n+      get ''/merchants/random'',
        to: ''merchants/random#show''\n       get ''/merchants/:id/items'', to: ''merchants/items_relation#index''\n       get
        ''/merchants/:id/invoices'', to: ''merchants/invoices_relation#index''\n       resources
        :merchants, only: [:index, :show]"},{"sha":"9498d98ae6fc21ff76502080c3934322564ba6d7","filename":"spec/requests/api/v1/merchants_requests_spec.rb","status":"modified","additions":13,"deletions":0,"changes":13,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/318d4ea1ccf80600848374c15fe0890af23a9344/spec/requests/api/v1/merchants_requests_spec.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/318d4ea1ccf80600848374c15fe0890af23a9344/spec/requests/api/v1/merchants_requests_spec.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/spec/requests/api/v1/merchants_requests_spec.rb?ref=318d4ea1ccf80600848374c15fe0890af23a9344","patch":"@@
        -125,6 +125,19 @@\n \n       expect(merchant[0][\"id\"]).to eq(merchant1.id)\n     end\n+    it
        ''finds and returns a random merchant'' do\n+      merchant1 = create(:merchant)\n+      merchant2
        = create(:merchant)\n+      merchant3 = create(:merchant)\n+\n+      get \"/api/v1/merchants/random\"\n+\n+      expect(response).to
        be_successful\n+\n+      merchant = JSON.parse(response.body)\n+\n+      expect(merchant.values.count).to
        eq(2)\n+    end\n   end\n \n end\n\\ No newline at end of file"}]}'
    http_version: 
  recorded_at: Fri, 24 Aug 2018 14:27:32 GMT
- request:
    method: get
    uri: https://api.github.com/repos/1powechri2/Rails-Engine/commits/b1c21d4b6e31a93d39789289600639df2208713d
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Faraday v0.15.2
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - GitHub.com
      Date:
      - Fri, 24 Aug 2018 14:27:20 GMT
      Content-Type:
      - application/json; charset=utf-8
      Transfer-Encoding:
      - chunked
      Status:
      - 200 OK
      X-Ratelimit-Limit:
      - '60'
      X-Ratelimit-Remaining:
      - '50'
      X-Ratelimit-Reset:
      - '1535122878'
      Cache-Control:
      - public, max-age=60, s-maxage=60
      Vary:
      - Accept
      Etag:
      - W/"c9e15118ecd1aaac42bc55ea0e4b902b"
      Last-Modified:
      - Fri, 17 Aug 2018 14:16:09 GMT
      X-Github-Media-Type:
      - github.v3; format=json
      Access-Control-Expose-Headers:
      - ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining,
        X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
      Access-Control-Allow-Origin:
      - "*"
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      X-Frame-Options:
      - deny
      X-Content-Type-Options:
      - nosniff
      X-Xss-Protection:
      - 1; mode=block
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Content-Security-Policy:
      - default-src 'none'
      X-Runtime-Rack:
      - '0.120153'
      X-Github-Request-Id:
      - 2674:55A3:F1C6AE:1EAC8F0:5B8015C8
    body:
      encoding: ASCII-8BIT
      string: '{"sha":"b1c21d4b6e31a93d39789289600639df2208713d","node_id":"MDY6Q29tbWl0MTQ0NjI3MjQxOmIxYzIxZDRiNmUzMWE5M2QzOTc4OTI4OTYwMDYzOWRmMjIwODcxM2Q=","commit":{"author":{"name":"Christopher
        Powell","email":"34900620+1powechri2@users.noreply.github.com","date":"2018-08-17T14:16:09Z"},"committer":{"name":"GitHub","email":"noreply@github.com","date":"2018-08-17T14:16:09Z"},"message":"Merge
        pull request #21 from 1powechri2/random-end-points\n\nadds merchant random
        endpoint","tree":{"sha":"a46fea58eeb34c5b83428e09ca7e4f0d8aba4d1d","url":"https://api.github.com/repos/1powechri2/Rails-Engine/git/trees/a46fea58eeb34c5b83428e09ca7e4f0d8aba4d1d"},"url":"https://api.github.com/repos/1powechri2/Rails-Engine/git/commits/b1c21d4b6e31a93d39789289600639df2208713d","comment_count":0,"verification":{"verified":true,"reason":"valid","signature":"-----BEGIN
        PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJbdtipCRBK7hj4Ov3rIwAAdHIIACErEodcgHki23vxVuxpPlYZ\nvdzIHmAFhw3mIRD2uSZjXIVzmX95Ji9r53vh5h6nmazO7qlRkBXTGy4nURSIEjn+\nJncE3K93j37a0mwPpeVnx9/fBhW6vISYXAuoNrzt1GU6bBLFnwqSRBq6tRYFKIVD\nZ8Jzt/FSk/XLjten/LHBlZcLt5yAbHaWUVDXxEID9Ny2fJh9dhb7CVaFF7bjiZV0\nS7C/yWFogMBRQiL+6S6BunhB036HXueoCY7bebHBGMQZUnVbG/i06Mo6lzNvsKF3\njgJ1up78+ed/zBFBkVl9AVKhFXsFM8DrA40wmWotPUAemhwJ1cUcBTfvGsqODsQ=\n=TU94\n-----END
        PGP SIGNATURE-----\n","payload":"tree a46fea58eeb34c5b83428e09ca7e4f0d8aba4d1d\nparent
        f69a1918d54fb1bf6e0fbf5eb8bc540fb443f822\nparent 318d4ea1ccf80600848374c15fe0890af23a9344\nauthor
        Christopher Powell <34900620+1powechri2@users.noreply.github.com> 1534515369
        -0600\ncommitter GitHub <noreply@github.com> 1534515369 -0600\n\nMerge pull
        request #21 from 1powechri2/random-end-points\n\nadds merchant random endpoint"}},"url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/b1c21d4b6e31a93d39789289600639df2208713d","html_url":"https://github.com/1powechri2/Rails-Engine/commit/b1c21d4b6e31a93d39789289600639df2208713d","comments_url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/b1c21d4b6e31a93d39789289600639df2208713d/comments","author":{"login":"1powechri2","id":34900620,"node_id":"MDQ6VXNlcjM0OTAwNjIw","avatar_url":"https://avatars1.githubusercontent.com/u/34900620?v=4","gravatar_id":"","url":"https://api.github.com/users/1powechri2","html_url":"https://github.com/1powechri2","followers_url":"https://api.github.com/users/1powechri2/followers","following_url":"https://api.github.com/users/1powechri2/following{/other_user}","gists_url":"https://api.github.com/users/1powechri2/gists{/gist_id}","starred_url":"https://api.github.com/users/1powechri2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1powechri2/subscriptions","organizations_url":"https://api.github.com/users/1powechri2/orgs","repos_url":"https://api.github.com/users/1powechri2/repos","events_url":"https://api.github.com/users/1powechri2/events{/privacy}","received_events_url":"https://api.github.com/users/1powechri2/received_events","type":"User","site_admin":false},"committer":{"login":"web-flow","id":19864447,"node_id":"MDQ6VXNlcjE5ODY0NDQ3","avatar_url":"https://avatars3.githubusercontent.com/u/19864447?v=4","gravatar_id":"","url":"https://api.github.com/users/web-flow","html_url":"https://github.com/web-flow","followers_url":"https://api.github.com/users/web-flow/followers","following_url":"https://api.github.com/users/web-flow/following{/other_user}","gists_url":"https://api.github.com/users/web-flow/gists{/gist_id}","starred_url":"https://api.github.com/users/web-flow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/web-flow/subscriptions","organizations_url":"https://api.github.com/users/web-flow/orgs","repos_url":"https://api.github.com/users/web-flow/repos","events_url":"https://api.github.com/users/web-flow/events{/privacy}","received_events_url":"https://api.github.com/users/web-flow/received_events","type":"User","site_admin":false},"parents":[{"sha":"f69a1918d54fb1bf6e0fbf5eb8bc540fb443f822","url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/f69a1918d54fb1bf6e0fbf5eb8bc540fb443f822","html_url":"https://github.com/1powechri2/Rails-Engine/commit/f69a1918d54fb1bf6e0fbf5eb8bc540fb443f822"},{"sha":"318d4ea1ccf80600848374c15fe0890af23a9344","url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/318d4ea1ccf80600848374c15fe0890af23a9344","html_url":"https://github.com/1powechri2/Rails-Engine/commit/318d4ea1ccf80600848374c15fe0890af23a9344"}],"stats":{"total":19,"additions":19,"deletions":0},"files":[{"sha":"292bd1f6b3bed6c714ade265eb53dc071a1309f0","filename":"app/controllers/api/v1/merchants/random_controller.rb","status":"added","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/b1c21d4b6e31a93d39789289600639df2208713d/app/controllers/api/v1/merchants/random_controller.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/b1c21d4b6e31a93d39789289600639df2208713d/app/controllers/api/v1/merchants/random_controller.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/controllers/api/v1/merchants/random_controller.rb?ref=b1c21d4b6e31a93d39789289600639df2208713d","patch":"@@
        -0,0 +1,5 @@\n+class Api::V1::Merchants::RandomController < ApplicationController\n+  def
        show\n+    render json: Merchant.all.sample\n+  end\n+end\n\\ No newline at
        end of file"},{"sha":"28ca89c8365fe43ca2b0627b8eca4611e60be693","filename":"config/routes.rb","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/b1c21d4b6e31a93d39789289600639df2208713d/config/routes.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/b1c21d4b6e31a93d39789289600639df2208713d/config/routes.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/config/routes.rb?ref=b1c21d4b6e31a93d39789289600639df2208713d","patch":"@@
        -3,6 +3,7 @@\n     namespace :v1 do\n       get ''/merchants/find'', to: ''merchants/search#show''\n       get
        ''/merchants/find_all'', to: ''merchants/search#index''\n+      get ''/merchants/random'',
        to: ''merchants/random#show''\n       get ''/merchants/:id/items'', to: ''merchants/items_relation#index''\n       get
        ''/merchants/:id/invoices'', to: ''merchants/invoices_relation#index''\n       get
        ''/merchants/most_revenue'', to: ''merchants/most_revenue#index''"},{"sha":"9498d98ae6fc21ff76502080c3934322564ba6d7","filename":"spec/requests/api/v1/merchants_requests_spec.rb","status":"modified","additions":13,"deletions":0,"changes":13,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/b1c21d4b6e31a93d39789289600639df2208713d/spec/requests/api/v1/merchants_requests_spec.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/b1c21d4b6e31a93d39789289600639df2208713d/spec/requests/api/v1/merchants_requests_spec.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/spec/requests/api/v1/merchants_requests_spec.rb?ref=b1c21d4b6e31a93d39789289600639df2208713d","patch":"@@
        -125,6 +125,19 @@\n \n       expect(merchant[0][\"id\"]).to eq(merchant1.id)\n     end\n+    it
        ''finds and returns a random merchant'' do\n+      merchant1 = create(:merchant)\n+      merchant2
        = create(:merchant)\n+      merchant3 = create(:merchant)\n+\n+      get \"/api/v1/merchants/random\"\n+\n+      expect(response).to
        be_successful\n+\n+      merchant = JSON.parse(response.body)\n+\n+      expect(merchant.values.count).to
        eq(2)\n+    end\n   end\n \n end\n\\ No newline at end of file"}]}'
    http_version: 
  recorded_at: Fri, 24 Aug 2018 14:27:33 GMT
- request:
    method: get
    uri: https://api.github.com/repos/1powechri2/Rails-Engine/commits/ebee1fc8cf4ecf8382a32a459fd21d197748b1f6
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Faraday v0.15.2
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - GitHub.com
      Date:
      - Fri, 24 Aug 2018 14:27:20 GMT
      Content-Type:
      - application/json; charset=utf-8
      Transfer-Encoding:
      - chunked
      Status:
      - 200 OK
      X-Ratelimit-Limit:
      - '60'
      X-Ratelimit-Remaining:
      - '49'
      X-Ratelimit-Reset:
      - '1535122878'
      Cache-Control:
      - public, max-age=60, s-maxage=60
      Vary:
      - Accept
      Etag:
      - W/"9790571277abe4e303ecaffa7b5b069b"
      Last-Modified:
      - Fri, 17 Aug 2018 05:40:21 GMT
      X-Github-Media-Type:
      - github.v3; format=json
      Access-Control-Expose-Headers:
      - ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining,
        X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
      Access-Control-Allow-Origin:
      - "*"
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      X-Frame-Options:
      - deny
      X-Content-Type-Options:
      - nosniff
      X-Xss-Protection:
      - 1; mode=block
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Content-Security-Policy:
      - default-src 'none'
      X-Runtime-Rack:
      - '0.103106'
      X-Github-Request-Id:
      - CE10:55A0:B0F4BD:18CF24E:5B8015C8
    body:
      encoding: ASCII-8BIT
      string: '{"sha":"ebee1fc8cf4ecf8382a32a459fd21d197748b1f6","node_id":"MDY6Q29tbWl0MTQ0NjI3MjQxOmViZWUxZmM4Y2Y0ZWNmODM4MmEzMmE0NTlmZDIxZDE5Nzc0OGIxZjY=","commit":{"author":{"name":"Eliot
        Swank","email":"eliotswank@gmail.com","date":"2018-08-17T05:40:21Z"},"committer":{"name":"Eliot
        Swank","email":"eliotswank@gmail.com","date":"2018-08-17T05:40:21Z"},"message":"Adds
        basic readme","tree":{"sha":"45cb272b58b0f6ae5a097bc93680f80cd860b83e","url":"https://api.github.com/repos/1powechri2/Rails-Engine/git/trees/45cb272b58b0f6ae5a097bc93680f80cd860b83e"},"url":"https://api.github.com/repos/1powechri2/Rails-Engine/git/commits/ebee1fc8cf4ecf8382a32a459fd21d197748b1f6","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/ebee1fc8cf4ecf8382a32a459fd21d197748b1f6","html_url":"https://github.com/1powechri2/Rails-Engine/commit/ebee1fc8cf4ecf8382a32a459fd21d197748b1f6","comments_url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/ebee1fc8cf4ecf8382a32a459fd21d197748b1f6/comments","author":{"login":"EMSwank","id":31110190,"node_id":"MDQ6VXNlcjMxMTEwMTkw","avatar_url":"https://avatars1.githubusercontent.com/u/31110190?v=4","gravatar_id":"","url":"https://api.github.com/users/EMSwank","html_url":"https://github.com/EMSwank","followers_url":"https://api.github.com/users/EMSwank/followers","following_url":"https://api.github.com/users/EMSwank/following{/other_user}","gists_url":"https://api.github.com/users/EMSwank/gists{/gist_id}","starred_url":"https://api.github.com/users/EMSwank/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EMSwank/subscriptions","organizations_url":"https://api.github.com/users/EMSwank/orgs","repos_url":"https://api.github.com/users/EMSwank/repos","events_url":"https://api.github.com/users/EMSwank/events{/privacy}","received_events_url":"https://api.github.com/users/EMSwank/received_events","type":"User","site_admin":false},"committer":{"login":"EMSwank","id":31110190,"node_id":"MDQ6VXNlcjMxMTEwMTkw","avatar_url":"https://avatars1.githubusercontent.com/u/31110190?v=4","gravatar_id":"","url":"https://api.github.com/users/EMSwank","html_url":"https://github.com/EMSwank","followers_url":"https://api.github.com/users/EMSwank/followers","following_url":"https://api.github.com/users/EMSwank/following{/other_user}","gists_url":"https://api.github.com/users/EMSwank/gists{/gist_id}","starred_url":"https://api.github.com/users/EMSwank/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EMSwank/subscriptions","organizations_url":"https://api.github.com/users/EMSwank/orgs","repos_url":"https://api.github.com/users/EMSwank/repos","events_url":"https://api.github.com/users/EMSwank/events{/privacy}","received_events_url":"https://api.github.com/users/EMSwank/received_events","type":"User","site_admin":false},"parents":[{"sha":"5de05a9ae067d5b48d648040c6463708acbfdd76","url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/5de05a9ae067d5b48d648040c6463708acbfdd76","html_url":"https://github.com/1powechri2/Rails-Engine/commit/5de05a9ae067d5b48d648040c6463708acbfdd76"}],"stats":{"total":52,"additions":38,"deletions":14},"files":[{"sha":"314f7b10810dff3b1119bf6f5258473de694c9bf","filename":"README.md","status":"modified","additions":32,"deletions":13,"changes":45,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/ebee1fc8cf4ecf8382a32a459fd21d197748b1f6/README.md","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/ebee1fc8cf4ecf8382a32a459fd21d197748b1f6/README.md","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/README.md?ref=ebee1fc8cf4ecf8382a32a459fd21d197748b1f6","patch":"@@
        -1,24 +1,43 @@\n-# README\n+# Rails Engine\n \n-This README would normally
        document whatever steps are necessary to get the\n-application up and running.\n+Rails
        Engine is a Rails API with a postgresql database project built in Turing School
        of Software and Design''s Module 3 Backend course. This API allows consuption
        of sales data of an Etsy-style store.\n \n-Things you may want to cover:\n+###
        Setup\n \n-* Ruby version\n+Clone the repository\n \n-* System dependencies\n+```\n+$
        git clone https://github.com/1powechri2/Rails-Engine.git\n+```\n \n-* Configuration\n+Bundle
        the gems\n \n-* Database creation\n+```\n+$ bundle\n+$ bundle update\n+```\n
        \n-* Database initialization\n+Next, run `rake` to create, migrate, and seed
        the database.\n \n-* How to run the test suite\n+```\n+$ rake\n+```\n \n-*
        Services (job queues, cache servers, search engines, etc.)\n+To see the endpoints
        run the Rails server\n \n-* Deployment instructions\n+```\n+$ rails s\n+```\n
        \n-* ...\n+To run the test suite\n+\n+```\n+$ rspec\n+```\n+\n+---\n+\n+###
        Software Versions\n+\n+- Ruby 2.4.1\n+- Rails 5.2.1"},{"sha":"90f7ec74359423a6baa53a38c3f69e61b93ec5c1","filename":"spec/spec_helper.rb","status":"modified","additions":6,"deletions":1,"changes":7,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/ebee1fc8cf4ecf8382a32a459fd21d197748b1f6/spec/spec_helper.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/ebee1fc8cf4ecf8382a32a459fd21d197748b1f6/spec/spec_helper.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/spec/spec_helper.rb?ref=ebee1fc8cf4ecf8382a32a459fd21d197748b1f6","patch":"@@
        -4,7 +4,12 @@\n # this file to always be loaded, without a need to explicitly
        require it in any\n # files.\n require ''simplecov''\n-SimpleCov.start ''rails''\n+SimpleCov.start
        ''rails'' do\n+ add_filter \"app/channels/application_cable/channel.rb\"\n+
        add_filter \"app/channels/application_cable/connection.rb\"\n+ add_filter
        \"app/jobs/application_job.rb\"\n+ add_filter \"app/mailers/application_mailer.rb\"\n+end\n
        # Given that it is always loaded, you are encouraged to keep this file as\n
        # light-weight as possible. Requiring heavyweight dependencies from this file\n
        # will add to the boot time of your test suite on EVERY test run, even for
        an"}]}'
    http_version: 
  recorded_at: Fri, 24 Aug 2018 14:27:33 GMT
- request:
    method: get
    uri: https://api.github.com/repos/1powechri2/Rails-Engine/commits/d90ba4ff895c01659918df22448cdcc14b0ed6a1
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Faraday v0.15.2
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - GitHub.com
      Date:
      - Fri, 24 Aug 2018 14:27:21 GMT
      Content-Type:
      - application/json; charset=utf-8
      Transfer-Encoding:
      - chunked
      Status:
      - 200 OK
      X-Ratelimit-Limit:
      - '60'
      X-Ratelimit-Remaining:
      - '48'
      X-Ratelimit-Reset:
      - '1535122878'
      Cache-Control:
      - public, max-age=60, s-maxage=60
      Vary:
      - Accept
      Etag:
      - W/"cdb21743096c6a2546a7ce2f61130b8a"
      Last-Modified:
      - Fri, 17 Aug 2018 05:40:28 GMT
      X-Github-Media-Type:
      - github.v3; format=json
      Access-Control-Expose-Headers:
      - ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining,
        X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
      Access-Control-Allow-Origin:
      - "*"
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      X-Frame-Options:
      - deny
      X-Content-Type-Options:
      - nosniff
      X-Xss-Protection:
      - 1; mode=block
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Content-Security-Policy:
      - default-src 'none'
      X-Runtime-Rack:
      - '0.119736'
      X-Github-Request-Id:
      - 565E:55A0:B0F4D8:18CF27A:5B8015C8
    body:
      encoding: ASCII-8BIT
      string: '{"sha":"d90ba4ff895c01659918df22448cdcc14b0ed6a1","node_id":"MDY6Q29tbWl0MTQ0NjI3MjQxOmQ5MGJhNGZmODk1YzAxNjU5OTE4ZGYyMjQ0OGNkY2MxNGIwZWQ2YTE=","commit":{"author":{"name":"Eliot
        Swank","email":"eliotswank@gmail.com","date":"2018-08-17T05:40:28Z"},"committer":{"name":"Eliot
        Swank","email":"eliotswank@gmail.com","date":"2018-08-17T05:40:28Z"},"message":"Merge
        branch ''master'' of https://github.com/1powechri2/Rails-Engine into readme","tree":{"sha":"4016bf251a56528229628e37733a999adb4a8595","url":"https://api.github.com/repos/1powechri2/Rails-Engine/git/trees/4016bf251a56528229628e37733a999adb4a8595"},"url":"https://api.github.com/repos/1powechri2/Rails-Engine/git/commits/d90ba4ff895c01659918df22448cdcc14b0ed6a1","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/d90ba4ff895c01659918df22448cdcc14b0ed6a1","html_url":"https://github.com/1powechri2/Rails-Engine/commit/d90ba4ff895c01659918df22448cdcc14b0ed6a1","comments_url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/d90ba4ff895c01659918df22448cdcc14b0ed6a1/comments","author":{"login":"EMSwank","id":31110190,"node_id":"MDQ6VXNlcjMxMTEwMTkw","avatar_url":"https://avatars1.githubusercontent.com/u/31110190?v=4","gravatar_id":"","url":"https://api.github.com/users/EMSwank","html_url":"https://github.com/EMSwank","followers_url":"https://api.github.com/users/EMSwank/followers","following_url":"https://api.github.com/users/EMSwank/following{/other_user}","gists_url":"https://api.github.com/users/EMSwank/gists{/gist_id}","starred_url":"https://api.github.com/users/EMSwank/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EMSwank/subscriptions","organizations_url":"https://api.github.com/users/EMSwank/orgs","repos_url":"https://api.github.com/users/EMSwank/repos","events_url":"https://api.github.com/users/EMSwank/events{/privacy}","received_events_url":"https://api.github.com/users/EMSwank/received_events","type":"User","site_admin":false},"committer":{"login":"EMSwank","id":31110190,"node_id":"MDQ6VXNlcjMxMTEwMTkw","avatar_url":"https://avatars1.githubusercontent.com/u/31110190?v=4","gravatar_id":"","url":"https://api.github.com/users/EMSwank","html_url":"https://github.com/EMSwank","followers_url":"https://api.github.com/users/EMSwank/followers","following_url":"https://api.github.com/users/EMSwank/following{/other_user}","gists_url":"https://api.github.com/users/EMSwank/gists{/gist_id}","starred_url":"https://api.github.com/users/EMSwank/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EMSwank/subscriptions","organizations_url":"https://api.github.com/users/EMSwank/orgs","repos_url":"https://api.github.com/users/EMSwank/repos","events_url":"https://api.github.com/users/EMSwank/events{/privacy}","received_events_url":"https://api.github.com/users/EMSwank/received_events","type":"User","site_admin":false},"parents":[{"sha":"ebee1fc8cf4ecf8382a32a459fd21d197748b1f6","url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/ebee1fc8cf4ecf8382a32a459fd21d197748b1f6","html_url":"https://github.com/1powechri2/Rails-Engine/commit/ebee1fc8cf4ecf8382a32a459fd21d197748b1f6"},{"sha":"cd10d7c84f4e7208a681adce61facf6b164599be","url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/cd10d7c84f4e7208a681adce61facf6b164599be","html_url":"https://github.com/1powechri2/Rails-Engine/commit/cd10d7c84f4e7208a681adce61facf6b164599be"}],"stats":{"total":535,"additions":535,"deletions":0},"files":[{"sha":"696119945ff7c74c1dead5536a9b7e971949aed0","filename":"app/controllers/api/v1/customers/favorite_merchant_controller.rb","status":"added","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/d90ba4ff895c01659918df22448cdcc14b0ed6a1/app/controllers/api/v1/customers/favorite_merchant_controller.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/d90ba4ff895c01659918df22448cdcc14b0ed6a1/app/controllers/api/v1/customers/favorite_merchant_controller.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/controllers/api/v1/customers/favorite_merchant_controller.rb?ref=d90ba4ff895c01659918df22448cdcc14b0ed6a1","patch":"@@
        -0,0 +1,5 @@\n+class Api::V1::Customers::FavoriteMerchantController < ApplicationController\n+  def
        show\n+    render json: Customer.find(params[:id]).favorite_merchant\n+  end\n+end"},{"sha":"2e158fc6e9a0142bd64f7e64a4aef460a5480a54","filename":"app/controllers/api/v1/items/best_day_controller.rb","status":"added","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/d90ba4ff895c01659918df22448cdcc14b0ed6a1/app/controllers/api/v1/items/best_day_controller.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/d90ba4ff895c01659918df22448cdcc14b0ed6a1/app/controllers/api/v1/items/best_day_controller.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/controllers/api/v1/items/best_day_controller.rb?ref=d90ba4ff895c01659918df22448cdcc14b0ed6a1","patch":"@@
        -0,0 +1,5 @@\n+class Api::V1::Items::BestDayController < ApplicationController\n+  def
        show\n+    render json: Item.find(params[:id]).best_day\n+  end\n+end"},{"sha":"6fba7d15e87f5dafb5cd2b076c9456b65dc2ef95","filename":"app/controllers/api/v1/items/most_items_controller.rb","status":"added","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/d90ba4ff895c01659918df22448cdcc14b0ed6a1/app/controllers/api/v1/items/most_items_controller.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/d90ba4ff895c01659918df22448cdcc14b0ed6a1/app/controllers/api/v1/items/most_items_controller.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/controllers/api/v1/items/most_items_controller.rb?ref=d90ba4ff895c01659918df22448cdcc14b0ed6a1","patch":"@@
        -0,0 +1,5 @@\n+class Api::V1::Items::MostItemsController < ApplicationController\n+  def
        index\n+    render json: Item.most_sold(params[:quantity])\n+  end\n+end"},{"sha":"d1184aeb069eca8e15054a73aa6c9bbb3fc605f5","filename":"app/controllers/api/v1/items/most_revenue_controller.rb","status":"added","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/d90ba4ff895c01659918df22448cdcc14b0ed6a1/app/controllers/api/v1/items/most_revenue_controller.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/d90ba4ff895c01659918df22448cdcc14b0ed6a1/app/controllers/api/v1/items/most_revenue_controller.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/controllers/api/v1/items/most_revenue_controller.rb?ref=d90ba4ff895c01659918df22448cdcc14b0ed6a1","patch":"@@
        -0,0 +1,5 @@\n+class Api::V1::Items::MostRevenueController < ApplicationController\n+  def
        index\n+    render json: Item.most_revenue(params[:quantity])\n+  end\n+end"},{"sha":"2dc680c637e0044ab6eacf6fcfe6b282357366c6","filename":"app/controllers/api/v1/merchants/favorite_customer_controller.rb","status":"added","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/d90ba4ff895c01659918df22448cdcc14b0ed6a1/app/controllers/api/v1/merchants/favorite_customer_controller.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/d90ba4ff895c01659918df22448cdcc14b0ed6a1/app/controllers/api/v1/merchants/favorite_customer_controller.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/controllers/api/v1/merchants/favorite_customer_controller.rb?ref=d90ba4ff895c01659918df22448cdcc14b0ed6a1","patch":"@@
        -0,0 +1,5 @@\n+class Api::V1::Merchants::FavoriteCustomerController < ApplicationController\n+  def
        show\n+    render json: Merchant.find(params[:id]).favorite_customer\n+  end\n+end"},{"sha":"1b36a6d219d01867be3ffa175481fc2b2a2d2628","filename":"app/controllers/api/v1/merchants/most_items_controller.rb","status":"added","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/d90ba4ff895c01659918df22448cdcc14b0ed6a1/app/controllers/api/v1/merchants/most_items_controller.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/d90ba4ff895c01659918df22448cdcc14b0ed6a1/app/controllers/api/v1/merchants/most_items_controller.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/controllers/api/v1/merchants/most_items_controller.rb?ref=d90ba4ff895c01659918df22448cdcc14b0ed6a1","patch":"@@
        -0,0 +1,5 @@\n+class Api::V1::Merchants::MostItemsController < ApplicationController\n+  def
        index\n+    render json: Merchant.most_items_sold(params[:quantity])\n+  end\n+end"},{"sha":"141deae137aa35281dc0d15377ece3e43637c888","filename":"app/controllers/api/v1/merchants/most_revenue_controller.rb","status":"added","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/d90ba4ff895c01659918df22448cdcc14b0ed6a1/app/controllers/api/v1/merchants/most_revenue_controller.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/d90ba4ff895c01659918df22448cdcc14b0ed6a1/app/controllers/api/v1/merchants/most_revenue_controller.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/controllers/api/v1/merchants/most_revenue_controller.rb?ref=d90ba4ff895c01659918df22448cdcc14b0ed6a1","patch":"@@
        -0,0 +1,5 @@\n+class Api::V1::Merchants::MostRevenueController < ApplicationController\n+  def
        index\n+    render json: Merchant.most_revenue(params[:quantity])\n+  end\n+end"},{"sha":"3839d68b19c545bdaa1dd7f6166f0afa4a20d035","filename":"app/controllers/api/v1/merchants/revenue_controller.rb","status":"added","additions":18,"deletions":0,"changes":18,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/d90ba4ff895c01659918df22448cdcc14b0ed6a1/app/controllers/api/v1/merchants/revenue_controller.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/d90ba4ff895c01659918df22448cdcc14b0ed6a1/app/controllers/api/v1/merchants/revenue_controller.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/controllers/api/v1/merchants/revenue_controller.rb?ref=d90ba4ff895c01659918df22448cdcc14b0ed6a1","patch":"@@
        -0,0 +1,18 @@\n+class Api::V1::Merchants::RevenueController < ApplicationController\n+  def
        show\n+    if !params[:date]\n+      revenue = Merchant.find(params[:id]).successful_transactions_total\n+      render
        json: {\"revenue\" => (revenue * 0.01).round(2).to_s}\n+    else\n+      date
        = Date.parse(\"#{params[:date]} 00.00.00. UTC\")\n+      revenue = Merchant.find(params[:id]).revenue_by_date(date)\n+      render
        json: {\"revenue\" => (revenue * 0.01).round(2).to_s}\n+    end\n+  end\n+\n+  def
        index\n+    date = Date.parse(\"#{params[:date]} 00.00.00. UTC\")\n+    revenue
        = Merchant.total_revenue_for_date(date)\n+    render json: {\"total_revenue\"
        => (revenue * 0.01).round(2).to_s}\n+  end\n+end"},{"sha":"35aadf9089aa6ba0d12ff2f4488a044fd0380ecd","filename":"app/models/customer.rb","status":"modified","additions":8,"deletions":0,"changes":8,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/d90ba4ff895c01659918df22448cdcc14b0ed6a1/app/models/customer.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/d90ba4ff895c01659918df22448cdcc14b0ed6a1/app/models/customer.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/models/customer.rb?ref=d90ba4ff895c01659918df22448cdcc14b0ed6a1","patch":"@@
        -3,4 +3,12 @@ class Customer < ApplicationRecord\n   has_many :transactions,
        through: :invoices\n   has_many :merchants, through: :invoices\n   has_many
        :invoice_items, through: :invoices\n+\n+  def favorite_merchant\n+    merchants.select(''merchants.*,
        count(transactions.result) as trans'').\n+    joins(invoices: :transactions).\n+    where(transactions:
        {result: \"success\"}).\n+    group(:id).order(''trans desc'').\n+    limit(1)[0]\n+  end\n
        end"},{"sha":"42737d7735950da6bcf473331ab3b88dd95bc757","filename":"app/models/item.rb","status":"modified","additions":27,"deletions":0,"changes":27,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/d90ba4ff895c01659918df22448cdcc14b0ed6a1/app/models/item.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/d90ba4ff895c01659918df22448cdcc14b0ed6a1/app/models/item.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/models/item.rb?ref=d90ba4ff895c01659918df22448cdcc14b0ed6a1","patch":"@@
        -2,4 +2,31 @@ class Item < ApplicationRecord\n   has_many :invoice_items\n   has_many
        :invoices, through: :invoice_items\n   belongs_to :merchant\n+\n+  def self.most_revenue(x
        = 5)\n+    select(''items.*, sum(invoice_items.quantity * invoice_items.unit_price)
        as revenue'').\n+    joins(invoices: :transactions).\n+    where(transactions:
        {result: ''success''}).\n+    group(:id).\n+    order(''revenue desc'').\n+    limit(x)\n+  end\n+\n+  def
        self.most_sold(x = 5)\n+    select(''items.*, sum(invoice_items.quantity)
        as total_sold'').\n+    joins(invoices: :transactions).\n+    where(transactions:
        {result: ''success''}).\n+    group(:id).\n+    order(''total_sold desc'').\n+    limit(x)\n+  end\n+\n+  def
        best_day\n+    invoices.\n+    select(''invoices.*, sum(invoice_items.quantity)
        as total_sales'').\n+    joins(:transactions, :invoice_items).where(transactions:
        {result: ''success''}).\n+    group(:id).\n+    order(''total_sales desc'').\n+    order(''updated_at
        desc'').first.updated_at\n+  end\n end"},{"sha":"e577d7a979b629f5189aee07d93b5b1d212dc90d","filename":"app/models/merchant.rb","status":"modified","additions":50,"deletions":0,"changes":50,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/d90ba4ff895c01659918df22448cdcc14b0ed6a1/app/models/merchant.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/d90ba4ff895c01659918df22448cdcc14b0ed6a1/app/models/merchant.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/models/merchant.rb?ref=d90ba4ff895c01659918df22448cdcc14b0ed6a1","patch":"@@
        -2,6 +2,56 @@ class Merchant < ApplicationRecord\n   validates_presence_of
        :name\n   has_many :invoices\n   has_many :items\n+  has_many :customers,
        through: :invoices\n   has_many :transactions, through: :invoices\n   has_many
        :invoice_items, through: :invoices\n+\n+  def self.most_revenue(x = 5)\n+    select(''merchants.*,
        sum(invoice_items.unit_price * invoice_items.quantity) as revenue'')\n+    .joins(invoices:
        [:transactions, :invoice_items])\n+    .where(transactions: {result: ''success''})\n+    .group(:id)\n+    .order(''revenue
        desc'')\n+    .limit(x)\n+  end\n+\n+  def self.most_items_sold(x = 5)\n+    select(''merchants.*,
        sum(invoice_items.quantity) as item_count'')\n+    .joins(invoices: [:transactions,
        :invoice_items])\n+    .where(transactions: {result: ''success''})\n+    .group(:id)\n+    .order(''item_count
        desc'')\n+    .limit(x)\n+  end\n+\n+  def self.total_revenue_for_date(date)\n+    joins(invoices:
        [:transactions, :invoice_items]).\n+    where(transactions: {result: ''success''}).\n+    where(invoices:
        {updated_at: date.beginning_of_day..date.end_of_day}).\n+    sum(''quantity
        * unit_price'')\n+  end\n+\n+  def successful_transactions_total\n+    invoices.\n+    joins(:transactions,
        :invoice_items).\n+    where(transactions: {result: ''success''}).\n+    sum(''quantity
        * unit_price'')\n+  end\n+\n+  def revenue_by_date(date)\n+    invoices.\n+    joins(:transactions,
        :invoice_items).\n+    where(transactions: {result: ''success''}).\n+    where(invoices:
        {updated_at: date.beginning_of_day..date.end_of_day}).\n+    sum(''quantity
        * unit_price'')\n+  end\n+\n+  def favorite_customer\n+    customers.\n+    select(''customers.*,
        count(transactions.result) as trans'').\n+    joins(invoices: :transactions).where(transactions:
        {result: ''success''}).\n+    group(:id).\n+    order(''trans desc'').\n+    limit(1)[0]\n+  end\n
        end"},{"sha":"149882cf54417a1a66753beda586ad5c702c76dd","filename":"config/routes.rb","status":"modified","additions":9,"deletions":0,"changes":9,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/d90ba4ff895c01659918df22448cdcc14b0ed6a1/config/routes.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/d90ba4ff895c01659918df22448cdcc14b0ed6a1/config/routes.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/config/routes.rb?ref=d90ba4ff895c01659918df22448cdcc14b0ed6a1","patch":"@@
        -5,6 +5,11 @@\n       get ''/merchants/find_all'', to: ''merchants/search#index''\n       get
        ''/merchants/:id/items'', to: ''merchants/items_relation#index''\n       get
        ''/merchants/:id/invoices'', to: ''merchants/invoices_relation#index''\n+      get
        ''/merchants/most_revenue'', to: ''merchants/most_revenue#index''\n+      get
        ''/merchants/most_items'', to: ''merchants/most_items#index''\n+      get
        ''/merchants/revenue'', to: ''merchants/revenue#index''\n+      get ''/merchants/:id/revenue'',
        to: ''merchants/revenue#show''\n+      get ''/merchants/:id/favorite_customer'',
        to: ''merchants/favorite_customer#show''\n       resources :merchants, only:
        [:index, :show]\n       get ''/transactions/find'', to: ''transactions/search#show''\n       get
        ''/transactions/find_all'', to: ''transactions/search#index''\n@@ -22,11 +27,15
        @@\n       get ''/items/find_all'', to: ''items/search#index''\n       get
        ''/items/:id/invoice_items'', to: ''items/invoice_items_relation#index''\n       get
        ''/items/:id/merchant'', to: ''items/merchant_relation#show''\n+      get
        ''/items/most_revenue'', to: ''items/most_revenue#index''\n+      get ''/items/most_items'',
        to: ''items/most_items#index''\n+      get ''/items/:id/best_day'', to: ''items/best_day#show''\n       resources
        :items, only: [:index, :show]\n       get ''/customers/find'', to: ''customers/search#show''\n       get
        ''/customers/find_all'', to: ''customers/search#index''\n       get ''/customers/:id/invoices'',
        to: ''customers/invoices_relation#index''\n       get ''/customers/:id/transactions'',
        to: ''customers/transactions_relation#index''\n+      get ''/customers/:id/favorite_merchant'',
        to: ''customers/favorite_merchant#show''\n       resources :customers, only:
        [:index, :show]\n       get ''/invoice_items/find'', to: ''invoice_items/search#show''\n       get
        ''/invoice_items/find_all'', to: ''invoice_items/search#index''"},{"sha":"c1053d4605aa125151454aab90449f2db47016bb","filename":"spec/models/customer_spec.rb","status":"modified","additions":18,"deletions":0,"changes":18,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/d90ba4ff895c01659918df22448cdcc14b0ed6a1/spec/models/customer_spec.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/d90ba4ff895c01659918df22448cdcc14b0ed6a1/spec/models/customer_spec.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/spec/models/customer_spec.rb?ref=d90ba4ff895c01659918df22448cdcc14b0ed6a1","patch":"@@
        -5,4 +5,22 @@\n     it { should have_many(:merchants).through(:invoices) }\n     it
        { should have_many(:invoice_items).through(:invoices) }\n     it { should
        have_many(:transactions).through(:invoices) }\n+  describe ''instance method''
        do\n+    it ''can find a favorite merchant'' do\n+      customer = create(:customer)\n+\n+      merchant1
        = create(:merchant)\n+      merchant2 = create(:merchant)\n+\n+      invoice1
        = create(:invoice, merchant_id: merchant1.id, customer_id: customer.id)\n+      invoice2
        = create(:invoice, merchant_id: merchant1.id, customer_id: customer.id)\n+      invoice3
        = create(:invoice, merchant_id: merchant2.id, customer_id: customer.id)\n+\n+      trans1
        = create(:transaction, invoice_id: invoice1.id, result: ''success'')\n+      trans2
        = create(:transaction, invoice_id: invoice2.id, result: ''success'')\n+      trans3
        = create(:transaction, invoice_id: invoice3.id, result: ''success'')\n+\n+      expect(customer.favorite_merchant).to
        eq(merchant1)\n+    end\n+  end\n end"},{"sha":"6370d633692e624791f15deb49a867607d0afb67","filename":"spec/models/item_spec.rb","status":"modified","additions":53,"deletions":0,"changes":53,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/d90ba4ff895c01659918df22448cdcc14b0ed6a1/spec/models/item_spec.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/d90ba4ff895c01659918df22448cdcc14b0ed6a1/spec/models/item_spec.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/spec/models/item_spec.rb?ref=d90ba4ff895c01659918df22448cdcc14b0ed6a1","patch":"@@
        -4,4 +4,57 @@\n   it { should have_many(:invoice_items) }\n   it { should
        have_many(:invoices).through(:invoice_items) }\n   it { should belong_to(:merchant)
        }\n+\n+  describe ''class methods'' do\n+    it ''returns the top items ranked
        by revenue'' do\n+      item1 = create(:item)\n+      item2 = create(:item)\n+      item3
        = create(:item)\n+\n+      invoice1 = create(:invoice)\n+      invoice2 =
        create(:invoice)\n+\n+      invoice_item = create(:invoice_item, invoice_id:
        invoice1.id, item_id: item1.id, unit_price: 80, quantity: 4)\n+      invoice_item
        = create(:invoice_item, invoice_id: invoice2.id, item_id: item2.id, unit_price:
        40, quantity: 20)\n+      invoice_item = create(:invoice_item, invoice_id:
        invoice1.id, item_id: item3.id, unit_price: 80, quantity: 2)\n+\n+      transaction1
        = create(:transaction, invoice_id: invoice1.id, result: ''success'')\n+      transaction2
        = create(:transaction, invoice_id: invoice2.id, result: ''success'')\n+\n+      expect(Item.most_revenue(3)).to
        eq([item2, item1, item3])\n+    end\n+    it ''returns the top items ranked
        by number sold'' do\n+      item1 = create(:item)\n+      item2 = create(:item)\n+      item3
        = create(:item)\n+\n+      invoice1 = create(:invoice)\n+      invoice2 =
        create(:invoice)\n+\n+      invoice_item = create(:invoice_item, invoice_id:
        invoice1.id, item_id: item1.id, unit_price: 80, quantity: 4)\n+      invoice_item
        = create(:invoice_item, invoice_id: invoice2.id, item_id: item2.id, unit_price:
        40, quantity: 20)\n+      invoice_item = create(:invoice_item, invoice_id:
        invoice1.id, item_id: item3.id, unit_price: 80, quantity: 2)\n+\n+      transaction1
        = create(:transaction, invoice_id: invoice1.id, result: ''success'')\n+      transaction2
        = create(:transaction, invoice_id: invoice2.id, result: ''success'')\n+\n+      expect(Item.most_sold(3)).to
        eq([item2, item1, item3])\n+    end\n+    it ''returns the date for an item
        when it sold the most'' do\n+      item = create(:item)\n+\n+      invoice1
        = create(:invoice, updated_at: \"2012-03-09 08:57:21 UTC\")\n+      invoice2
        = create(:invoice, updated_at: \"2012-04-09 08:57:21 UTC\")\n+      invoice3
        = create(:invoice, updated_at: \"2012-05-09 08:57:21 UTC\")\n+\n+      invoice_item
        = create(:invoice_item, invoice_id: invoice1.id, item_id: item.id, unit_price:
        80, quantity: 4)\n+      invoice_item = create(:invoice_item, invoice_id:
        invoice2.id, item_id: item.id, unit_price: 80, quantity: 20)\n+      invoice_item
        = create(:invoice_item, invoice_id: invoice3.id, item_id: item.id, unit_price:
        80, quantity: 2)\n+\n+      transaction1 = create(:transaction, invoice_id:
        invoice1.id, result: ''success'')\n+      transaction2 = create(:transaction,
        invoice_id: invoice2.id, result: ''success'')\n+\n+      expect(item.best_day).to
        eq(invoice2.updated_at)\n+    end\n+  end\n end"},{"sha":"c3c721c78e935ae3b5ee01c712682d5e62ec9d81","filename":"spec/models/merchant_spec.rb","status":"modified","additions":108,"deletions":0,"changes":108,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/d90ba4ff895c01659918df22448cdcc14b0ed6a1/spec/models/merchant_spec.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/d90ba4ff895c01659918df22448cdcc14b0ed6a1/spec/models/merchant_spec.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/spec/models/merchant_spec.rb?ref=d90ba4ff895c01659918df22448cdcc14b0ed6a1","patch":"@@
        -10,4 +10,112 @@\n     it { should have_many(:transactions).through(:invoices)
        }\n     it { should have_many(:invoice_items).through(:invoices) }\n   end\n+  describe
        ''class methods'' do\n+    it ''can find top by revenue'' do\n+      merchant1
        = create(:merchant)\n+      merchant2 = create(:merchant)\n+      merchant3
        = create(:merchant)\n+      merchant4 = create(:merchant)\n+      merchant5
        = create(:merchant)\n+\n+      invoice1 = create(:invoice, merchant_id: merchant1.id)\n+      invoice2
        = create(:invoice, merchant_id: merchant2.id)\n+      invoice3 = create(:invoice,
        merchant_id: merchant3.id)\n+      invoice4 = create(:invoice, merchant_id:
        merchant4.id)\n+      invoice5 = create(:invoice, merchant_id: merchant5.id)\n+\n+      transaction1
        = create(:transaction, invoice_id: invoice1.id, result: ''success'')\n+      transaction2
        = create(:transaction, invoice_id: invoice2.id, result: ''success'')\n+      transaction3
        = create(:transaction, invoice_id: invoice3.id, result: ''success'')\n+      transaction4
        = create(:transaction, invoice_id: invoice4.id, result: ''success'')\n+      transaction5
        = create(:transaction, invoice_id: invoice5.id, result: ''success'')\n+\n+      invoice_item1
        = create(:invoice_item, invoice_id: invoice1.id, quantity: 5, unit_price:
        50)\n+      invoice_item2 = create(:invoice_item, invoice_id: invoice2.id,
        quantity: 2, unit_price: 300)\n+      invoice_item3 = create(:invoice_item,
        invoice_id: invoice3.id, quantity: 10, unit_price: 100)\n+      invoice_item4
        = create(:invoice_item, invoice_id: invoice4.id, quantity: 10, unit_price:
        200)\n+      invoice_item5 = create(:invoice_item, invoice_id: invoice5.id,
        quantity: 5, unit_price: 100)\n+\n+      expect(Merchant.most_revenue(3)).to
        eq([merchant4, merchant3, merchant2])\n+    end\n+    it ''can find top most_items_sold''
        do\n+      merchant1 = create(:merchant)\n+      merchant2 = create(:merchant)\n+      merchant3
        = create(:merchant)\n+      merchant4 = create(:merchant)\n+      merchant5
        = create(:merchant)\n+\n+      invoice1 = create(:invoice, merchant_id: merchant1.id)\n+      invoice2
        = create(:invoice, merchant_id: merchant2.id)\n+      invoice3 = create(:invoice,
        merchant_id: merchant3.id)\n+      invoice4 = create(:invoice, merchant_id:
        merchant4.id)\n+      invoice5 = create(:invoice, merchant_id: merchant5.id)\n+\n+      transaction1
        = create(:transaction, invoice_id: invoice1.id, result: ''success'')\n+      transaction2
        = create(:transaction, invoice_id: invoice2.id, result: ''success'')\n+      transaction3
        = create(:transaction, invoice_id: invoice3.id, result: ''success'')\n+      transaction4
        = create(:transaction, invoice_id: invoice4.id, result: ''success'')\n+      transaction5
        = create(:transaction, invoice_id: invoice5.id, result: ''success'')\n+\n+      invoice_item1
        = create(:invoice_item, invoice_id: invoice1.id, quantity: 6, unit_price:
        50)\n+      invoice_item2 = create(:invoice_item, invoice_id: invoice2.id,
        quantity: 2, unit_price: 300)\n+      invoice_item3 = create(:invoice_item,
        invoice_id: invoice3.id, quantity: 10, unit_price: 100)\n+      invoice_item4
        = create(:invoice_item, invoice_id: invoice4.id, quantity: 15, unit_price:
        200)\n+      invoice_item5 = create(:invoice_item, invoice_id: invoice5.id,
        quantity: 5, unit_price: 100)\n+\n+      expect(Merchant.most_items_sold(3)).to
        eq([merchant4, merchant3, merchant1])\n+    end\n+    it ''can total revenue
        across all merchants by date'' do\n+      merchant1 = create(:merchant)\n+      merchant2
        = create(:merchant)\n+      merchant3 = create(:merchant)\n+      merchant4
        = create(:merchant)\n+      merchant5 = create(:merchant)\n+\n+      invoice1
        = create(:invoice, merchant_id: merchant1.id)\n+      invoice2 = create(:invoice,
        merchant_id: merchant2.id)\n+      invoice3 = create(:invoice, merchant_id:
        merchant3.id)\n+      invoice4 = create(:invoice, merchant_id: merchant4.id)\n+      invoice5
        = create(:invoice, merchant_id: merchant5.id)\n+\n+      transaction1 = create(:transaction,
        invoice_id: invoice1.id, result: ''success'')\n+      transaction2 = create(:transaction,
        invoice_id: invoice2.id, result: ''success'')\n+      transaction3 = create(:transaction,
        invoice_id: invoice3.id, result: ''success'')\n+      transaction4 = create(:transaction,
        invoice_id: invoice4.id, result: ''success'')\n+      transaction5 = create(:transaction,
        invoice_id: invoice5.id, result: ''success'')\n+\n+      invoice_item1 = create(:invoice_item,
        invoice_id: invoice1.id, quantity: 6, unit_price: 50)\n+      invoice_item2
        = create(:invoice_item, invoice_id: invoice2.id, quantity: 2, unit_price:
        300)\n+      invoice_item3 = create(:invoice_item, invoice_id: invoice3.id,
        quantity: 10, unit_price: 100)\n+      invoice_item4 = create(:invoice_item,
        invoice_id: invoice4.id, quantity: 15, unit_price: 200)\n+      invoice_item5
        = create(:invoice_item, invoice_id: invoice5.id, quantity: 5, unit_price:
        100)\n+\n+      expect(Merchant.most_items_sold(3)).to eq([merchant4, merchant3,
        merchant1])\n+    end\n+  end\n+  describe ''instance methods'' do\n+    it
        ''can return total revenue for successful transactions'' do\n+      merchant
        = create(:merchant)\n+\n+      invoice1 = create(:invoice, merchant_id: merchant.id)\n+      invoice2
        = create(:invoice, merchant_id: merchant.id)\n+      invoice3 = create(:invoice,
        merchant_id: merchant.id)\n+      invoice4 = create(:invoice, merchant_id:
        merchant.id)\n+      invoice5 = create(:invoice, merchant_id: merchant.id)\n+\n+      transaction1
        = create(:transaction, invoice_id: invoice1.id, result: ''success'')\n+      transaction2
        = create(:transaction, invoice_id: invoice2.id, result: ''success'')\n+      transaction3
        = create(:transaction, invoice_id: invoice3.id, result: ''success'')\n+      transaction4
        = create(:transaction, invoice_id: invoice4.id, result: ''success'')\n+      transaction5
        = create(:transaction, invoice_id: invoice5.id, result: ''success'')\n+\n+      invoice_item1
        = create(:invoice_item, invoice_id: invoice1.id, quantity: 6, unit_price:
        50)\n+      invoice_item2 = create(:invoice_item, invoice_id: invoice2.id,
        quantity: 2, unit_price: 300)\n+      invoice_item3 = create(:invoice_item,
        invoice_id: invoice3.id, quantity: 10, unit_price: 100)\n+      invoice_item4
        = create(:invoice_item, invoice_id: invoice4.id, quantity: 15, unit_price:
        200)\n+      invoice_item5 = create(:invoice_item, invoice_id: invoice5.id,
        quantity: 5, unit_price: 100)\n+\n+      expect(merchant.successful_transactions_total).to
        eq(5400)\n+    end\n+  end\n end"},{"sha":"52ccd28cff3894c7c6d7e74e96a46922d94a75ba","filename":"spec/requests/api/v1/customer_business_logic_spec.rb","status":"added","additions":28,"deletions":0,"changes":28,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/d90ba4ff895c01659918df22448cdcc14b0ed6a1/spec/requests/api/v1/customer_business_logic_spec.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/d90ba4ff895c01659918df22448cdcc14b0ed6a1/spec/requests/api/v1/customer_business_logic_spec.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/spec/requests/api/v1/customer_business_logic_spec.rb?ref=d90ba4ff895c01659918df22448cdcc14b0ed6a1","patch":"@@
        -0,0 +1,28 @@\n+require ''rails_helper''\n+\n+describe ''API for customer
        favorite merchant'' do\n+  context ''GET api/v1/customers/:id/favorite_merchant''
        do\n+    it ''returns a merchant for the customer\\''s most successful transactions''
        do\n+      customer = create(:customer)\n+\n+      merchant1 = create(:merchant)\n+      merchant2
        = create(:merchant)\n+\n+      invoice1 = create(:invoice, merchant_id: merchant1.id,
        customer_id: customer.id)\n+      invoice2 = create(:invoice, merchant_id:
        merchant1.id, customer_id: customer.id)\n+      invoice3 = create(:invoice,
        merchant_id: merchant2.id, customer_id: customer.id)\n+\n+      trans1 = create(:transaction,
        invoice_id: invoice1.id, result: ''success'')\n+      trans2 = create(:transaction,
        invoice_id: invoice2.id, result: ''success'')\n+      trans3 = create(:transaction,
        invoice_id: invoice3.id, result: ''success'')\n+\n+      get \"/api/v1/customers/#{customer.id}/favorite_merchant\"\n+\n+      expect(response).to
        be_successful\n+\n+      merch = JSON.parse(response.body)\n+\n+      expect(merch[''id'']).to
        eq(merchant1.id)\n+    end\n+  end\n+end"},{"sha":"414ecd6a504240c76825e0a97ff63257715978f4","filename":"spec/requests/api/v1/items_business_logic_request_spec.rb","status":"added","additions":78,"deletions":0,"changes":78,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/d90ba4ff895c01659918df22448cdcc14b0ed6a1/spec/requests/api/v1/items_business_logic_request_spec.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/d90ba4ff895c01659918df22448cdcc14b0ed6a1/spec/requests/api/v1/items_business_logic_request_spec.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/spec/requests/api/v1/items_business_logic_request_spec.rb?ref=d90ba4ff895c01659918df22448cdcc14b0ed6a1","patch":"@@
        -0,0 +1,78 @@\n+require ''rails_helper''\n+\n+describe ''Api for index business
        logic'' do\n+  context ''GET /api/v1/items/most_revenue?quantity=x'' do\n+    it
        ''returns api for the top items ranked by revenue'' do\n+      item1 = create(:item)\n+      item2
        = create(:item)\n+      item3 = create(:item)\n+\n+      invoice1 = create(:invoice)\n+      invoice2
        = create(:invoice)\n+\n+      invoice_item = create(:invoice_item, invoice_id:
        invoice1.id, item_id: item1.id, unit_price: 80, quantity: 4)\n+      invoice_item
        = create(:invoice_item, invoice_id: invoice2.id, item_id: item2.id, unit_price:
        40, quantity: 20)\n+      invoice_item = create(:invoice_item, invoice_id:
        invoice1.id, item_id: item3.id, unit_price: 80, quantity: 2)\n+\n+      transaction1
        = create(:transaction, invoice_id: invoice1.id, result: ''success'')\n+      transaction2
        = create(:transaction, invoice_id: invoice2.id, result: ''success'')\n+\n+      expect(Item.most_revenue(3)).to
        eq([item2, item1, item3])\n+\n+      get \"/api/v1/items/most_revenue?quantity=3\"\n+\n+      expect(response).to
        be_successful\n+\n+      items = JSON.parse(response.body)\n+\n+      expect(items.length).to
        eq(3)\n+    end\n+    it ''returns api for the top items ranked by total sold''
        do\n+      item1 = create(:item)\n+      item2 = create(:item)\n+      item3
        = create(:item)\n+\n+      invoice1 = create(:invoice)\n+      invoice2 =
        create(:invoice)\n+\n+      invoice_item = create(:invoice_item, invoice_id:
        invoice1.id, item_id: item1.id, unit_price: 80, quantity: 4)\n+      invoice_item
        = create(:invoice_item, invoice_id: invoice2.id, item_id: item2.id, unit_price:
        40, quantity: 20)\n+      invoice_item = create(:invoice_item, invoice_id:
        invoice1.id, item_id: item3.id, unit_price: 80, quantity: 2)\n+\n+      transaction1
        = create(:transaction, invoice_id: invoice1.id, result: ''success'')\n+      transaction2
        = create(:transaction, invoice_id: invoice2.id, result: ''success'')\n+\n+      expect(Item.most_revenue(3)).to
        eq([item2, item1, item3])\n+\n+      get \"/api/v1/items/most_items?quantity=3\"\n+\n+      expect(response).to
        be_successful\n+\n+      items = JSON.parse(response.body)\n+\n+      expect(items.length).to
        eq(3)\n+    end\n+    it ''returns the date for an item when it sold the most''
        do\n+      item = create(:item)\n+\n+      invoice1 = create(:invoice, updated_at:
        \"2012-03-09 08:57:21 UTC\")\n+      invoice2 = create(:invoice, updated_at:
        \"2012-04-09 08:57:21 UTC\")\n+      invoice3 = create(:invoice, updated_at:
        \"2012-05-09 08:57:21 UTC\")\n+\n+      invoice_item = create(:invoice_item,
        invoice_id: invoice1.id, item_id: item.id, unit_price: 80, quantity: 4)\n+      invoice_item
        = create(:invoice_item, invoice_id: invoice2.id, item_id: item.id, unit_price:
        80, quantity: 20)\n+      invoice_item = create(:invoice_item, invoice_id:
        invoice3.id, item_id: item.id, unit_price: 80, quantity: 2)\n+\n+      transaction1
        = create(:transaction, invoice_id: invoice1.id, result: ''success'')\n+      transaction2
        = create(:transaction, invoice_id: invoice2.id, result: ''success'')\n+\n+      get
        \"/api/v1/items/#{item.id}/best_day\"\n+\n+      expect(response).to be_successful\n+\n+      date
        = JSON.parse(response.body)\n+\n+      expect(date).to eq(\"2012-04-09T08:57:21.000Z\")\n+    end\n+  end\n+end"},{"sha":"5a85d4e1f5267364ae97529ab3dcb991b07ffd61","filename":"spec/requests/api/v1/merchant_business_logic_spec.rb","status":"added","additions":103,"deletions":0,"changes":103,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/d90ba4ff895c01659918df22448cdcc14b0ed6a1/spec/requests/api/v1/merchant_business_logic_spec.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/d90ba4ff895c01659918df22448cdcc14b0ed6a1/spec/requests/api/v1/merchant_business_logic_spec.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/spec/requests/api/v1/merchant_business_logic_spec.rb?ref=d90ba4ff895c01659918df22448cdcc14b0ed6a1","patch":"@@
        -0,0 +1,103 @@\n+require ''rails_helper''\n+\n+describe ''Api for top x merchants
        by revenue'' do\n+  context ''GET /api/v1/merchants/most_revenue?quantity=x''
        do\n+    it ''shows top merchants by revenue in json'' do\n+      merchant1
        = create(:merchant)\n+      merchant2 = create(:merchant)\n+      merchant3
        = create(:merchant)\n+      merchant4 = create(:merchant)\n+      merchant5
        = create(:merchant)\n+\n+      invoice1 = create(:invoice, merchant_id: merchant1.id)\n+      invoice2
        = create(:invoice, merchant_id: merchant2.id)\n+      invoice3 = create(:invoice,
        merchant_id: merchant3.id)\n+      invoice4 = create(:invoice, merchant_id:
        merchant4.id)\n+      invoice5 = create(:invoice, merchant_id: merchant5.id)\n+\n+      transaction1
        = create(:transaction, invoice_id: invoice1.id, result: ''success'')\n+      transaction2
        = create(:transaction, invoice_id: invoice2.id, result: ''success'')\n+      transaction3
        = create(:transaction, invoice_id: invoice3.id, result: ''success'')\n+      transaction4
        = create(:transaction, invoice_id: invoice4.id, result: ''success'')\n+      transaction5
        = create(:transaction, invoice_id: invoice5.id, result: ''success'')\n+\n+      invoice_item1
        = create(:invoice_item, invoice_id: invoice1.id, quantity: 5, unit_price:
        50)\n+      invoice_item2 = create(:invoice_item, invoice_id: invoice2.id,
        quantity: 2, unit_price: 300)\n+      invoice_item3 = create(:invoice_item,
        invoice_id: invoice3.id, quantity: 10, unit_price: 100)\n+      invoice_item4
        = create(:invoice_item, invoice_id: invoice4.id, quantity: 10, unit_price:
        200)\n+      invoice_item5 = create(:invoice_item, invoice_id: invoice5.id,
        quantity: 5, unit_price: 100)\n+\n+      get ''/api/v1/merchants/most_revenue?quantity=3''\n+\n+      expect(response).to
        be_successful\n+\n+      merchants = JSON.parse(response.body)\n+\n+      expect(merchants.first[''id'']).to
        eq(merchant4.id)\n+      expect(merchants.last[''id'']).to eq(merchant2.id)\n+    end\n+    it
        ''shows top merchants by most items sold in json'' do\n+      merchant1 =
        create(:merchant)\n+      merchant2 = create(:merchant)\n+      merchant3
        = create(:merchant)\n+      merchant4 = create(:merchant)\n+      merchant5
        = create(:merchant)\n+\n+      invoice1 = create(:invoice, merchant_id: merchant1.id)\n+      invoice2
        = create(:invoice, merchant_id: merchant2.id)\n+      invoice3 = create(:invoice,
        merchant_id: merchant3.id)\n+      invoice4 = create(:invoice, merchant_id:
        merchant4.id)\n+      invoice5 = create(:invoice, merchant_id: merchant5.id)\n+\n+      transaction1
        = create(:transaction, invoice_id: invoice1.id, result: ''success'')\n+      transaction2
        = create(:transaction, invoice_id: invoice2.id, result: ''success'')\n+      transaction3
        = create(:transaction, invoice_id: invoice3.id, result: ''success'')\n+      transaction4
        = create(:transaction, invoice_id: invoice4.id, result: ''success'')\n+      transaction5
        = create(:transaction, invoice_id: invoice5.id, result: ''success'')\n+\n+      invoice_item1
        = create(:invoice_item, invoice_id: invoice1.id, quantity: 6, unit_price:
        50)\n+      invoice_item2 = create(:invoice_item, invoice_id: invoice2.id,
        quantity: 2, unit_price: 300)\n+      invoice_item3 = create(:invoice_item,
        invoice_id: invoice3.id, quantity: 10, unit_price: 100)\n+      invoice_item4
        = create(:invoice_item, invoice_id: invoice4.id, quantity: 11, unit_price:
        200)\n+      invoice_item5 = create(:invoice_item, invoice_id: invoice5.id,
        quantity: 5, unit_price: 100)\n+\n+      get ''/api/v1/merchants/most_items?quantity=3''\n+\n+      expect(response).to
        be_successful\n+\n+      merchants = JSON.parse(response.body)\n+\n+      expect(merchants.first[''id'']).to
        eq(merchant4.id)\n+      expect(merchants.last[''id'']).to eq(merchant1.id)\n+    end\n+    it
        ''can return total revenue for successful transactions'' do\n+      merchant
        = create(:merchant)\n+\n+      invoice1 = create(:invoice, merchant_id: merchant.id)\n+      invoice2
        = create(:invoice, merchant_id: merchant.id)\n+      invoice3 = create(:invoice,
        merchant_id: merchant.id)\n+      invoice4 = create(:invoice, merchant_id:
        merchant.id)\n+      invoice5 = create(:invoice, merchant_id: merchant.id)\n+\n+      transaction1
        = create(:transaction, invoice_id: invoice1.id, result: ''success'')\n+      transaction2
        = create(:transaction, invoice_id: invoice2.id, result: ''success'')\n+      transaction3
        = create(:transaction, invoice_id: invoice3.id, result: ''success'')\n+      transaction4
        = create(:transaction, invoice_id: invoice4.id, result: ''success'')\n+      transaction5
        = create(:transaction, invoice_id: invoice5.id, result: ''success'')\n+\n+      invoice_item1
        = create(:invoice_item, invoice_id: invoice1.id, quantity: 6, unit_price:
        50)\n+      invoice_item2 = create(:invoice_item, invoice_id: invoice2.id,
        quantity: 2, unit_price: 300)\n+      invoice_item3 = create(:invoice_item,
        invoice_id: invoice3.id, quantity: 10, unit_price: 100)\n+      invoice_item4
        = create(:invoice_item, invoice_id: invoice4.id, quantity: 15, unit_price:
        200)\n+      invoice_item5 = create(:invoice_item, invoice_id: invoice5.id,
        quantity: 5, unit_price: 100)\n+\n+      get \"/api/v1/merchants/#{merchant.id}/revenue\"\n+\n+      expect(response).to
        be_successful\n+\n+      total = JSON.parse(response.body)\n+\n+      expect(total[''revenue'']).to
        eq(\"54.0\")\n+    end\n+  end\n+end"}]}'
    http_version: 
  recorded_at: Fri, 24 Aug 2018 14:27:33 GMT
- request:
    method: get
    uri: https://api.github.com/repos/1powechri2/Rails-Engine/commits/c86e30f34d12e4c32cde96de23c752ad010f4e48
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Faraday v0.15.2
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - GitHub.com
      Date:
      - Fri, 24 Aug 2018 14:27:21 GMT
      Content-Type:
      - application/json; charset=utf-8
      Transfer-Encoding:
      - chunked
      Status:
      - 200 OK
      X-Ratelimit-Limit:
      - '60'
      X-Ratelimit-Remaining:
      - '47'
      X-Ratelimit-Reset:
      - '1535122878'
      Cache-Control:
      - public, max-age=60, s-maxage=60
      Vary:
      - Accept
      Etag:
      - W/"685487a913faeb287b20608e93b6ef72"
      Last-Modified:
      - Fri, 17 Aug 2018 06:13:27 GMT
      X-Github-Media-Type:
      - github.v3; format=json
      Access-Control-Expose-Headers:
      - ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining,
        X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
      Access-Control-Allow-Origin:
      - "*"
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      X-Frame-Options:
      - deny
      X-Content-Type-Options:
      - nosniff
      X-Xss-Protection:
      - 1; mode=block
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Content-Security-Policy:
      - default-src 'none'
      X-Runtime-Rack:
      - '0.088918'
      X-Github-Request-Id:
      - 23AD:559F:4A0868:B9DC7F:5B8015C9
    body:
      encoding: ASCII-8BIT
      string: '{"sha":"c86e30f34d12e4c32cde96de23c752ad010f4e48","node_id":"MDY6Q29tbWl0MTQ0NjI3MjQxOmM4NmUzMGYzNGQxMmU0YzMyY2RlOTZkZTIzYzc1MmFkMDEwZjRlNDg=","commit":{"author":{"name":"Eliot
        Swank","email":"eliotswank@gmail.com","date":"2018-08-17T06:13:27Z"},"committer":{"name":"Eliot
        Swank","email":"eliotswank@gmail.com","date":"2018-08-17T06:13:27Z"},"message":"changed
        postgres spelling","tree":{"sha":"47f68319c11cc5bc70663682a26c3e7e0532151b","url":"https://api.github.com/repos/1powechri2/Rails-Engine/git/trees/47f68319c11cc5bc70663682a26c3e7e0532151b"},"url":"https://api.github.com/repos/1powechri2/Rails-Engine/git/commits/c86e30f34d12e4c32cde96de23c752ad010f4e48","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/c86e30f34d12e4c32cde96de23c752ad010f4e48","html_url":"https://github.com/1powechri2/Rails-Engine/commit/c86e30f34d12e4c32cde96de23c752ad010f4e48","comments_url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/c86e30f34d12e4c32cde96de23c752ad010f4e48/comments","author":{"login":"EMSwank","id":31110190,"node_id":"MDQ6VXNlcjMxMTEwMTkw","avatar_url":"https://avatars1.githubusercontent.com/u/31110190?v=4","gravatar_id":"","url":"https://api.github.com/users/EMSwank","html_url":"https://github.com/EMSwank","followers_url":"https://api.github.com/users/EMSwank/followers","following_url":"https://api.github.com/users/EMSwank/following{/other_user}","gists_url":"https://api.github.com/users/EMSwank/gists{/gist_id}","starred_url":"https://api.github.com/users/EMSwank/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EMSwank/subscriptions","organizations_url":"https://api.github.com/users/EMSwank/orgs","repos_url":"https://api.github.com/users/EMSwank/repos","events_url":"https://api.github.com/users/EMSwank/events{/privacy}","received_events_url":"https://api.github.com/users/EMSwank/received_events","type":"User","site_admin":false},"committer":{"login":"EMSwank","id":31110190,"node_id":"MDQ6VXNlcjMxMTEwMTkw","avatar_url":"https://avatars1.githubusercontent.com/u/31110190?v=4","gravatar_id":"","url":"https://api.github.com/users/EMSwank","html_url":"https://github.com/EMSwank","followers_url":"https://api.github.com/users/EMSwank/followers","following_url":"https://api.github.com/users/EMSwank/following{/other_user}","gists_url":"https://api.github.com/users/EMSwank/gists{/gist_id}","starred_url":"https://api.github.com/users/EMSwank/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EMSwank/subscriptions","organizations_url":"https://api.github.com/users/EMSwank/orgs","repos_url":"https://api.github.com/users/EMSwank/repos","events_url":"https://api.github.com/users/EMSwank/events{/privacy}","received_events_url":"https://api.github.com/users/EMSwank/received_events","type":"User","site_admin":false},"parents":[{"sha":"d90ba4ff895c01659918df22448cdcc14b0ed6a1","url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/d90ba4ff895c01659918df22448cdcc14b0ed6a1","html_url":"https://github.com/1powechri2/Rails-Engine/commit/d90ba4ff895c01659918df22448cdcc14b0ed6a1"}],"stats":{"total":2,"additions":1,"deletions":1},"files":[{"sha":"874d275ddd2d30ff21ec8ab3872725e6f33c2a64","filename":"README.md","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/c86e30f34d12e4c32cde96de23c752ad010f4e48/README.md","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/c86e30f34d12e4c32cde96de23c752ad010f4e48/README.md","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/README.md?ref=c86e30f34d12e4c32cde96de23c752ad010f4e48","patch":"@@
        -1,6 +1,6 @@\n # Rails Engine\n \n-Rails Engine is a Rails API with a postgresql
        database project built in Turing School of Software and Design''s Module 3
        Backend course. This API allows consuption of sales data of an Etsy-style
        store.\n+Rails Engine is a Rails API with a PostgresQL database project built
        in Turing School of Software and Design''s Module 3 Backend course. This API
        allows consuption of sales data of an Etsy-style store.\n \n ### Setup\n "}]}'
    http_version: 
  recorded_at: Fri, 24 Aug 2018 14:27:34 GMT
- request:
    method: get
    uri: https://api.github.com/repos/1powechri2/Rails-Engine/commits/f69a1918d54fb1bf6e0fbf5eb8bc540fb443f822
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Faraday v0.15.2
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - GitHub.com
      Date:
      - Fri, 24 Aug 2018 14:27:21 GMT
      Content-Type:
      - application/json; charset=utf-8
      Transfer-Encoding:
      - chunked
      Status:
      - 200 OK
      X-Ratelimit-Limit:
      - '60'
      X-Ratelimit-Remaining:
      - '46'
      X-Ratelimit-Reset:
      - '1535122878'
      Cache-Control:
      - public, max-age=60, s-maxage=60
      Vary:
      - Accept
      Etag:
      - W/"c35896dc1934134f2331be9cf3e773ca"
      Last-Modified:
      - Fri, 17 Aug 2018 14:14:34 GMT
      X-Github-Media-Type:
      - github.v3; format=json
      Access-Control-Expose-Headers:
      - ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining,
        X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
      Access-Control-Allow-Origin:
      - "*"
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      X-Frame-Options:
      - deny
      X-Content-Type-Options:
      - nosniff
      X-Xss-Protection:
      - 1; mode=block
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Content-Security-Policy:
      - default-src 'none'
      X-Runtime-Rack:
      - '0.137378'
      X-Github-Request-Id:
      - 218D:55A0:B0F50A:18CF2FB:5B8015C9
    body:
      encoding: ASCII-8BIT
      string: '{"sha":"f69a1918d54fb1bf6e0fbf5eb8bc540fb443f822","node_id":"MDY6Q29tbWl0MTQ0NjI3MjQxOmY2OWExOTE4ZDU0ZmIxYmY2ZTBmYmY1ZWI4YmM1NDBmYjQ0M2Y4MjI=","commit":{"author":{"name":"Christopher
        Powell","email":"34900620+1powechri2@users.noreply.github.com","date":"2018-08-17T14:14:34Z"},"committer":{"name":"GitHub","email":"noreply@github.com","date":"2018-08-17T14:14:34Z"},"message":"Merge
        pull request #20 from 1powechri2/readme\n\nReadme","tree":{"sha":"47f68319c11cc5bc70663682a26c3e7e0532151b","url":"https://api.github.com/repos/1powechri2/Rails-Engine/git/trees/47f68319c11cc5bc70663682a26c3e7e0532151b"},"url":"https://api.github.com/repos/1powechri2/Rails-Engine/git/commits/f69a1918d54fb1bf6e0fbf5eb8bc540fb443f822","comment_count":0,"verification":{"verified":true,"reason":"valid","signature":"-----BEGIN
        PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJbdthKCRBK7hj4Ov3rIwAAdHIIAD8psiatnHtAd6bRFaGyzEaK\nXo4JUmvu6pflXzVEpV4PzxdIhP/v9c+KlPohXnpSEc56WBKgLBEt7dM8y9rnkXuv\nLKN46nmTyzmu1thJIRM9vy7O+KmCIhPzuAJgneAxCKJBPs306PH5PB07bRBRtEXj\nkisuWVFXa6lP4+FjlEqzrEGppjRzr3l3FCCaJp5oMySvK+J/W8UX2lPSVCkI8CuQ\nipSWQqM5rxKmtQpchsQ1pPbDQz1CesI91mb9Rci8StrHBsIlaJRcsS+C3AbA70z5\n4qvYWc8NGAaAecp+LLqzwdh5dA3EY9sOVwOTu2RstOdw3QEKp+PtxuGjCIsXjoQ=\n=poW9\n-----END
        PGP SIGNATURE-----\n","payload":"tree 47f68319c11cc5bc70663682a26c3e7e0532151b\nparent
        cd10d7c84f4e7208a681adce61facf6b164599be\nparent c86e30f34d12e4c32cde96de23c752ad010f4e48\nauthor
        Christopher Powell <34900620+1powechri2@users.noreply.github.com> 1534515274
        -0600\ncommitter GitHub <noreply@github.com> 1534515274 -0600\n\nMerge pull
        request #20 from 1powechri2/readme\n\nReadme"}},"url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/f69a1918d54fb1bf6e0fbf5eb8bc540fb443f822","html_url":"https://github.com/1powechri2/Rails-Engine/commit/f69a1918d54fb1bf6e0fbf5eb8bc540fb443f822","comments_url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/f69a1918d54fb1bf6e0fbf5eb8bc540fb443f822/comments","author":{"login":"1powechri2","id":34900620,"node_id":"MDQ6VXNlcjM0OTAwNjIw","avatar_url":"https://avatars1.githubusercontent.com/u/34900620?v=4","gravatar_id":"","url":"https://api.github.com/users/1powechri2","html_url":"https://github.com/1powechri2","followers_url":"https://api.github.com/users/1powechri2/followers","following_url":"https://api.github.com/users/1powechri2/following{/other_user}","gists_url":"https://api.github.com/users/1powechri2/gists{/gist_id}","starred_url":"https://api.github.com/users/1powechri2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1powechri2/subscriptions","organizations_url":"https://api.github.com/users/1powechri2/orgs","repos_url":"https://api.github.com/users/1powechri2/repos","events_url":"https://api.github.com/users/1powechri2/events{/privacy}","received_events_url":"https://api.github.com/users/1powechri2/received_events","type":"User","site_admin":false},"committer":{"login":"web-flow","id":19864447,"node_id":"MDQ6VXNlcjE5ODY0NDQ3","avatar_url":"https://avatars3.githubusercontent.com/u/19864447?v=4","gravatar_id":"","url":"https://api.github.com/users/web-flow","html_url":"https://github.com/web-flow","followers_url":"https://api.github.com/users/web-flow/followers","following_url":"https://api.github.com/users/web-flow/following{/other_user}","gists_url":"https://api.github.com/users/web-flow/gists{/gist_id}","starred_url":"https://api.github.com/users/web-flow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/web-flow/subscriptions","organizations_url":"https://api.github.com/users/web-flow/orgs","repos_url":"https://api.github.com/users/web-flow/repos","events_url":"https://api.github.com/users/web-flow/events{/privacy}","received_events_url":"https://api.github.com/users/web-flow/received_events","type":"User","site_admin":false},"parents":[{"sha":"cd10d7c84f4e7208a681adce61facf6b164599be","url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/cd10d7c84f4e7208a681adce61facf6b164599be","html_url":"https://github.com/1powechri2/Rails-Engine/commit/cd10d7c84f4e7208a681adce61facf6b164599be"},{"sha":"c86e30f34d12e4c32cde96de23c752ad010f4e48","url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/c86e30f34d12e4c32cde96de23c752ad010f4e48","html_url":"https://github.com/1powechri2/Rails-Engine/commit/c86e30f34d12e4c32cde96de23c752ad010f4e48"}],"stats":{"total":52,"additions":38,"deletions":14},"files":[{"sha":"874d275ddd2d30ff21ec8ab3872725e6f33c2a64","filename":"README.md","status":"modified","additions":32,"deletions":13,"changes":45,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/f69a1918d54fb1bf6e0fbf5eb8bc540fb443f822/README.md","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/f69a1918d54fb1bf6e0fbf5eb8bc540fb443f822/README.md","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/README.md?ref=f69a1918d54fb1bf6e0fbf5eb8bc540fb443f822","patch":"@@
        -1,24 +1,43 @@\n-# README\n+# Rails Engine\n \n-This README would normally
        document whatever steps are necessary to get the\n-application up and running.\n+Rails
        Engine is a Rails API with a PostgresQL database project built in Turing School
        of Software and Design''s Module 3 Backend course. This API allows consuption
        of sales data of an Etsy-style store.\n \n-Things you may want to cover:\n+###
        Setup\n \n-* Ruby version\n+Clone the repository\n \n-* System dependencies\n+```\n+$
        git clone https://github.com/1powechri2/Rails-Engine.git\n+```\n \n-* Configuration\n+Bundle
        the gems\n \n-* Database creation\n+```\n+$ bundle\n+$ bundle update\n+```\n
        \n-* Database initialization\n+Next, run `rake` to create, migrate, and seed
        the database.\n \n-* How to run the test suite\n+```\n+$ rake\n+```\n \n-*
        Services (job queues, cache servers, search engines, etc.)\n+To see the endpoints
        run the Rails server\n \n-* Deployment instructions\n+```\n+$ rails s\n+```\n
        \n-* ...\n+To run the test suite\n+\n+```\n+$ rspec\n+```\n+\n+---\n+\n+###
        Software Versions\n+\n+- Ruby 2.4.1\n+- Rails 5.2.1"},{"sha":"90f7ec74359423a6baa53a38c3f69e61b93ec5c1","filename":"spec/spec_helper.rb","status":"modified","additions":6,"deletions":1,"changes":7,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/f69a1918d54fb1bf6e0fbf5eb8bc540fb443f822/spec/spec_helper.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/f69a1918d54fb1bf6e0fbf5eb8bc540fb443f822/spec/spec_helper.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/spec/spec_helper.rb?ref=f69a1918d54fb1bf6e0fbf5eb8bc540fb443f822","patch":"@@
        -4,7 +4,12 @@\n # this file to always be loaded, without a need to explicitly
        require it in any\n # files.\n require ''simplecov''\n-SimpleCov.start ''rails''\n+SimpleCov.start
        ''rails'' do\n+ add_filter \"app/channels/application_cable/channel.rb\"\n+
        add_filter \"app/channels/application_cable/connection.rb\"\n+ add_filter
        \"app/jobs/application_job.rb\"\n+ add_filter \"app/mailers/application_mailer.rb\"\n+end\n
        # Given that it is always loaded, you are encouraged to keep this file as\n
        # light-weight as possible. Requiring heavyweight dependencies from this file\n
        # will add to the boot time of your test suite on EVERY test run, even for
        an"}]}'
    http_version: 
  recorded_at: Fri, 24 Aug 2018 14:27:34 GMT
- request:
    method: get
    uri: https://api.github.com/repos/1powechri2/Rails-Engine/commits/06088a8ed3982fdf670bdc9dd52661dd1dc87a36
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Faraday v0.15.2
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - GitHub.com
      Date:
      - Fri, 24 Aug 2018 14:27:22 GMT
      Content-Type:
      - application/json; charset=utf-8
      Transfer-Encoding:
      - chunked
      Status:
      - 200 OK
      X-Ratelimit-Limit:
      - '60'
      X-Ratelimit-Remaining:
      - '45'
      X-Ratelimit-Reset:
      - '1535122878'
      Cache-Control:
      - public, max-age=60, s-maxage=60
      Vary:
      - Accept
      Etag:
      - W/"de2f9825e9e1f5473d426fe76975e928"
      Last-Modified:
      - Thu, 16 Aug 2018 18:11:30 GMT
      X-Github-Media-Type:
      - github.v3; format=json
      Access-Control-Expose-Headers:
      - ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining,
        X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
      Access-Control-Allow-Origin:
      - "*"
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      X-Frame-Options:
      - deny
      X-Content-Type-Options:
      - nosniff
      X-Xss-Protection:
      - 1; mode=block
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Content-Security-Policy:
      - default-src 'none'
      X-Runtime-Rack:
      - '0.094438'
      X-Github-Request-Id:
      - 0E51:55A0:B0F526:18CF339:5B8015C9
    body:
      encoding: ASCII-8BIT
      string: '{"sha":"06088a8ed3982fdf670bdc9dd52661dd1dc87a36","node_id":"MDY6Q29tbWl0MTQ0NjI3MjQxOjA2MDg4YThlZDM5ODJmZGY2NzBiZGM5ZGQ1MjY2MWRkMWRjODdhMzY=","commit":{"author":{"name":"Chris
        Powell","email":"chris.ian.powell@gmail.com","date":"2018-08-16T18:11:30Z"},"committer":{"name":"Chris
        Powell","email":"chris.ian.powell@gmail.com","date":"2018-08-16T18:11:30Z"},"message":"adds
        top merchants by revenue logic","tree":{"sha":"78b90f8aa6520a5bd338801a49a1d887165468ff","url":"https://api.github.com/repos/1powechri2/Rails-Engine/git/trees/78b90f8aa6520a5bd338801a49a1d887165468ff"},"url":"https://api.github.com/repos/1powechri2/Rails-Engine/git/commits/06088a8ed3982fdf670bdc9dd52661dd1dc87a36","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/06088a8ed3982fdf670bdc9dd52661dd1dc87a36","html_url":"https://github.com/1powechri2/Rails-Engine/commit/06088a8ed3982fdf670bdc9dd52661dd1dc87a36","comments_url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/06088a8ed3982fdf670bdc9dd52661dd1dc87a36/comments","author":{"login":"1powechri2","id":34900620,"node_id":"MDQ6VXNlcjM0OTAwNjIw","avatar_url":"https://avatars1.githubusercontent.com/u/34900620?v=4","gravatar_id":"","url":"https://api.github.com/users/1powechri2","html_url":"https://github.com/1powechri2","followers_url":"https://api.github.com/users/1powechri2/followers","following_url":"https://api.github.com/users/1powechri2/following{/other_user}","gists_url":"https://api.github.com/users/1powechri2/gists{/gist_id}","starred_url":"https://api.github.com/users/1powechri2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1powechri2/subscriptions","organizations_url":"https://api.github.com/users/1powechri2/orgs","repos_url":"https://api.github.com/users/1powechri2/repos","events_url":"https://api.github.com/users/1powechri2/events{/privacy}","received_events_url":"https://api.github.com/users/1powechri2/received_events","type":"User","site_admin":false},"committer":{"login":"1powechri2","id":34900620,"node_id":"MDQ6VXNlcjM0OTAwNjIw","avatar_url":"https://avatars1.githubusercontent.com/u/34900620?v=4","gravatar_id":"","url":"https://api.github.com/users/1powechri2","html_url":"https://github.com/1powechri2","followers_url":"https://api.github.com/users/1powechri2/followers","following_url":"https://api.github.com/users/1powechri2/following{/other_user}","gists_url":"https://api.github.com/users/1powechri2/gists{/gist_id}","starred_url":"https://api.github.com/users/1powechri2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1powechri2/subscriptions","organizations_url":"https://api.github.com/users/1powechri2/orgs","repos_url":"https://api.github.com/users/1powechri2/repos","events_url":"https://api.github.com/users/1powechri2/events{/privacy}","received_events_url":"https://api.github.com/users/1powechri2/received_events","type":"User","site_admin":false},"parents":[{"sha":"5de05a9ae067d5b48d648040c6463708acbfdd76","url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/5de05a9ae067d5b48d648040c6463708acbfdd76","html_url":"https://github.com/1powechri2/Rails-Engine/commit/5de05a9ae067d5b48d648040c6463708acbfdd76"}],"stats":{"total":84,"additions":84,"deletions":0},"files":[{"sha":"141deae137aa35281dc0d15377ece3e43637c888","filename":"app/controllers/api/v1/merchants/most_revenue_controller.rb","status":"added","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/06088a8ed3982fdf670bdc9dd52661dd1dc87a36/app/controllers/api/v1/merchants/most_revenue_controller.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/06088a8ed3982fdf670bdc9dd52661dd1dc87a36/app/controllers/api/v1/merchants/most_revenue_controller.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/controllers/api/v1/merchants/most_revenue_controller.rb?ref=06088a8ed3982fdf670bdc9dd52661dd1dc87a36","patch":"@@
        -0,0 +1,5 @@\n+class Api::V1::Merchants::MostRevenueController < ApplicationController\n+  def
        index\n+    render json: Merchant.most_revenue(params[:quantity])\n+  end\n+end"},{"sha":"4a26280c0f9e8d2f7840d471542629cd08cf3a9e","filename":"app/models/merchant.rb","status":"modified","additions":9,"deletions":0,"changes":9,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/06088a8ed3982fdf670bdc9dd52661dd1dc87a36/app/models/merchant.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/06088a8ed3982fdf670bdc9dd52661dd1dc87a36/app/models/merchant.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/models/merchant.rb?ref=06088a8ed3982fdf670bdc9dd52661dd1dc87a36","patch":"@@
        -4,4 +4,13 @@ class Merchant < ApplicationRecord\n   has_many :items\n   has_many
        :transactions, through: :invoices\n   has_many :invoice_items, through: :invoices\n+\n+  def
        self.most_revenue(x = 5)\n+    select(''merchants.*, sum(invoice_items.unit_price
        * invoice_items.quantity) as revenue'')\n+    .joins(:transactions, :invoice_items)\n+    .where(transactions:
        {result: ''success''})\n+    .group(:id)\n+    .order(''revenue desc'')\n+    .limit(x)\n+  end\n
        end"},{"sha":"7c97e0fba4065da7d5b1e7c96870b765cc6918a7","filename":"config/routes.rb","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/06088a8ed3982fdf670bdc9dd52661dd1dc87a36/config/routes.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/06088a8ed3982fdf670bdc9dd52661dd1dc87a36/config/routes.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/config/routes.rb?ref=06088a8ed3982fdf670bdc9dd52661dd1dc87a36","patch":"@@
        -5,6 +5,7 @@\n       get ''/merchants/find_all'', to: ''merchants/search#index''\n       get
        ''/merchants/:id/items'', to: ''merchants/items_relation#index''\n       get
        ''/merchants/:id/invoices'', to: ''merchants/invoices_relation#index''\n+      get
        ''/merchants/most_revenue'', to: ''merchants/most_revenue#index''\n       resources
        :merchants, only: [:index, :show]\n       get ''/transactions/find'', to:
        ''transactions/search#show''\n       get ''/transactions/find_all'', to: ''transactions/search#index''"},{"sha":"5511b1f6c8e0636da0d0c2bfb0b2c7b1278d93eb","filename":"spec/models/merchant_spec.rb","status":"modified","additions":29,"deletions":0,"changes":29,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/06088a8ed3982fdf670bdc9dd52661dd1dc87a36/spec/models/merchant_spec.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/06088a8ed3982fdf670bdc9dd52661dd1dc87a36/spec/models/merchant_spec.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/spec/models/merchant_spec.rb?ref=06088a8ed3982fdf670bdc9dd52661dd1dc87a36","patch":"@@
        -10,4 +10,33 @@\n     it { should have_many(:transactions).through(:invoices)
        }\n     it { should have_many(:invoice_items).through(:invoices) }\n   end\n+  describe
        ''class methods'' do\n+    it ''can find top by revenue'' do\n+      merchant1
        = create(:merchant)\n+      merchant2 = create(:merchant)\n+      merchant3
        = create(:merchant)\n+      merchant4 = create(:merchant)\n+      merchant5
        = create(:merchant)\n+\n+      invoice1 = create(:invoice, merchant_id: merchant1.id)\n+      invoice2
        = create(:invoice, merchant_id: merchant2.id)\n+      invoice3 = create(:invoice,
        merchant_id: merchant3.id)\n+      invoice4 = create(:invoice, merchant_id:
        merchant4.id)\n+      invoice5 = create(:invoice, merchant_id: merchant5.id)\n+\n+      transaction1
        = create(:transaction, invoice_id: invoice1.id, result: ''success'')\n+      transaction2
        = create(:transaction, invoice_id: invoice2.id, result: ''success'')\n+      transaction3
        = create(:transaction, invoice_id: invoice3.id, result: ''success'')\n+      transaction4
        = create(:transaction, invoice_id: invoice4.id, result: ''success'')\n+      transaction5
        = create(:transaction, invoice_id: invoice5.id, result: ''success'')\n+\n+      invoice_item1
        = create(:invoice_item, invoice_id: invoice1.id, quantity: 5, unit_price:
        50)\n+      invoice_item2 = create(:invoice_item, invoice_id: invoice2.id,
        quantity: 2, unit_price: 300)\n+      invoice_item3 = create(:invoice_item,
        invoice_id: invoice3.id, quantity: 10, unit_price: 100)\n+      invoice_item4
        = create(:invoice_item, invoice_id: invoice4.id, quantity: 10, unit_price:
        200)\n+      invoice_item5 = create(:invoice_item, invoice_id: invoice5.id,
        quantity: 5, unit_price: 100)\n+\n+      expect(Merchant.most_revenue(3)).to
        eq([merchant4, merchant3, merchant2])\n+    end\n+  end\n end"},{"sha":"a77421361e72d9af9abebf34a1e9b26790b72991","filename":"spec/requests/api/v1/merchant_business_logic_spec.rb","status":"added","additions":40,"deletions":0,"changes":40,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/06088a8ed3982fdf670bdc9dd52661dd1dc87a36/spec/requests/api/v1/merchant_business_logic_spec.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/06088a8ed3982fdf670bdc9dd52661dd1dc87a36/spec/requests/api/v1/merchant_business_logic_spec.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/spec/requests/api/v1/merchant_business_logic_spec.rb?ref=06088a8ed3982fdf670bdc9dd52661dd1dc87a36","patch":"@@
        -0,0 +1,40 @@\n+require ''rails_helper''\n+\n+describe ''Api for top x merchants
        by revenue'' do\n+  context ''GET /api/v1/merchants/most_revenue?quantity=x''
        do\n+    it ''shows top merchants by revenue in json'' do\n+      merchant1
        = create(:merchant)\n+      merchant2 = create(:merchant)\n+      merchant3
        = create(:merchant)\n+      merchant4 = create(:merchant)\n+      merchant5
        = create(:merchant)\n+\n+      invoice1 = create(:invoice, merchant_id: merchant1.id)\n+      invoice2
        = create(:invoice, merchant_id: merchant2.id)\n+      invoice3 = create(:invoice,
        merchant_id: merchant3.id)\n+      invoice4 = create(:invoice, merchant_id:
        merchant4.id)\n+      invoice5 = create(:invoice, merchant_id: merchant5.id)\n+\n+      transaction1
        = create(:transaction, invoice_id: invoice1.id, result: ''success'')\n+      transaction2
        = create(:transaction, invoice_id: invoice2.id, result: ''success'')\n+      transaction3
        = create(:transaction, invoice_id: invoice3.id, result: ''success'')\n+      transaction4
        = create(:transaction, invoice_id: invoice4.id, result: ''success'')\n+      transaction5
        = create(:transaction, invoice_id: invoice5.id, result: ''success'')\n+\n+      invoice_item1
        = create(:invoice_item, invoice_id: invoice1.id, quantity: 5, unit_price:
        50)\n+      invoice_item2 = create(:invoice_item, invoice_id: invoice2.id,
        quantity: 2, unit_price: 300)\n+      invoice_item3 = create(:invoice_item,
        invoice_id: invoice3.id, quantity: 10, unit_price: 100)\n+      invoice_item4
        = create(:invoice_item, invoice_id: invoice4.id, quantity: 10, unit_price:
        200)\n+      invoice_item5 = create(:invoice_item, invoice_id: invoice5.id,
        quantity: 5, unit_price: 100)\n+\n+      get ''/api/v1/merchants/most_revenue?quantity=3''\n+\n+      expect(response).to
        be_successful\n+\n+      merchants = JSON.parse(response.body)\n+\n+      expect(merchants.first[''id'']).to
        eq(merchant4.id)\n+      expect(merchants.last[''id'']).to eq(merchant2.id)\n+    end\n+  end\n+end"}]}'
    http_version: 
  recorded_at: Fri, 24 Aug 2018 14:27:34 GMT
- request:
    method: get
    uri: https://api.github.com/repos/1powechri2/Rails-Engine/commits/c8964c784df9212d1a029274014ba392cfc1f418
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Faraday v0.15.2
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - GitHub.com
      Date:
      - Fri, 24 Aug 2018 14:27:22 GMT
      Content-Type:
      - application/json; charset=utf-8
      Transfer-Encoding:
      - chunked
      Status:
      - 200 OK
      X-Ratelimit-Limit:
      - '60'
      X-Ratelimit-Remaining:
      - '44'
      X-Ratelimit-Reset:
      - '1535122878'
      Cache-Control:
      - public, max-age=60, s-maxage=60
      Vary:
      - Accept
      Etag:
      - W/"695d9622ee8a3b7e0006ad14dc0c7e9e"
      Last-Modified:
      - Thu, 16 Aug 2018 19:02:17 GMT
      X-Github-Media-Type:
      - github.v3; format=json
      Access-Control-Expose-Headers:
      - ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining,
        X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
      Access-Control-Allow-Origin:
      - "*"
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      X-Frame-Options:
      - deny
      X-Content-Type-Options:
      - nosniff
      X-Xss-Protection:
      - 1; mode=block
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Content-Security-Policy:
      - default-src 'none'
      X-Runtime-Rack:
      - '0.123094'
      X-Github-Request-Id:
      - 8BFC:55A3:F1C778:1EACAAC:5B8015CA
    body:
      encoding: ASCII-8BIT
      string: '{"sha":"c8964c784df9212d1a029274014ba392cfc1f418","node_id":"MDY6Q29tbWl0MTQ0NjI3MjQxOmM4OTY0Yzc4NGRmOTIxMmQxYTAyOTI3NDAxNGJhMzkyY2ZjMWY0MTg=","commit":{"author":{"name":"Chris
        Powell","email":"chris.ian.powell@gmail.com","date":"2018-08-16T19:02:17Z"},"committer":{"name":"Chris
        Powell","email":"chris.ian.powell@gmail.com","date":"2018-08-16T19:02:17Z"},"message":"adds
        merchant by most items sold business logic","tree":{"sha":"e8282aa2c978cc9c6f6c6e3a14a2ecee39c8d1de","url":"https://api.github.com/repos/1powechri2/Rails-Engine/git/trees/e8282aa2c978cc9c6f6c6e3a14a2ecee39c8d1de"},"url":"https://api.github.com/repos/1powechri2/Rails-Engine/git/commits/c8964c784df9212d1a029274014ba392cfc1f418","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/c8964c784df9212d1a029274014ba392cfc1f418","html_url":"https://github.com/1powechri2/Rails-Engine/commit/c8964c784df9212d1a029274014ba392cfc1f418","comments_url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/c8964c784df9212d1a029274014ba392cfc1f418/comments","author":{"login":"1powechri2","id":34900620,"node_id":"MDQ6VXNlcjM0OTAwNjIw","avatar_url":"https://avatars1.githubusercontent.com/u/34900620?v=4","gravatar_id":"","url":"https://api.github.com/users/1powechri2","html_url":"https://github.com/1powechri2","followers_url":"https://api.github.com/users/1powechri2/followers","following_url":"https://api.github.com/users/1powechri2/following{/other_user}","gists_url":"https://api.github.com/users/1powechri2/gists{/gist_id}","starred_url":"https://api.github.com/users/1powechri2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1powechri2/subscriptions","organizations_url":"https://api.github.com/users/1powechri2/orgs","repos_url":"https://api.github.com/users/1powechri2/repos","events_url":"https://api.github.com/users/1powechri2/events{/privacy}","received_events_url":"https://api.github.com/users/1powechri2/received_events","type":"User","site_admin":false},"committer":{"login":"1powechri2","id":34900620,"node_id":"MDQ6VXNlcjM0OTAwNjIw","avatar_url":"https://avatars1.githubusercontent.com/u/34900620?v=4","gravatar_id":"","url":"https://api.github.com/users/1powechri2","html_url":"https://github.com/1powechri2","followers_url":"https://api.github.com/users/1powechri2/followers","following_url":"https://api.github.com/users/1powechri2/following{/other_user}","gists_url":"https://api.github.com/users/1powechri2/gists{/gist_id}","starred_url":"https://api.github.com/users/1powechri2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1powechri2/subscriptions","organizations_url":"https://api.github.com/users/1powechri2/orgs","repos_url":"https://api.github.com/users/1powechri2/repos","events_url":"https://api.github.com/users/1powechri2/events{/privacy}","received_events_url":"https://api.github.com/users/1powechri2/received_events","type":"User","site_admin":false},"parents":[{"sha":"06088a8ed3982fdf670bdc9dd52661dd1dc87a36","url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/06088a8ed3982fdf670bdc9dd52661dd1dc87a36","html_url":"https://github.com/1powechri2/Rails-Engine/commit/06088a8ed3982fdf670bdc9dd52661dd1dc87a36"}],"stats":{"total":78,"additions":77,"deletions":1},"files":[{"sha":"1b36a6d219d01867be3ffa175481fc2b2a2d2628","filename":"app/controllers/api/v1/merchants/most_items_controller.rb","status":"added","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/c8964c784df9212d1a029274014ba392cfc1f418/app/controllers/api/v1/merchants/most_items_controller.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/c8964c784df9212d1a029274014ba392cfc1f418/app/controllers/api/v1/merchants/most_items_controller.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/controllers/api/v1/merchants/most_items_controller.rb?ref=c8964c784df9212d1a029274014ba392cfc1f418","patch":"@@
        -0,0 +1,5 @@\n+class Api::V1::Merchants::MostItemsController < ApplicationController\n+  def
        index\n+    render json: Merchant.most_items_sold(params[:quantity])\n+  end\n+end"},{"sha":"af571b32b4e43a74fcdf649a79f890ba1b8997f2","filename":"app/models/merchant.rb","status":"modified","additions":10,"deletions":1,"changes":11,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/c8964c784df9212d1a029274014ba392cfc1f418/app/models/merchant.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/c8964c784df9212d1a029274014ba392cfc1f418/app/models/merchant.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/models/merchant.rb?ref=c8964c784df9212d1a029274014ba392cfc1f418","patch":"@@
        -7,10 +7,19 @@ class Merchant < ApplicationRecord\n \n   def self.most_revenue(x
        = 5)\n     select(''merchants.*, sum(invoice_items.unit_price * invoice_items.quantity)
        as revenue'')\n-    .joins(:transactions, :invoice_items)\n+    .joins(invoices:
        [:transactions, :invoice_items])\n     .where(transactions: {result: ''success''})\n     .group(:id)\n     .order(''revenue
        desc'')\n     .limit(x)\n   end\n+\n+  def self.most_items_sold(x = 5)\n+    select(''merchants.*,
        sum(invoice_items.quantity) as item_count'')\n+    .joins(invoices: [:transactions,
        :invoice_items])\n+    .where(transactions: {result: ''success''})\n+    .group(:id)\n+    .order(''item_count
        desc'')\n+    .limit(x)\n+  end\n end"},{"sha":"179c61ecea9d9b15017066ab72ddaab86b6c814a","filename":"config/routes.rb","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/c8964c784df9212d1a029274014ba392cfc1f418/config/routes.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/c8964c784df9212d1a029274014ba392cfc1f418/config/routes.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/config/routes.rb?ref=c8964c784df9212d1a029274014ba392cfc1f418","patch":"@@
        -6,6 +6,7 @@\n       get ''/merchants/:id/items'', to: ''merchants/items_relation#index''\n       get
        ''/merchants/:id/invoices'', to: ''merchants/invoices_relation#index''\n       get
        ''/merchants/most_revenue'', to: ''merchants/most_revenue#index''\n+      get
        ''/merchants/most_items'', to: ''merchants/most_items#index''\n       resources
        :merchants, only: [:index, :show]\n       get ''/transactions/find'', to:
        ''transactions/search#show''\n       get ''/transactions/find_all'', to: ''transactions/search#index''"},{"sha":"babf6ba8e2c35f33dfc306cd00f0c2b7dd9ba321","filename":"spec/models/merchant_spec.rb","status":"modified","additions":27,"deletions":0,"changes":27,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/c8964c784df9212d1a029274014ba392cfc1f418/spec/models/merchant_spec.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/c8964c784df9212d1a029274014ba392cfc1f418/spec/models/merchant_spec.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/spec/models/merchant_spec.rb?ref=c8964c784df9212d1a029274014ba392cfc1f418","patch":"@@
        -38,5 +38,32 @@\n \n       expect(Merchant.most_revenue(3)).to eq([merchant4,
        merchant3, merchant2])\n     end\n+    it ''can find top most_items_sold''
        do\n+      merchant1 = create(:merchant)\n+      merchant2 = create(:merchant)\n+      merchant3
        = create(:merchant)\n+      merchant4 = create(:merchant)\n+      merchant5
        = create(:merchant)\n+\n+      invoice1 = create(:invoice, merchant_id: merchant1.id)\n+      invoice2
        = create(:invoice, merchant_id: merchant2.id)\n+      invoice3 = create(:invoice,
        merchant_id: merchant3.id)\n+      invoice4 = create(:invoice, merchant_id:
        merchant4.id)\n+      invoice5 = create(:invoice, merchant_id: merchant5.id)\n+\n+      transaction1
        = create(:transaction, invoice_id: invoice1.id, result: ''success'')\n+      transaction2
        = create(:transaction, invoice_id: invoice2.id, result: ''success'')\n+      transaction3
        = create(:transaction, invoice_id: invoice3.id, result: ''success'')\n+      transaction4
        = create(:transaction, invoice_id: invoice4.id, result: ''success'')\n+      transaction5
        = create(:transaction, invoice_id: invoice5.id, result: ''success'')\n+\n+      invoice_item1
        = create(:invoice_item, invoice_id: invoice1.id, quantity: 6, unit_price:
        50)\n+      invoice_item2 = create(:invoice_item, invoice_id: invoice2.id,
        quantity: 2, unit_price: 300)\n+      invoice_item3 = create(:invoice_item,
        invoice_id: invoice3.id, quantity: 10, unit_price: 100)\n+      invoice_item4
        = create(:invoice_item, invoice_id: invoice4.id, quantity: 15, unit_price:
        200)\n+      invoice_item5 = create(:invoice_item, invoice_id: invoice5.id,
        quantity: 5, unit_price: 100)\n+\n+      expect(Merchant.most_items_sold(3)).to
        eq([merchant4, merchant3, merchant1])\n+    end\n   end\n end"},{"sha":"0fe8b465989bd43d15b5ae7e6031cd9e20a60703","filename":"spec/requests/api/v1/merchant_business_logic_spec.rb","status":"modified","additions":34,"deletions":0,"changes":34,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/c8964c784df9212d1a029274014ba392cfc1f418/spec/requests/api/v1/merchant_business_logic_spec.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/c8964c784df9212d1a029274014ba392cfc1f418/spec/requests/api/v1/merchant_business_logic_spec.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/spec/requests/api/v1/merchant_business_logic_spec.rb?ref=c8964c784df9212d1a029274014ba392cfc1f418","patch":"@@
        -36,5 +36,39 @@\n       expect(merchants.first[''id'']).to eq(merchant4.id)\n       expect(merchants.last[''id'']).to
        eq(merchant2.id)\n     end\n+    it ''shows top merchants by most items sold
        in json'' do\n+      merchant1 = create(:merchant)\n+      merchant2 = create(:merchant)\n+      merchant3
        = create(:merchant)\n+      merchant4 = create(:merchant)\n+      merchant5
        = create(:merchant)\n+\n+      invoice1 = create(:invoice, merchant_id: merchant1.id)\n+      invoice2
        = create(:invoice, merchant_id: merchant2.id)\n+      invoice3 = create(:invoice,
        merchant_id: merchant3.id)\n+      invoice4 = create(:invoice, merchant_id:
        merchant4.id)\n+      invoice5 = create(:invoice, merchant_id: merchant5.id)\n+\n+      transaction1
        = create(:transaction, invoice_id: invoice1.id, result: ''success'')\n+      transaction2
        = create(:transaction, invoice_id: invoice2.id, result: ''success'')\n+      transaction3
        = create(:transaction, invoice_id: invoice3.id, result: ''success'')\n+      transaction4
        = create(:transaction, invoice_id: invoice4.id, result: ''success'')\n+      transaction5
        = create(:transaction, invoice_id: invoice5.id, result: ''success'')\n+\n+      invoice_item1
        = create(:invoice_item, invoice_id: invoice1.id, quantity: 6, unit_price:
        50)\n+      invoice_item2 = create(:invoice_item, invoice_id: invoice2.id,
        quantity: 2, unit_price: 300)\n+      invoice_item3 = create(:invoice_item,
        invoice_id: invoice3.id, quantity: 10, unit_price: 100)\n+      invoice_item4
        = create(:invoice_item, invoice_id: invoice4.id, quantity: 10, unit_price:
        200)\n+      invoice_item5 = create(:invoice_item, invoice_id: invoice5.id,
        quantity: 5, unit_price: 100)\n+\n+      get ''/api/v1/merchants/most_items?quantity=3''\n+\n+      expect(response).to
        be_successful\n+\n+      merchants = JSON.parse(response.body)\n+\n+      expect(merchants.first[''id'']).to
        eq(merchant4.id)\n+      expect(merchants.last[''id'']).to eq(merchant1.id)\n+    end\n   end\n
        end"}]}'
    http_version: 
  recorded_at: Fri, 24 Aug 2018 14:27:35 GMT
- request:
    method: get
    uri: https://api.github.com/repos/1powechri2/Rails-Engine/commits/eb979bb298f06fa1408d3dd04c7a332185c05586
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Faraday v0.15.2
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - GitHub.com
      Date:
      - Fri, 24 Aug 2018 14:27:22 GMT
      Content-Type:
      - application/json; charset=utf-8
      Transfer-Encoding:
      - chunked
      Status:
      - 200 OK
      X-Ratelimit-Limit:
      - '60'
      X-Ratelimit-Remaining:
      - '43'
      X-Ratelimit-Reset:
      - '1535122878'
      Cache-Control:
      - public, max-age=60, s-maxage=60
      Vary:
      - Accept
      Etag:
      - W/"08c7ebbc52a47b474983cf0c5d11a2c4"
      Last-Modified:
      - Fri, 17 Aug 2018 00:34:59 GMT
      X-Github-Media-Type:
      - github.v3; format=json
      Access-Control-Expose-Headers:
      - ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining,
        X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
      Access-Control-Allow-Origin:
      - "*"
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      X-Frame-Options:
      - deny
      X-Content-Type-Options:
      - nosniff
      X-Xss-Protection:
      - 1; mode=block
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Content-Security-Policy:
      - default-src 'none'
      X-Runtime-Rack:
      - '0.147890'
      X-Github-Request-Id:
      - E194:55A3:F1C7B7:1EACB15:5B8015CA
    body:
      encoding: ASCII-8BIT
      string: '{"sha":"eb979bb298f06fa1408d3dd04c7a332185c05586","node_id":"MDY6Q29tbWl0MTQ0NjI3MjQxOmViOTc5YmIyOThmMDZmYTE0MDhkM2RkMDRjN2EzMzIxODVjMDU1ODY=","commit":{"author":{"name":"Chris
        Powell","email":"chris.ian.powell@gmail.com","date":"2018-08-17T00:34:59Z"},"committer":{"name":"Chris
        Powell","email":"chris.ian.powell@gmail.com","date":"2018-08-17T00:34:59Z"},"message":"adds
        business functionality for all but items and BOSS MODE","tree":{"sha":"17b2476da62f1816e970dc4acb24f42a9f3943ee","url":"https://api.github.com/repos/1powechri2/Rails-Engine/git/trees/17b2476da62f1816e970dc4acb24f42a9f3943ee"},"url":"https://api.github.com/repos/1powechri2/Rails-Engine/git/commits/eb979bb298f06fa1408d3dd04c7a332185c05586","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/eb979bb298f06fa1408d3dd04c7a332185c05586","html_url":"https://github.com/1powechri2/Rails-Engine/commit/eb979bb298f06fa1408d3dd04c7a332185c05586","comments_url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/eb979bb298f06fa1408d3dd04c7a332185c05586/comments","author":{"login":"1powechri2","id":34900620,"node_id":"MDQ6VXNlcjM0OTAwNjIw","avatar_url":"https://avatars1.githubusercontent.com/u/34900620?v=4","gravatar_id":"","url":"https://api.github.com/users/1powechri2","html_url":"https://github.com/1powechri2","followers_url":"https://api.github.com/users/1powechri2/followers","following_url":"https://api.github.com/users/1powechri2/following{/other_user}","gists_url":"https://api.github.com/users/1powechri2/gists{/gist_id}","starred_url":"https://api.github.com/users/1powechri2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1powechri2/subscriptions","organizations_url":"https://api.github.com/users/1powechri2/orgs","repos_url":"https://api.github.com/users/1powechri2/repos","events_url":"https://api.github.com/users/1powechri2/events{/privacy}","received_events_url":"https://api.github.com/users/1powechri2/received_events","type":"User","site_admin":false},"committer":{"login":"1powechri2","id":34900620,"node_id":"MDQ6VXNlcjM0OTAwNjIw","avatar_url":"https://avatars1.githubusercontent.com/u/34900620?v=4","gravatar_id":"","url":"https://api.github.com/users/1powechri2","html_url":"https://github.com/1powechri2","followers_url":"https://api.github.com/users/1powechri2/followers","following_url":"https://api.github.com/users/1powechri2/following{/other_user}","gists_url":"https://api.github.com/users/1powechri2/gists{/gist_id}","starred_url":"https://api.github.com/users/1powechri2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1powechri2/subscriptions","organizations_url":"https://api.github.com/users/1powechri2/orgs","repos_url":"https://api.github.com/users/1powechri2/repos","events_url":"https://api.github.com/users/1powechri2/events{/privacy}","received_events_url":"https://api.github.com/users/1powechri2/received_events","type":"User","site_admin":false},"parents":[{"sha":"c8964c784df9212d1a029274014ba392cfc1f418","url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/c8964c784df9212d1a029274014ba392cfc1f418","html_url":"https://github.com/1powechri2/Rails-Engine/commit/c8964c784df9212d1a029274014ba392cfc1f418"}],"stats":{"total":201,"additions":200,"deletions":1},"files":[{"sha":"696119945ff7c74c1dead5536a9b7e971949aed0","filename":"app/controllers/api/v1/customers/favorite_merchant_controller.rb","status":"added","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/eb979bb298f06fa1408d3dd04c7a332185c05586/app/controllers/api/v1/customers/favorite_merchant_controller.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/eb979bb298f06fa1408d3dd04c7a332185c05586/app/controllers/api/v1/customers/favorite_merchant_controller.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/controllers/api/v1/customers/favorite_merchant_controller.rb?ref=eb979bb298f06fa1408d3dd04c7a332185c05586","patch":"@@
        -0,0 +1,5 @@\n+class Api::V1::Customers::FavoriteMerchantController < ApplicationController\n+  def
        show\n+    render json: Customer.find(params[:id]).favorite_merchant\n+  end\n+end"},{"sha":"2dc680c637e0044ab6eacf6fcfe6b282357366c6","filename":"app/controllers/api/v1/merchants/favorite_customer_controller.rb","status":"added","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/eb979bb298f06fa1408d3dd04c7a332185c05586/app/controllers/api/v1/merchants/favorite_customer_controller.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/eb979bb298f06fa1408d3dd04c7a332185c05586/app/controllers/api/v1/merchants/favorite_customer_controller.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/controllers/api/v1/merchants/favorite_customer_controller.rb?ref=eb979bb298f06fa1408d3dd04c7a332185c05586","patch":"@@
        -0,0 +1,5 @@\n+class Api::V1::Merchants::FavoriteCustomerController < ApplicationController\n+  def
        show\n+    render json: Merchant.find(params[:id]).favorite_customer\n+  end\n+end"},{"sha":"3839d68b19c545bdaa1dd7f6166f0afa4a20d035","filename":"app/controllers/api/v1/merchants/revenue_controller.rb","status":"added","additions":18,"deletions":0,"changes":18,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/eb979bb298f06fa1408d3dd04c7a332185c05586/app/controllers/api/v1/merchants/revenue_controller.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/eb979bb298f06fa1408d3dd04c7a332185c05586/app/controllers/api/v1/merchants/revenue_controller.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/controllers/api/v1/merchants/revenue_controller.rb?ref=eb979bb298f06fa1408d3dd04c7a332185c05586","patch":"@@
        -0,0 +1,18 @@\n+class Api::V1::Merchants::RevenueController < ApplicationController\n+  def
        show\n+    if !params[:date]\n+      revenue = Merchant.find(params[:id]).successful_transactions_total\n+      render
        json: {\"revenue\" => (revenue * 0.01).round(2).to_s}\n+    else\n+      date
        = Date.parse(\"#{params[:date]} 00.00.00. UTC\")\n+      revenue = Merchant.find(params[:id]).revenue_by_date(date)\n+      render
        json: {\"revenue\" => (revenue * 0.01).round(2).to_s}\n+    end\n+  end\n+\n+  def
        index\n+    date = Date.parse(\"#{params[:date]} 00.00.00. UTC\")\n+    revenue
        = Merchant.total_revenue_for_date(date)\n+    render json: {\"total_revenue\"
        => (revenue * 0.01).round(2).to_s}\n+  end\n+end"},{"sha":"35aadf9089aa6ba0d12ff2f4488a044fd0380ecd","filename":"app/models/customer.rb","status":"modified","additions":8,"deletions":0,"changes":8,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/eb979bb298f06fa1408d3dd04c7a332185c05586/app/models/customer.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/eb979bb298f06fa1408d3dd04c7a332185c05586/app/models/customer.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/models/customer.rb?ref=eb979bb298f06fa1408d3dd04c7a332185c05586","patch":"@@
        -3,4 +3,12 @@ class Customer < ApplicationRecord\n   has_many :transactions,
        through: :invoices\n   has_many :merchants, through: :invoices\n   has_many
        :invoice_items, through: :invoices\n+\n+  def favorite_merchant\n+    merchants.select(''merchants.*,
        count(transactions.result) as trans'').\n+    joins(invoices: :transactions).\n+    where(transactions:
        {result: \"success\"}).\n+    group(:id).order(''trans desc'').\n+    limit(1)[0]\n+  end\n
        end"},{"sha":"e577d7a979b629f5189aee07d93b5b1d212dc90d","filename":"app/models/merchant.rb","status":"modified","additions":32,"deletions":0,"changes":32,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/eb979bb298f06fa1408d3dd04c7a332185c05586/app/models/merchant.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/eb979bb298f06fa1408d3dd04c7a332185c05586/app/models/merchant.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/models/merchant.rb?ref=eb979bb298f06fa1408d3dd04c7a332185c05586","patch":"@@
        -2,6 +2,7 @@ class Merchant < ApplicationRecord\n   validates_presence_of
        :name\n   has_many :invoices\n   has_many :items\n+  has_many :customers,
        through: :invoices\n   has_many :transactions, through: :invoices\n   has_many
        :invoice_items, through: :invoices\n \n@@ -22,4 +23,35 @@ def self.most_items_sold(x
        = 5)\n     .order(''item_count desc'')\n     .limit(x)\n   end\n+\n+  def
        self.total_revenue_for_date(date)\n+    joins(invoices: [:transactions, :invoice_items]).\n+    where(transactions:
        {result: ''success''}).\n+    where(invoices: {updated_at: date.beginning_of_day..date.end_of_day}).\n+    sum(''quantity
        * unit_price'')\n+  end\n+\n+  def successful_transactions_total\n+    invoices.\n+    joins(:transactions,
        :invoice_items).\n+    where(transactions: {result: ''success''}).\n+    sum(''quantity
        * unit_price'')\n+  end\n+\n+  def revenue_by_date(date)\n+    invoices.\n+    joins(:transactions,
        :invoice_items).\n+    where(transactions: {result: ''success''}).\n+    where(invoices:
        {updated_at: date.beginning_of_day..date.end_of_day}).\n+    sum(''quantity
        * unit_price'')\n+  end\n+\n+  def favorite_customer\n+    customers.\n+    select(''customers.*,
        count(transactions.result) as trans'').\n+    joins(invoices: :transactions).where(transactions:
        {result: ''success''}).\n+    group(:id).\n+    order(''trans desc'').\n+    limit(1)[0]\n+  end\n
        end"},{"sha":"631e7f5002624de2d142157b0a682877c3c73c72","filename":"config/routes.rb","status":"modified","additions":4,"deletions":0,"changes":4,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/eb979bb298f06fa1408d3dd04c7a332185c05586/config/routes.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/eb979bb298f06fa1408d3dd04c7a332185c05586/config/routes.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/config/routes.rb?ref=eb979bb298f06fa1408d3dd04c7a332185c05586","patch":"@@
        -7,6 +7,9 @@\n       get ''/merchants/:id/invoices'', to: ''merchants/invoices_relation#index''\n       get
        ''/merchants/most_revenue'', to: ''merchants/most_revenue#index''\n       get
        ''/merchants/most_items'', to: ''merchants/most_items#index''\n+      get
        ''/merchants/revenue'', to: ''merchants/revenue#index''\n+      get ''/merchants/:id/revenue'',
        to: ''merchants/revenue#show''\n+      get ''/merchants/:id/favorite_customer'',
        to: ''merchants/favorite_customer#show''\n       resources :merchants, only:
        [:index, :show]\n       get ''/transactions/find'', to: ''transactions/search#show''\n       get
        ''/transactions/find_all'', to: ''transactions/search#index''\n@@ -29,6 +32,7
        @@\n       get ''/customers/find_all'', to: ''customers/search#index''\n       get
        ''/customers/:id/invoices'', to: ''customers/invoices_relation#index''\n       get
        ''/customers/:id/transactions'', to: ''customers/transactions_relation#index''\n+      get
        ''/customers/:id/favorite_merchant'', to: ''customers/favorite_merchant#show''\n       resources
        :customers, only: [:index, :show]\n       get ''/invoice_items/find'', to:
        ''invoice_items/search#show''\n       get ''/invoice_items/find_all'', to:
        ''invoice_items/search#index''"},{"sha":"c1053d4605aa125151454aab90449f2db47016bb","filename":"spec/models/customer_spec.rb","status":"modified","additions":18,"deletions":0,"changes":18,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/eb979bb298f06fa1408d3dd04c7a332185c05586/spec/models/customer_spec.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/eb979bb298f06fa1408d3dd04c7a332185c05586/spec/models/customer_spec.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/spec/models/customer_spec.rb?ref=eb979bb298f06fa1408d3dd04c7a332185c05586","patch":"@@
        -5,4 +5,22 @@\n     it { should have_many(:merchants).through(:invoices) }\n     it
        { should have_many(:invoice_items).through(:invoices) }\n     it { should
        have_many(:transactions).through(:invoices) }\n+  describe ''instance method''
        do\n+    it ''can find a favorite merchant'' do\n+      customer = create(:customer)\n+\n+      merchant1
        = create(:merchant)\n+      merchant2 = create(:merchant)\n+\n+      invoice1
        = create(:invoice, merchant_id: merchant1.id, customer_id: customer.id)\n+      invoice2
        = create(:invoice, merchant_id: merchant1.id, customer_id: customer.id)\n+      invoice3
        = create(:invoice, merchant_id: merchant2.id, customer_id: customer.id)\n+\n+      trans1
        = create(:transaction, invoice_id: invoice1.id, result: ''success'')\n+      trans2
        = create(:transaction, invoice_id: invoice2.id, result: ''success'')\n+      trans3
        = create(:transaction, invoice_id: invoice3.id, result: ''success'')\n+\n+      expect(customer.favorite_merchant).to
        eq(merchant1)\n+    end\n+  end\n end"},{"sha":"c3c721c78e935ae3b5ee01c712682d5e62ec9d81","filename":"spec/models/merchant_spec.rb","status":"modified","additions":52,"deletions":0,"changes":52,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/eb979bb298f06fa1408d3dd04c7a332185c05586/spec/models/merchant_spec.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/eb979bb298f06fa1408d3dd04c7a332185c05586/spec/models/merchant_spec.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/spec/models/merchant_spec.rb?ref=eb979bb298f06fa1408d3dd04c7a332185c05586","patch":"@@
        -65,5 +65,57 @@\n \n       expect(Merchant.most_items_sold(3)).to eq([merchant4,
        merchant3, merchant1])\n     end\n+    it ''can total revenue across all merchants
        by date'' do\n+      merchant1 = create(:merchant)\n+      merchant2 = create(:merchant)\n+      merchant3
        = create(:merchant)\n+      merchant4 = create(:merchant)\n+      merchant5
        = create(:merchant)\n+\n+      invoice1 = create(:invoice, merchant_id: merchant1.id)\n+      invoice2
        = create(:invoice, merchant_id: merchant2.id)\n+      invoice3 = create(:invoice,
        merchant_id: merchant3.id)\n+      invoice4 = create(:invoice, merchant_id:
        merchant4.id)\n+      invoice5 = create(:invoice, merchant_id: merchant5.id)\n+\n+      transaction1
        = create(:transaction, invoice_id: invoice1.id, result: ''success'')\n+      transaction2
        = create(:transaction, invoice_id: invoice2.id, result: ''success'')\n+      transaction3
        = create(:transaction, invoice_id: invoice3.id, result: ''success'')\n+      transaction4
        = create(:transaction, invoice_id: invoice4.id, result: ''success'')\n+      transaction5
        = create(:transaction, invoice_id: invoice5.id, result: ''success'')\n+\n+      invoice_item1
        = create(:invoice_item, invoice_id: invoice1.id, quantity: 6, unit_price:
        50)\n+      invoice_item2 = create(:invoice_item, invoice_id: invoice2.id,
        quantity: 2, unit_price: 300)\n+      invoice_item3 = create(:invoice_item,
        invoice_id: invoice3.id, quantity: 10, unit_price: 100)\n+      invoice_item4
        = create(:invoice_item, invoice_id: invoice4.id, quantity: 15, unit_price:
        200)\n+      invoice_item5 = create(:invoice_item, invoice_id: invoice5.id,
        quantity: 5, unit_price: 100)\n+\n+      expect(Merchant.most_items_sold(3)).to
        eq([merchant4, merchant3, merchant1])\n+    end\n+  end\n+  describe ''instance
        methods'' do\n+    it ''can return total revenue for successful transactions''
        do\n+      merchant = create(:merchant)\n+\n+      invoice1 = create(:invoice,
        merchant_id: merchant.id)\n+      invoice2 = create(:invoice, merchant_id:
        merchant.id)\n+      invoice3 = create(:invoice, merchant_id: merchant.id)\n+      invoice4
        = create(:invoice, merchant_id: merchant.id)\n+      invoice5 = create(:invoice,
        merchant_id: merchant.id)\n+\n+      transaction1 = create(:transaction, invoice_id:
        invoice1.id, result: ''success'')\n+      transaction2 = create(:transaction,
        invoice_id: invoice2.id, result: ''success'')\n+      transaction3 = create(:transaction,
        invoice_id: invoice3.id, result: ''success'')\n+      transaction4 = create(:transaction,
        invoice_id: invoice4.id, result: ''success'')\n+      transaction5 = create(:transaction,
        invoice_id: invoice5.id, result: ''success'')\n+\n+      invoice_item1 = create(:invoice_item,
        invoice_id: invoice1.id, quantity: 6, unit_price: 50)\n+      invoice_item2
        = create(:invoice_item, invoice_id: invoice2.id, quantity: 2, unit_price:
        300)\n+      invoice_item3 = create(:invoice_item, invoice_id: invoice3.id,
        quantity: 10, unit_price: 100)\n+      invoice_item4 = create(:invoice_item,
        invoice_id: invoice4.id, quantity: 15, unit_price: 200)\n+      invoice_item5
        = create(:invoice_item, invoice_id: invoice5.id, quantity: 5, unit_price:
        100)\n+\n+      expect(merchant.successful_transactions_total).to eq(5400)\n+    end\n   end\n
        end"},{"sha":"52ccd28cff3894c7c6d7e74e96a46922d94a75ba","filename":"spec/requests/api/v1/customer_business_logic_spec.rb","status":"added","additions":28,"deletions":0,"changes":28,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/eb979bb298f06fa1408d3dd04c7a332185c05586/spec/requests/api/v1/customer_business_logic_spec.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/eb979bb298f06fa1408d3dd04c7a332185c05586/spec/requests/api/v1/customer_business_logic_spec.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/spec/requests/api/v1/customer_business_logic_spec.rb?ref=eb979bb298f06fa1408d3dd04c7a332185c05586","patch":"@@
        -0,0 +1,28 @@\n+require ''rails_helper''\n+\n+describe ''API for customer
        favorite merchant'' do\n+  context ''GET api/v1/customers/:id/favorite_merchant''
        do\n+    it ''returns a merchant for the customer\\''s most successful transactions''
        do\n+      customer = create(:customer)\n+\n+      merchant1 = create(:merchant)\n+      merchant2
        = create(:merchant)\n+\n+      invoice1 = create(:invoice, merchant_id: merchant1.id,
        customer_id: customer.id)\n+      invoice2 = create(:invoice, merchant_id:
        merchant1.id, customer_id: customer.id)\n+      invoice3 = create(:invoice,
        merchant_id: merchant2.id, customer_id: customer.id)\n+\n+      trans1 = create(:transaction,
        invoice_id: invoice1.id, result: ''success'')\n+      trans2 = create(:transaction,
        invoice_id: invoice2.id, result: ''success'')\n+      trans3 = create(:transaction,
        invoice_id: invoice3.id, result: ''success'')\n+\n+      get \"/api/v1/customers/#{customer.id}/favorite_merchant\"\n+\n+      expect(response).to
        be_successful\n+\n+      merch = JSON.parse(response.body)\n+\n+      expect(merch[''id'']).to
        eq(merchant1.id)\n+    end\n+  end\n+end"},{"sha":"5a85d4e1f5267364ae97529ab3dcb991b07ffd61","filename":"spec/requests/api/v1/merchant_business_logic_spec.rb","status":"modified","additions":30,"deletions":1,"changes":31,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/eb979bb298f06fa1408d3dd04c7a332185c05586/spec/requests/api/v1/merchant_business_logic_spec.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/eb979bb298f06fa1408d3dd04c7a332185c05586/spec/requests/api/v1/merchant_business_logic_spec.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/spec/requests/api/v1/merchant_business_logic_spec.rb?ref=eb979bb298f06fa1408d3dd04c7a332185c05586","patch":"@@
        -58,7 +58,7 @@\n       invoice_item1 = create(:invoice_item, invoice_id: invoice1.id,
        quantity: 6, unit_price: 50)\n       invoice_item2 = create(:invoice_item,
        invoice_id: invoice2.id, quantity: 2, unit_price: 300)\n       invoice_item3
        = create(:invoice_item, invoice_id: invoice3.id, quantity: 10, unit_price:
        100)\n-      invoice_item4 = create(:invoice_item, invoice_id: invoice4.id,
        quantity: 10, unit_price: 200)\n+      invoice_item4 = create(:invoice_item,
        invoice_id: invoice4.id, quantity: 11, unit_price: 200)\n       invoice_item5
        = create(:invoice_item, invoice_id: invoice5.id, quantity: 5, unit_price:
        100)\n \n       get ''/api/v1/merchants/most_items?quantity=3''\n@@ -70,5
        +70,34 @@\n       expect(merchants.first[''id'']).to eq(merchant4.id)\n       expect(merchants.last[''id'']).to
        eq(merchant1.id)\n     end\n+    it ''can return total revenue for successful
        transactions'' do\n+      merchant = create(:merchant)\n+\n+      invoice1
        = create(:invoice, merchant_id: merchant.id)\n+      invoice2 = create(:invoice,
        merchant_id: merchant.id)\n+      invoice3 = create(:invoice, merchant_id:
        merchant.id)\n+      invoice4 = create(:invoice, merchant_id: merchant.id)\n+      invoice5
        = create(:invoice, merchant_id: merchant.id)\n+\n+      transaction1 = create(:transaction,
        invoice_id: invoice1.id, result: ''success'')\n+      transaction2 = create(:transaction,
        invoice_id: invoice2.id, result: ''success'')\n+      transaction3 = create(:transaction,
        invoice_id: invoice3.id, result: ''success'')\n+      transaction4 = create(:transaction,
        invoice_id: invoice4.id, result: ''success'')\n+      transaction5 = create(:transaction,
        invoice_id: invoice5.id, result: ''success'')\n+\n+      invoice_item1 = create(:invoice_item,
        invoice_id: invoice1.id, quantity: 6, unit_price: 50)\n+      invoice_item2
        = create(:invoice_item, invoice_id: invoice2.id, quantity: 2, unit_price:
        300)\n+      invoice_item3 = create(:invoice_item, invoice_id: invoice3.id,
        quantity: 10, unit_price: 100)\n+      invoice_item4 = create(:invoice_item,
        invoice_id: invoice4.id, quantity: 15, unit_price: 200)\n+      invoice_item5
        = create(:invoice_item, invoice_id: invoice5.id, quantity: 5, unit_price:
        100)\n+\n+      get \"/api/v1/merchants/#{merchant.id}/revenue\"\n+\n+      expect(response).to
        be_successful\n+\n+      total = JSON.parse(response.body)\n+\n+      expect(total[''revenue'']).to
        eq(\"54.0\")\n+    end\n   end\n end"}]}'
    http_version: 
  recorded_at: Fri, 24 Aug 2018 14:27:35 GMT
- request:
    method: get
    uri: https://api.github.com/repos/1powechri2/Rails-Engine/commits/95d354a0beb65267ef03b7144e1c887bf067cf2a
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Faraday v0.15.2
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - GitHub.com
      Date:
      - Fri, 24 Aug 2018 14:27:23 GMT
      Content-Type:
      - application/json; charset=utf-8
      Transfer-Encoding:
      - chunked
      Status:
      - 200 OK
      X-Ratelimit-Limit:
      - '60'
      X-Ratelimit-Remaining:
      - '42'
      X-Ratelimit-Reset:
      - '1535122878'
      Cache-Control:
      - public, max-age=60, s-maxage=60
      Vary:
      - Accept
      Etag:
      - W/"0524abacc44cfa71f7bec50a9bd7a634"
      Last-Modified:
      - Fri, 17 Aug 2018 01:32:35 GMT
      X-Github-Media-Type:
      - github.v3; format=json
      Access-Control-Expose-Headers:
      - ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining,
        X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
      Access-Control-Allow-Origin:
      - "*"
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      X-Frame-Options:
      - deny
      X-Content-Type-Options:
      - nosniff
      X-Xss-Protection:
      - 1; mode=block
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Content-Security-Policy:
      - default-src 'none'
      X-Runtime-Rack:
      - '0.119417'
      X-Github-Request-Id:
      - AE1A:55A0:B0F59C:18CF42C:5B8015CA
    body:
      encoding: ASCII-8BIT
      string: '{"sha":"95d354a0beb65267ef03b7144e1c887bf067cf2a","node_id":"MDY6Q29tbWl0MTQ0NjI3MjQxOjk1ZDM1NGEwYmViNjUyNjdlZjAzYjcxNDRlMWM4ODdiZjA2N2NmMmE=","commit":{"author":{"name":"Chris
        Powell","email":"chris.ian.powell@gmail.com","date":"2018-08-17T01:32:35Z"},"committer":{"name":"Chris
        Powell","email":"chris.ian.powell@gmail.com","date":"2018-08-17T01:32:35Z"},"message":"adds
        logic for most revenue items","tree":{"sha":"118f9bd64e42ed3d6a33839f1b0390488c624225","url":"https://api.github.com/repos/1powechri2/Rails-Engine/git/trees/118f9bd64e42ed3d6a33839f1b0390488c624225"},"url":"https://api.github.com/repos/1powechri2/Rails-Engine/git/commits/95d354a0beb65267ef03b7144e1c887bf067cf2a","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/95d354a0beb65267ef03b7144e1c887bf067cf2a","html_url":"https://github.com/1powechri2/Rails-Engine/commit/95d354a0beb65267ef03b7144e1c887bf067cf2a","comments_url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/95d354a0beb65267ef03b7144e1c887bf067cf2a/comments","author":{"login":"1powechri2","id":34900620,"node_id":"MDQ6VXNlcjM0OTAwNjIw","avatar_url":"https://avatars1.githubusercontent.com/u/34900620?v=4","gravatar_id":"","url":"https://api.github.com/users/1powechri2","html_url":"https://github.com/1powechri2","followers_url":"https://api.github.com/users/1powechri2/followers","following_url":"https://api.github.com/users/1powechri2/following{/other_user}","gists_url":"https://api.github.com/users/1powechri2/gists{/gist_id}","starred_url":"https://api.github.com/users/1powechri2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1powechri2/subscriptions","organizations_url":"https://api.github.com/users/1powechri2/orgs","repos_url":"https://api.github.com/users/1powechri2/repos","events_url":"https://api.github.com/users/1powechri2/events{/privacy}","received_events_url":"https://api.github.com/users/1powechri2/received_events","type":"User","site_admin":false},"committer":{"login":"1powechri2","id":34900620,"node_id":"MDQ6VXNlcjM0OTAwNjIw","avatar_url":"https://avatars1.githubusercontent.com/u/34900620?v=4","gravatar_id":"","url":"https://api.github.com/users/1powechri2","html_url":"https://github.com/1powechri2","followers_url":"https://api.github.com/users/1powechri2/followers","following_url":"https://api.github.com/users/1powechri2/following{/other_user}","gists_url":"https://api.github.com/users/1powechri2/gists{/gist_id}","starred_url":"https://api.github.com/users/1powechri2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1powechri2/subscriptions","organizations_url":"https://api.github.com/users/1powechri2/orgs","repos_url":"https://api.github.com/users/1powechri2/repos","events_url":"https://api.github.com/users/1powechri2/events{/privacy}","received_events_url":"https://api.github.com/users/1powechri2/received_events","type":"User","site_admin":false},"parents":[{"sha":"eb979bb298f06fa1408d3dd04c7a332185c05586","url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/eb979bb298f06fa1408d3dd04c7a332185c05586","html_url":"https://github.com/1powechri2/Rails-Engine/commit/eb979bb298f06fa1408d3dd04c7a332185c05586"}],"stats":{"total":65,"additions":65,"deletions":0},"files":[{"sha":"d1184aeb069eca8e15054a73aa6c9bbb3fc605f5","filename":"app/controllers/api/v1/items/most_revenue_controller.rb","status":"added","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/95d354a0beb65267ef03b7144e1c887bf067cf2a/app/controllers/api/v1/items/most_revenue_controller.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/95d354a0beb65267ef03b7144e1c887bf067cf2a/app/controllers/api/v1/items/most_revenue_controller.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/controllers/api/v1/items/most_revenue_controller.rb?ref=95d354a0beb65267ef03b7144e1c887bf067cf2a","patch":"@@
        -0,0 +1,5 @@\n+class Api::V1::Items::MostRevenueController < ApplicationController\n+  def
        index\n+    render json: Item.most_revenue(params[:quantity])\n+  end\n+end"},{"sha":"8f64d832721a11af5411d9fe1c2998c015f21a4d","filename":"app/models/item.rb","status":"modified","additions":8,"deletions":0,"changes":8,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/95d354a0beb65267ef03b7144e1c887bf067cf2a/app/models/item.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/95d354a0beb65267ef03b7144e1c887bf067cf2a/app/models/item.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/models/item.rb?ref=95d354a0beb65267ef03b7144e1c887bf067cf2a","patch":"@@
        -2,4 +2,12 @@ class Item < ApplicationRecord\n   has_many :invoice_items\n   has_many
        :invoices, through: :invoice_items\n   belongs_to :merchant\n+\n+  def self.most_revenue(x
        = 3)\n+    select(''items.*, sum(invoice_items.quantity * invoice_items.unit_price)
        as revenue'').\n+    joins(invoices: :transactions).\n+    where(transactions:
        {result: ''success''}).\n+    group(:id).\n+    order(''revenue desc'')\n+  end\n
        end"},{"sha":"d8ca56c2fea71139535fdf168449f245a79b6f60","filename":"config/routes.rb","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/95d354a0beb65267ef03b7144e1c887bf067cf2a/config/routes.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/95d354a0beb65267ef03b7144e1c887bf067cf2a/config/routes.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/config/routes.rb?ref=95d354a0beb65267ef03b7144e1c887bf067cf2a","patch":"@@
        -27,6 +27,7 @@\n       get ''/items/find_all'', to: ''items/search#index''\n       get
        ''/items/:id/invoice_items'', to: ''items/invoice_items_relation#index''\n       get
        ''/items/:id/merchant'', to: ''items/merchant_relation#show''\n+      get
        ''/items/most_revenue'', to: ''items/most_revenue#index''\n       resources
        :items, only: [:index, :show]\n       get ''/customers/find'', to: ''customers/search#show''\n       get
        ''/customers/find_all'', to: ''customers/search#index''"},{"sha":"9716542251d3b443a48ff714617ed3982bc50021","filename":"spec/models/item_spec.rb","status":"modified","additions":20,"deletions":0,"changes":20,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/95d354a0beb65267ef03b7144e1c887bf067cf2a/spec/models/item_spec.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/95d354a0beb65267ef03b7144e1c887bf067cf2a/spec/models/item_spec.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/spec/models/item_spec.rb?ref=95d354a0beb65267ef03b7144e1c887bf067cf2a","patch":"@@
        -4,4 +4,24 @@\n   it { should have_many(:invoice_items) }\n   it { should
        have_many(:invoices).through(:invoice_items) }\n   it { should belong_to(:merchant)
        }\n+\n+  describe ''class methods'' do\n+    it ''returns the top items ranked
        by revenue'' do\n+      item1 = create(:item)\n+      item2 = create(:item)\n+      item3
        = create(:item)\n+\n+      invoice1 = create(:invoice)\n+      invoice2 =
        create(:invoice)\n+\n+      invoice_item = create(:invoice_item, invoice_id:
        invoice1.id, item_id: item1.id, unit_price: 80, quantity: 4)\n+      invoice_item
        = create(:invoice_item, invoice_id: invoice2.id, item_id: item2.id, unit_price:
        40, quantity: 20)\n+      invoice_item = create(:invoice_item, invoice_id:
        invoice1.id, item_id: item3.id, unit_price: 80, quantity: 2)\n+\n+      transaction1
        = create(:transaction, invoice_id: invoice1.id, result: ''success'')\n+      transaction2
        = create(:transaction, invoice_id: invoice2.id, result: ''success'')\n+\n+      expect(Item.most_revenue(3)).to
        eq([item2, item1, item3])\n+    end\n+  end\n end"},{"sha":"c9e054fcb4d092c9bbb9b9431cfc211bc87982ab","filename":"spec/requests/api/v1/items_business_logic_spec.rb","status":"added","additions":31,"deletions":0,"changes":31,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/95d354a0beb65267ef03b7144e1c887bf067cf2a/spec/requests/api/v1/items_business_logic_spec.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/95d354a0beb65267ef03b7144e1c887bf067cf2a/spec/requests/api/v1/items_business_logic_spec.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/spec/requests/api/v1/items_business_logic_spec.rb?ref=95d354a0beb65267ef03b7144e1c887bf067cf2a","patch":"@@
        -0,0 +1,31 @@\n+require ''rails_helper''\n+\n+describe ''Api for index business
        logic'' do\n+  context ''GET /api/v1/items/most_revenue?quantity=x'' do\n+    it
        ''returns api for the top items ranked by revenue'' do\n+      item1 = create(:item)\n+      item2
        = create(:item)\n+      item3 = create(:item)\n+\n+      invoice1 = create(:invoice)\n+      invoice2
        = create(:invoice)\n+\n+      invoice_item = create(:invoice_item, invoice_id:
        invoice1.id, item_id: item1.id, unit_price: 80, quantity: 4)\n+      invoice_item
        = create(:invoice_item, invoice_id: invoice2.id, item_id: item2.id, unit_price:
        40, quantity: 20)\n+      invoice_item = create(:invoice_item, invoice_id:
        invoice1.id, item_id: item3.id, unit_price: 80, quantity: 2)\n+\n+      transaction1
        = create(:transaction, invoice_id: invoice1.id, result: ''success'')\n+      transaction2
        = create(:transaction, invoice_id: invoice2.id, result: ''success'')\n+\n+      expect(Item.most_revenue(3)).to
        eq([item2, item1, item3])\n+\n+      get \"/api/v1/items/most_revenue?quantity=3\"\n+\n+      expect(response).to
        be_successful\n+\n+      items = JSON.parse(response.body)\n+\n+      expect(items.length).to
        eq(3)\n+    end\n+  end\n+end"}]}'
    http_version: 
  recorded_at: Fri, 24 Aug 2018 14:27:35 GMT
- request:
    method: get
    uri: https://api.github.com/repos/1powechri2/Rails-Engine/commits/caa17c9725c7c4c71b955fd9fcbc72cd43785d3d
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Faraday v0.15.2
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - GitHub.com
      Date:
      - Fri, 24 Aug 2018 14:27:23 GMT
      Content-Type:
      - application/json; charset=utf-8
      Transfer-Encoding:
      - chunked
      Status:
      - 200 OK
      X-Ratelimit-Limit:
      - '60'
      X-Ratelimit-Remaining:
      - '41'
      X-Ratelimit-Reset:
      - '1535122878'
      Cache-Control:
      - public, max-age=60, s-maxage=60
      Vary:
      - Accept
      Etag:
      - W/"90e7188b271d3120dc1d2a46b3e5d5de"
      Last-Modified:
      - Fri, 17 Aug 2018 01:58:47 GMT
      X-Github-Media-Type:
      - github.v3; format=json
      Access-Control-Expose-Headers:
      - ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining,
        X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
      Access-Control-Allow-Origin:
      - "*"
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      X-Frame-Options:
      - deny
      X-Content-Type-Options:
      - nosniff
      X-Xss-Protection:
      - 1; mode=block
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Content-Security-Policy:
      - default-src 'none'
      X-Runtime-Rack:
      - '0.100139'
      X-Github-Request-Id:
      - F9DE:55A3:F1C800:1EACBB1:5B8015CB
    body:
      encoding: ASCII-8BIT
      string: '{"sha":"caa17c9725c7c4c71b955fd9fcbc72cd43785d3d","node_id":"MDY6Q29tbWl0MTQ0NjI3MjQxOmNhYTE3Yzk3MjVjN2M0YzcxYjk1NWZkOWZjYmM3MmNkNDM3ODVkM2Q=","commit":{"author":{"name":"Chris
        Powell","email":"chris.ian.powell@gmail.com","date":"2018-08-17T01:58:47Z"},"committer":{"name":"Chris
        Powell","email":"chris.ian.powell@gmail.com","date":"2018-08-17T01:58:47Z"},"message":"adds
        items business functionality for most items sold","tree":{"sha":"3d910f73cc98b4c7c3b9dcc31ed2d6bb50fad097","url":"https://api.github.com/repos/1powechri2/Rails-Engine/git/trees/3d910f73cc98b4c7c3b9dcc31ed2d6bb50fad097"},"url":"https://api.github.com/repos/1powechri2/Rails-Engine/git/commits/caa17c9725c7c4c71b955fd9fcbc72cd43785d3d","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/caa17c9725c7c4c71b955fd9fcbc72cd43785d3d","html_url":"https://github.com/1powechri2/Rails-Engine/commit/caa17c9725c7c4c71b955fd9fcbc72cd43785d3d","comments_url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/caa17c9725c7c4c71b955fd9fcbc72cd43785d3d/comments","author":{"login":"1powechri2","id":34900620,"node_id":"MDQ6VXNlcjM0OTAwNjIw","avatar_url":"https://avatars1.githubusercontent.com/u/34900620?v=4","gravatar_id":"","url":"https://api.github.com/users/1powechri2","html_url":"https://github.com/1powechri2","followers_url":"https://api.github.com/users/1powechri2/followers","following_url":"https://api.github.com/users/1powechri2/following{/other_user}","gists_url":"https://api.github.com/users/1powechri2/gists{/gist_id}","starred_url":"https://api.github.com/users/1powechri2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1powechri2/subscriptions","organizations_url":"https://api.github.com/users/1powechri2/orgs","repos_url":"https://api.github.com/users/1powechri2/repos","events_url":"https://api.github.com/users/1powechri2/events{/privacy}","received_events_url":"https://api.github.com/users/1powechri2/received_events","type":"User","site_admin":false},"committer":{"login":"1powechri2","id":34900620,"node_id":"MDQ6VXNlcjM0OTAwNjIw","avatar_url":"https://avatars1.githubusercontent.com/u/34900620?v=4","gravatar_id":"","url":"https://api.github.com/users/1powechri2","html_url":"https://github.com/1powechri2","followers_url":"https://api.github.com/users/1powechri2/followers","following_url":"https://api.github.com/users/1powechri2/following{/other_user}","gists_url":"https://api.github.com/users/1powechri2/gists{/gist_id}","starred_url":"https://api.github.com/users/1powechri2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1powechri2/subscriptions","organizations_url":"https://api.github.com/users/1powechri2/orgs","repos_url":"https://api.github.com/users/1powechri2/repos","events_url":"https://api.github.com/users/1powechri2/events{/privacy}","received_events_url":"https://api.github.com/users/1powechri2/received_events","type":"User","site_admin":false},"parents":[{"sha":"95d354a0beb65267ef03b7144e1c887bf067cf2a","url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/95d354a0beb65267ef03b7144e1c887bf067cf2a","html_url":"https://github.com/1powechri2/Rails-Engine/commit/95d354a0beb65267ef03b7144e1c887bf067cf2a"}],"stats":{"total":62,"additions":60,"deletions":2},"files":[{"sha":"6fba7d15e87f5dafb5cd2b076c9456b65dc2ef95","filename":"app/controllers/api/v1/items/most_items_controller.rb","status":"added","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/caa17c9725c7c4c71b955fd9fcbc72cd43785d3d/app/controllers/api/v1/items/most_items_controller.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/caa17c9725c7c4c71b955fd9fcbc72cd43785d3d/app/controllers/api/v1/items/most_items_controller.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/controllers/api/v1/items/most_items_controller.rb?ref=caa17c9725c7c4c71b955fd9fcbc72cd43785d3d","patch":"@@
        -0,0 +1,5 @@\n+class Api::V1::Items::MostItemsController < ApplicationController\n+  def
        index\n+    render json: Item.most_sold(params[:quantity])\n+  end\n+end"},{"sha":"c82867e7b7a20ebce1acbf6452374c6fe23f6c23","filename":"app/models/item.rb","status":"modified","additions":12,"deletions":2,"changes":14,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/caa17c9725c7c4c71b955fd9fcbc72cd43785d3d/app/models/item.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/caa17c9725c7c4c71b955fd9fcbc72cd43785d3d/app/models/item.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/models/item.rb?ref=caa17c9725c7c4c71b955fd9fcbc72cd43785d3d","patch":"@@
        -3,11 +3,21 @@ class Item < ApplicationRecord\n   has_many :invoices, through:
        :invoice_items\n   belongs_to :merchant\n \n-  def self.most_revenue(x = 3)\n+  def
        self.most_revenue(x = 5)\n     select(''items.*, sum(invoice_items.quantity
        * invoice_items.unit_price) as revenue'').\n     joins(invoices: :transactions).\n     where(transactions:
        {result: ''success''}).\n     group(:id).\n-    order(''revenue desc'')\n+    order(''revenue
        desc'').\n+    limit(x)\n+  end\n+\n+  def self.most_sold(x = 5)\n+    select(''items.*,
        sum(invoice_items.quantity) as total_sold'').\n+    joins(invoices: :transactions).\n+    where(transactions:
        {result: ''success''}).\n+    group(:id).\n+    order(''total_sold desc'').\n+    limit(x)\n   end\n
        end"},{"sha":"6f4017721da789e74c1510e2a7a375e898df08fe","filename":"config/routes.rb","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/caa17c9725c7c4c71b955fd9fcbc72cd43785d3d/config/routes.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/caa17c9725c7c4c71b955fd9fcbc72cd43785d3d/config/routes.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/config/routes.rb?ref=caa17c9725c7c4c71b955fd9fcbc72cd43785d3d","patch":"@@
        -28,6 +28,7 @@\n       get ''/items/:id/invoice_items'', to: ''items/invoice_items_relation#index''\n       get
        ''/items/:id/merchant'', to: ''items/merchant_relation#show''\n       get
        ''/items/most_revenue'', to: ''items/most_revenue#index''\n+      get ''/items/most_items'',
        to: ''items/most_items#index''\n       resources :items, only: [:index, :show]\n       get
        ''/customers/find'', to: ''customers/search#show''\n       get ''/customers/find_all'',
        to: ''customers/search#index''"},{"sha":"c5893ac4e1f0ae38e675b4fcc65a25db0043dcbe","filename":"spec/models/item_spec.rb","status":"modified","additions":17,"deletions":0,"changes":17,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/caa17c9725c7c4c71b955fd9fcbc72cd43785d3d/spec/models/item_spec.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/caa17c9725c7c4c71b955fd9fcbc72cd43785d3d/spec/models/item_spec.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/spec/models/item_spec.rb?ref=caa17c9725c7c4c71b955fd9fcbc72cd43785d3d","patch":"@@
        -23,5 +23,22 @@\n \n       expect(Item.most_revenue(3)).to eq([item2, item1,
        item3])\n     end\n+    it ''returns the top items ranked by number sold''
        do\n+      item1 = create(:item)\n+      item2 = create(:item)\n+      item3
        = create(:item)\n+\n+      invoice1 = create(:invoice)\n+      invoice2 =
        create(:invoice)\n+\n+      invoice_item = create(:invoice_item, invoice_id:
        invoice1.id, item_id: item1.id, unit_price: 80, quantity: 4)\n+      invoice_item
        = create(:invoice_item, invoice_id: invoice2.id, item_id: item2.id, unit_price:
        40, quantity: 20)\n+      invoice_item = create(:invoice_item, invoice_id:
        invoice1.id, item_id: item3.id, unit_price: 80, quantity: 2)\n+\n+      transaction1
        = create(:transaction, invoice_id: invoice1.id, result: ''success'')\n+      transaction2
        = create(:transaction, invoice_id: invoice2.id, result: ''success'')\n+\n+      expect(Item.most_sold(3)).to
        eq([item2, item1, item3])\n+    end\n   end\n end"},{"sha":"62c8f6ab6ae8ff8d30e75f0cc431a943e4f9880d","filename":"spec/requests/api/v1/items_business_logic_request_spec.rb","status":"renamed","additions":25,"deletions":0,"changes":25,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/caa17c9725c7c4c71b955fd9fcbc72cd43785d3d/spec/requests/api/v1/items_business_logic_request_spec.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/caa17c9725c7c4c71b955fd9fcbc72cd43785d3d/spec/requests/api/v1/items_business_logic_request_spec.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/spec/requests/api/v1/items_business_logic_request_spec.rb?ref=caa17c9725c7c4c71b955fd9fcbc72cd43785d3d","patch":"@@
        -25,6 +25,31 @@\n \n       items = JSON.parse(response.body)\n \n+      expect(items.length).to
        eq(3)\n+    end\n+    it ''returns api for the top items ranked by total sold''
        do\n+      item1 = create(:item)\n+      item2 = create(:item)\n+      item3
        = create(:item)\n+\n+      invoice1 = create(:invoice)\n+      invoice2 =
        create(:invoice)\n+\n+      invoice_item = create(:invoice_item, invoice_id:
        invoice1.id, item_id: item1.id, unit_price: 80, quantity: 4)\n+      invoice_item
        = create(:invoice_item, invoice_id: invoice2.id, item_id: item2.id, unit_price:
        40, quantity: 20)\n+      invoice_item = create(:invoice_item, invoice_id:
        invoice1.id, item_id: item3.id, unit_price: 80, quantity: 2)\n+\n+      transaction1
        = create(:transaction, invoice_id: invoice1.id, result: ''success'')\n+      transaction2
        = create(:transaction, invoice_id: invoice2.id, result: ''success'')\n+\n+      expect(Item.most_revenue(3)).to
        eq([item2, item1, item3])\n+\n+      get \"/api/v1/items/most_items?quantity=3\"\n+\n+      expect(response).to
        be_successful\n+\n+      items = JSON.parse(response.body)\n+\n       expect(items.length).to
        eq(3)\n     end\n   end","previous_filename":"spec/requests/api/v1/items_business_logic_spec.rb"}]}'
    http_version: 
  recorded_at: Fri, 24 Aug 2018 14:27:36 GMT
- request:
    method: get
    uri: https://api.github.com/repos/1powechri2/Rails-Engine/commits/08452b6b87aae4497da72bbbaf4825b0755e7499
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Faraday v0.15.2
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - GitHub.com
      Date:
      - Fri, 24 Aug 2018 14:27:23 GMT
      Content-Type:
      - application/json; charset=utf-8
      Transfer-Encoding:
      - chunked
      Status:
      - 200 OK
      X-Ratelimit-Limit:
      - '60'
      X-Ratelimit-Remaining:
      - '40'
      X-Ratelimit-Reset:
      - '1535122878'
      Cache-Control:
      - public, max-age=60, s-maxage=60
      Vary:
      - Accept
      Etag:
      - W/"86bce8ac929e3559b077762cbda0d174"
      Last-Modified:
      - Fri, 17 Aug 2018 02:51:47 GMT
      X-Github-Media-Type:
      - github.v3; format=json
      Access-Control-Expose-Headers:
      - ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining,
        X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
      Access-Control-Allow-Origin:
      - "*"
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      X-Frame-Options:
      - deny
      X-Content-Type-Options:
      - nosniff
      X-Xss-Protection:
      - 1; mode=block
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Content-Security-Policy:
      - default-src 'none'
      X-Runtime-Rack:
      - '0.107495'
      X-Github-Request-Id:
      - BE8D:55A0:B0F5D2:18CF49B:5B8015CB
    body:
      encoding: ASCII-8BIT
      string: '{"sha":"08452b6b87aae4497da72bbbaf4825b0755e7499","node_id":"MDY6Q29tbWl0MTQ0NjI3MjQxOjA4NDUyYjZiODdhYWU0NDk3ZGE3MmJiYmFmNDgyNWIwNzU1ZTc0OTk=","commit":{"author":{"name":"Chris
        Powell","email":"chris.ian.powell@gmail.com","date":"2018-08-17T02:51:47Z"},"committer":{"name":"Chris
        Powell","email":"chris.ian.powell@gmail.com","date":"2018-08-17T02:51:47Z"},"message":"adds
        best day logic for items","tree":{"sha":"9c9ac3a6339dc4e9a96f7ae0f2918e984ef5fb78","url":"https://api.github.com/repos/1powechri2/Rails-Engine/git/trees/9c9ac3a6339dc4e9a96f7ae0f2918e984ef5fb78"},"url":"https://api.github.com/repos/1powechri2/Rails-Engine/git/commits/08452b6b87aae4497da72bbbaf4825b0755e7499","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/08452b6b87aae4497da72bbbaf4825b0755e7499","html_url":"https://github.com/1powechri2/Rails-Engine/commit/08452b6b87aae4497da72bbbaf4825b0755e7499","comments_url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/08452b6b87aae4497da72bbbaf4825b0755e7499/comments","author":{"login":"1powechri2","id":34900620,"node_id":"MDQ6VXNlcjM0OTAwNjIw","avatar_url":"https://avatars1.githubusercontent.com/u/34900620?v=4","gravatar_id":"","url":"https://api.github.com/users/1powechri2","html_url":"https://github.com/1powechri2","followers_url":"https://api.github.com/users/1powechri2/followers","following_url":"https://api.github.com/users/1powechri2/following{/other_user}","gists_url":"https://api.github.com/users/1powechri2/gists{/gist_id}","starred_url":"https://api.github.com/users/1powechri2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1powechri2/subscriptions","organizations_url":"https://api.github.com/users/1powechri2/orgs","repos_url":"https://api.github.com/users/1powechri2/repos","events_url":"https://api.github.com/users/1powechri2/events{/privacy}","received_events_url":"https://api.github.com/users/1powechri2/received_events","type":"User","site_admin":false},"committer":{"login":"1powechri2","id":34900620,"node_id":"MDQ6VXNlcjM0OTAwNjIw","avatar_url":"https://avatars1.githubusercontent.com/u/34900620?v=4","gravatar_id":"","url":"https://api.github.com/users/1powechri2","html_url":"https://github.com/1powechri2","followers_url":"https://api.github.com/users/1powechri2/followers","following_url":"https://api.github.com/users/1powechri2/following{/other_user}","gists_url":"https://api.github.com/users/1powechri2/gists{/gist_id}","starred_url":"https://api.github.com/users/1powechri2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1powechri2/subscriptions","organizations_url":"https://api.github.com/users/1powechri2/orgs","repos_url":"https://api.github.com/users/1powechri2/repos","events_url":"https://api.github.com/users/1powechri2/events{/privacy}","received_events_url":"https://api.github.com/users/1powechri2/received_events","type":"User","site_admin":false},"parents":[{"sha":"caa17c9725c7c4c71b955fd9fcbc72cd43785d3d","url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/caa17c9725c7c4c71b955fd9fcbc72cd43785d3d","html_url":"https://github.com/1powechri2/Rails-Engine/commit/caa17c9725c7c4c71b955fd9fcbc72cd43785d3d"}],"stats":{"total":53,"additions":53,"deletions":0},"files":[{"sha":"2e158fc6e9a0142bd64f7e64a4aef460a5480a54","filename":"app/controllers/api/v1/items/best_day_controller.rb","status":"added","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/08452b6b87aae4497da72bbbaf4825b0755e7499/app/controllers/api/v1/items/best_day_controller.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/08452b6b87aae4497da72bbbaf4825b0755e7499/app/controllers/api/v1/items/best_day_controller.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/controllers/api/v1/items/best_day_controller.rb?ref=08452b6b87aae4497da72bbbaf4825b0755e7499","patch":"@@
        -0,0 +1,5 @@\n+class Api::V1::Items::BestDayController < ApplicationController\n+  def
        show\n+    render json: Item.find(params[:id]).best_day\n+  end\n+end"},{"sha":"8e2acedac6b9dd25d0115de2a74d87c9b97aedce","filename":"app/models/item.rb","status":"modified","additions":9,"deletions":0,"changes":9,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/08452b6b87aae4497da72bbbaf4825b0755e7499/app/models/item.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/08452b6b87aae4497da72bbbaf4825b0755e7499/app/models/item.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/models/item.rb?ref=08452b6b87aae4497da72bbbaf4825b0755e7499","patch":"@@
        -20,4 +20,13 @@ def self.most_sold(x = 5)\n     order(''total_sold desc'').\n     limit(x)\n   end\n+\n+  def
        best_day\n+    invoices.\n+    select(''invoices.*, count(invoices.*) as total_sales'').\n+    joins(:transactions).where(transactions:
        {result: ''success''}).\n+    group(:id).\n+    order(''total_sales desc'').\n+    order(''updated_at
        desc'').first.updated_at\n+  end\n end"},{"sha":"149882cf54417a1a66753beda586ad5c702c76dd","filename":"config/routes.rb","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/08452b6b87aae4497da72bbbaf4825b0755e7499/config/routes.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/08452b6b87aae4497da72bbbaf4825b0755e7499/config/routes.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/config/routes.rb?ref=08452b6b87aae4497da72bbbaf4825b0755e7499","patch":"@@
        -29,6 +29,7 @@\n       get ''/items/:id/merchant'', to: ''items/merchant_relation#show''\n       get
        ''/items/most_revenue'', to: ''items/most_revenue#index''\n       get ''/items/most_items'',
        to: ''items/most_items#index''\n+      get ''/items/:id/best_day'', to: ''items/best_day#show''\n       resources
        :items, only: [:index, :show]\n       get ''/customers/find'', to: ''customers/search#show''\n       get
        ''/customers/find_all'', to: ''customers/search#index''"},{"sha":"6370d633692e624791f15deb49a867607d0afb67","filename":"spec/models/item_spec.rb","status":"modified","additions":16,"deletions":0,"changes":16,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/08452b6b87aae4497da72bbbaf4825b0755e7499/spec/models/item_spec.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/08452b6b87aae4497da72bbbaf4825b0755e7499/spec/models/item_spec.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/spec/models/item_spec.rb?ref=08452b6b87aae4497da72bbbaf4825b0755e7499","patch":"@@
        -40,5 +40,21 @@\n \n       expect(Item.most_sold(3)).to eq([item2, item1,
        item3])\n     end\n+    it ''returns the date for an item when it sold the
        most'' do\n+      item = create(:item)\n+\n+      invoice1 = create(:invoice,
        updated_at: \"2012-03-09 08:57:21 UTC\")\n+      invoice2 = create(:invoice,
        updated_at: \"2012-04-09 08:57:21 UTC\")\n+      invoice3 = create(:invoice,
        updated_at: \"2012-05-09 08:57:21 UTC\")\n+\n+      invoice_item = create(:invoice_item,
        invoice_id: invoice1.id, item_id: item.id, unit_price: 80, quantity: 4)\n+      invoice_item
        = create(:invoice_item, invoice_id: invoice2.id, item_id: item.id, unit_price:
        80, quantity: 20)\n+      invoice_item = create(:invoice_item, invoice_id:
        invoice3.id, item_id: item.id, unit_price: 80, quantity: 2)\n+\n+      transaction1
        = create(:transaction, invoice_id: invoice1.id, result: ''success'')\n+      transaction2
        = create(:transaction, invoice_id: invoice2.id, result: ''success'')\n+\n+      expect(item.best_day).to
        eq(invoice2.updated_at)\n+    end\n   end\n end"},{"sha":"414ecd6a504240c76825e0a97ff63257715978f4","filename":"spec/requests/api/v1/items_business_logic_request_spec.rb","status":"modified","additions":22,"deletions":0,"changes":22,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/08452b6b87aae4497da72bbbaf4825b0755e7499/spec/requests/api/v1/items_business_logic_request_spec.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/08452b6b87aae4497da72bbbaf4825b0755e7499/spec/requests/api/v1/items_business_logic_request_spec.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/spec/requests/api/v1/items_business_logic_request_spec.rb?ref=08452b6b87aae4497da72bbbaf4825b0755e7499","patch":"@@
        -52,5 +52,27 @@\n \n       expect(items.length).to eq(3)\n     end\n+    it
        ''returns the date for an item when it sold the most'' do\n+      item = create(:item)\n+\n+      invoice1
        = create(:invoice, updated_at: \"2012-03-09 08:57:21 UTC\")\n+      invoice2
        = create(:invoice, updated_at: \"2012-04-09 08:57:21 UTC\")\n+      invoice3
        = create(:invoice, updated_at: \"2012-05-09 08:57:21 UTC\")\n+\n+      invoice_item
        = create(:invoice_item, invoice_id: invoice1.id, item_id: item.id, unit_price:
        80, quantity: 4)\n+      invoice_item = create(:invoice_item, invoice_id:
        invoice2.id, item_id: item.id, unit_price: 80, quantity: 20)\n+      invoice_item
        = create(:invoice_item, invoice_id: invoice3.id, item_id: item.id, unit_price:
        80, quantity: 2)\n+\n+      transaction1 = create(:transaction, invoice_id:
        invoice1.id, result: ''success'')\n+      transaction2 = create(:transaction,
        invoice_id: invoice2.id, result: ''success'')\n+\n+      get \"/api/v1/items/#{item.id}/best_day\"\n+\n+      expect(response).to
        be_successful\n+\n+      date = JSON.parse(response.body)\n+\n+      expect(date).to
        eq(\"2012-04-09T08:57:21.000Z\")\n+    end\n   end\n end"}]}'
    http_version: 
  recorded_at: Fri, 24 Aug 2018 14:27:36 GMT
- request:
    method: get
    uri: https://api.github.com/repos/1powechri2/Rails-Engine/commits/d59c99c5088bcd41a2e39e0bf3b42ede997e2863
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Faraday v0.15.2
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - GitHub.com
      Date:
      - Fri, 24 Aug 2018 14:27:24 GMT
      Content-Type:
      - application/json; charset=utf-8
      Transfer-Encoding:
      - chunked
      Status:
      - 200 OK
      X-Ratelimit-Limit:
      - '60'
      X-Ratelimit-Remaining:
      - '39'
      X-Ratelimit-Reset:
      - '1535122878'
      Cache-Control:
      - public, max-age=60, s-maxage=60
      Vary:
      - Accept
      Etag:
      - W/"53d568a5cfa9562cb5752ba4058f66e6"
      Last-Modified:
      - Fri, 17 Aug 2018 04:25:39 GMT
      X-Github-Media-Type:
      - github.v3; format=json
      Access-Control-Expose-Headers:
      - ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining,
        X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
      Access-Control-Allow-Origin:
      - "*"
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      X-Frame-Options:
      - deny
      X-Content-Type-Options:
      - nosniff
      X-Xss-Protection:
      - 1; mode=block
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Content-Security-Policy:
      - default-src 'none'
      X-Runtime-Rack:
      - '0.078380'
      X-Github-Request-Id:
      - DE2E:55A0:B0F5E8:18CF4D1:5B8015CB
    body:
      encoding: ASCII-8BIT
      string: '{"sha":"d59c99c5088bcd41a2e39e0bf3b42ede997e2863","node_id":"MDY6Q29tbWl0MTQ0NjI3MjQxOmQ1OWM5OWM1MDg4YmNkNDFhMmUzOWUwYmYzYjQyZWRlOTk3ZTI4NjM=","commit":{"author":{"name":"Chris
        Powell","email":"chris.ian.powell@gmail.com","date":"2018-08-17T04:25:39Z"},"committer":{"name":"Chris
        Powell","email":"chris.ian.powell@gmail.com","date":"2018-08-17T04:25:39Z"},"message":"adds
        it all but boss mode","tree":{"sha":"f0cefd638575d8f92530264313a86a4f0033f443","url":"https://api.github.com/repos/1powechri2/Rails-Engine/git/trees/f0cefd638575d8f92530264313a86a4f0033f443"},"url":"https://api.github.com/repos/1powechri2/Rails-Engine/git/commits/d59c99c5088bcd41a2e39e0bf3b42ede997e2863","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/d59c99c5088bcd41a2e39e0bf3b42ede997e2863","html_url":"https://github.com/1powechri2/Rails-Engine/commit/d59c99c5088bcd41a2e39e0bf3b42ede997e2863","comments_url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/d59c99c5088bcd41a2e39e0bf3b42ede997e2863/comments","author":{"login":"1powechri2","id":34900620,"node_id":"MDQ6VXNlcjM0OTAwNjIw","avatar_url":"https://avatars1.githubusercontent.com/u/34900620?v=4","gravatar_id":"","url":"https://api.github.com/users/1powechri2","html_url":"https://github.com/1powechri2","followers_url":"https://api.github.com/users/1powechri2/followers","following_url":"https://api.github.com/users/1powechri2/following{/other_user}","gists_url":"https://api.github.com/users/1powechri2/gists{/gist_id}","starred_url":"https://api.github.com/users/1powechri2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1powechri2/subscriptions","organizations_url":"https://api.github.com/users/1powechri2/orgs","repos_url":"https://api.github.com/users/1powechri2/repos","events_url":"https://api.github.com/users/1powechri2/events{/privacy}","received_events_url":"https://api.github.com/users/1powechri2/received_events","type":"User","site_admin":false},"committer":{"login":"1powechri2","id":34900620,"node_id":"MDQ6VXNlcjM0OTAwNjIw","avatar_url":"https://avatars1.githubusercontent.com/u/34900620?v=4","gravatar_id":"","url":"https://api.github.com/users/1powechri2","html_url":"https://github.com/1powechri2","followers_url":"https://api.github.com/users/1powechri2/followers","following_url":"https://api.github.com/users/1powechri2/following{/other_user}","gists_url":"https://api.github.com/users/1powechri2/gists{/gist_id}","starred_url":"https://api.github.com/users/1powechri2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1powechri2/subscriptions","organizations_url":"https://api.github.com/users/1powechri2/orgs","repos_url":"https://api.github.com/users/1powechri2/repos","events_url":"https://api.github.com/users/1powechri2/events{/privacy}","received_events_url":"https://api.github.com/users/1powechri2/received_events","type":"User","site_admin":false},"parents":[{"sha":"08452b6b87aae4497da72bbbaf4825b0755e7499","url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/08452b6b87aae4497da72bbbaf4825b0755e7499","html_url":"https://github.com/1powechri2/Rails-Engine/commit/08452b6b87aae4497da72bbbaf4825b0755e7499"}],"stats":{"total":4,"additions":2,"deletions":2},"files":[{"sha":"42737d7735950da6bcf473331ab3b88dd95bc757","filename":"app/models/item.rb","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/d59c99c5088bcd41a2e39e0bf3b42ede997e2863/app/models/item.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/d59c99c5088bcd41a2e39e0bf3b42ede997e2863/app/models/item.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/models/item.rb?ref=d59c99c5088bcd41a2e39e0bf3b42ede997e2863","patch":"@@
        -23,8 +23,8 @@ def self.most_sold(x = 5)\n \n   def best_day\n     invoices.\n-    select(''invoices.*,
        count(invoices.*) as total_sales'').\n-    joins(:transactions).where(transactions:
        {result: ''success''}).\n+    select(''invoices.*, sum(invoice_items.quantity)
        as total_sales'').\n+    joins(:transactions, :invoice_items).where(transactions:
        {result: ''success''}).\n     group(:id).\n     order(''total_sales desc'').\n     order(''updated_at
        desc'').first.updated_at"}]}'
    http_version: 
  recorded_at: Fri, 24 Aug 2018 14:27:36 GMT
- request:
    method: get
    uri: https://api.github.com/repos/1powechri2/Rails-Engine/commits/cd10d7c84f4e7208a681adce61facf6b164599be
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Faraday v0.15.2
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - GitHub.com
      Date:
      - Fri, 24 Aug 2018 14:27:24 GMT
      Content-Type:
      - application/json; charset=utf-8
      Transfer-Encoding:
      - chunked
      Status:
      - 200 OK
      X-Ratelimit-Limit:
      - '60'
      X-Ratelimit-Remaining:
      - '38'
      X-Ratelimit-Reset:
      - '1535122878'
      Cache-Control:
      - public, max-age=60, s-maxage=60
      Vary:
      - Accept
      Etag:
      - W/"33595310b6a6da5933827179edce1503"
      Last-Modified:
      - Fri, 17 Aug 2018 04:26:56 GMT
      X-Github-Media-Type:
      - github.v3; format=json
      Access-Control-Expose-Headers:
      - ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining,
        X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
      Access-Control-Allow-Origin:
      - "*"
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      X-Frame-Options:
      - deny
      X-Content-Type-Options:
      - nosniff
      X-Xss-Protection:
      - 1; mode=block
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Content-Security-Policy:
      - default-src 'none'
      X-Runtime-Rack:
      - '0.146379'
      X-Github-Request-Id:
      - 2317:55A2:747295:11762A2:5B8015CC
    body:
      encoding: ASCII-8BIT
      string: '{"sha":"cd10d7c84f4e7208a681adce61facf6b164599be","node_id":"MDY6Q29tbWl0MTQ0NjI3MjQxOmNkMTBkN2M4NGY0ZTcyMDhhNjgxYWRjZTYxZmFjZjZiMTY0NTk5YmU=","commit":{"author":{"name":"Christopher
        Powell","email":"34900620+1powechri2@users.noreply.github.com","date":"2018-08-17T04:26:56Z"},"committer":{"name":"GitHub","email":"noreply@github.com","date":"2018-08-17T04:26:56Z"},"message":"Merge
        pull request #19 from 1powechri2/merchant-business-logic\n\nMerchant business
        logic","tree":{"sha":"f0cefd638575d8f92530264313a86a4f0033f443","url":"https://api.github.com/repos/1powechri2/Rails-Engine/git/trees/f0cefd638575d8f92530264313a86a4f0033f443"},"url":"https://api.github.com/repos/1powechri2/Rails-Engine/git/commits/cd10d7c84f4e7208a681adce61facf6b164599be","comment_count":0,"verification":{"verified":true,"reason":"valid","signature":"-----BEGIN
        PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJbdk6QCRBK7hj4Ov3rIwAAdHIIAJw2n31/rX4KRuECI+rkGh4N\nycFWcdXWLkY2sSNB6QkqunzdiSKB4OScPczdM3Ux/lTIPUPDs/p1hZKAjay926Di\n55k6d/gW/T04QxeOVOS3PRhodB1VPPnjQ/G1IJnPkEqyevixOy8xecGuglhOfsfG\nDdaGei7WUHnMLyy/z13P9oCR2HREn45cDuE9HHzLetJF3UTiaJpkhRxUVZWeuJK9\nzGocL4ow0QqVjs/SZouX7hXl41XTzW5sWz1rqsA40IftqZSzpM71bGQRV/9UetyJ\nmCpmymOW+XbzTHym/lG+IV1qF9X5a0A8CAWg5ZKcAQwNBLG0K9WqFqtE4aZd9Ws=\n=cLB3\n-----END
        PGP SIGNATURE-----\n","payload":"tree f0cefd638575d8f92530264313a86a4f0033f443\nparent
        5de05a9ae067d5b48d648040c6463708acbfdd76\nparent d59c99c5088bcd41a2e39e0bf3b42ede997e2863\nauthor
        Christopher Powell <34900620+1powechri2@users.noreply.github.com> 1534480016
        -0600\ncommitter GitHub <noreply@github.com> 1534480016 -0600\n\nMerge pull
        request #19 from 1powechri2/merchant-business-logic\n\nMerchant business logic"}},"url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/cd10d7c84f4e7208a681adce61facf6b164599be","html_url":"https://github.com/1powechri2/Rails-Engine/commit/cd10d7c84f4e7208a681adce61facf6b164599be","comments_url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/cd10d7c84f4e7208a681adce61facf6b164599be/comments","author":{"login":"1powechri2","id":34900620,"node_id":"MDQ6VXNlcjM0OTAwNjIw","avatar_url":"https://avatars1.githubusercontent.com/u/34900620?v=4","gravatar_id":"","url":"https://api.github.com/users/1powechri2","html_url":"https://github.com/1powechri2","followers_url":"https://api.github.com/users/1powechri2/followers","following_url":"https://api.github.com/users/1powechri2/following{/other_user}","gists_url":"https://api.github.com/users/1powechri2/gists{/gist_id}","starred_url":"https://api.github.com/users/1powechri2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1powechri2/subscriptions","organizations_url":"https://api.github.com/users/1powechri2/orgs","repos_url":"https://api.github.com/users/1powechri2/repos","events_url":"https://api.github.com/users/1powechri2/events{/privacy}","received_events_url":"https://api.github.com/users/1powechri2/received_events","type":"User","site_admin":false},"committer":{"login":"web-flow","id":19864447,"node_id":"MDQ6VXNlcjE5ODY0NDQ3","avatar_url":"https://avatars3.githubusercontent.com/u/19864447?v=4","gravatar_id":"","url":"https://api.github.com/users/web-flow","html_url":"https://github.com/web-flow","followers_url":"https://api.github.com/users/web-flow/followers","following_url":"https://api.github.com/users/web-flow/following{/other_user}","gists_url":"https://api.github.com/users/web-flow/gists{/gist_id}","starred_url":"https://api.github.com/users/web-flow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/web-flow/subscriptions","organizations_url":"https://api.github.com/users/web-flow/orgs","repos_url":"https://api.github.com/users/web-flow/repos","events_url":"https://api.github.com/users/web-flow/events{/privacy}","received_events_url":"https://api.github.com/users/web-flow/received_events","type":"User","site_admin":false},"parents":[{"sha":"5de05a9ae067d5b48d648040c6463708acbfdd76","url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/5de05a9ae067d5b48d648040c6463708acbfdd76","html_url":"https://github.com/1powechri2/Rails-Engine/commit/5de05a9ae067d5b48d648040c6463708acbfdd76"},{"sha":"d59c99c5088bcd41a2e39e0bf3b42ede997e2863","url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/d59c99c5088bcd41a2e39e0bf3b42ede997e2863","html_url":"https://github.com/1powechri2/Rails-Engine/commit/d59c99c5088bcd41a2e39e0bf3b42ede997e2863"}],"stats":{"total":535,"additions":535,"deletions":0},"files":[{"sha":"696119945ff7c74c1dead5536a9b7e971949aed0","filename":"app/controllers/api/v1/customers/favorite_merchant_controller.rb","status":"added","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/cd10d7c84f4e7208a681adce61facf6b164599be/app/controllers/api/v1/customers/favorite_merchant_controller.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/cd10d7c84f4e7208a681adce61facf6b164599be/app/controllers/api/v1/customers/favorite_merchant_controller.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/controllers/api/v1/customers/favorite_merchant_controller.rb?ref=cd10d7c84f4e7208a681adce61facf6b164599be","patch":"@@
        -0,0 +1,5 @@\n+class Api::V1::Customers::FavoriteMerchantController < ApplicationController\n+  def
        show\n+    render json: Customer.find(params[:id]).favorite_merchant\n+  end\n+end"},{"sha":"2e158fc6e9a0142bd64f7e64a4aef460a5480a54","filename":"app/controllers/api/v1/items/best_day_controller.rb","status":"added","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/cd10d7c84f4e7208a681adce61facf6b164599be/app/controllers/api/v1/items/best_day_controller.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/cd10d7c84f4e7208a681adce61facf6b164599be/app/controllers/api/v1/items/best_day_controller.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/controllers/api/v1/items/best_day_controller.rb?ref=cd10d7c84f4e7208a681adce61facf6b164599be","patch":"@@
        -0,0 +1,5 @@\n+class Api::V1::Items::BestDayController < ApplicationController\n+  def
        show\n+    render json: Item.find(params[:id]).best_day\n+  end\n+end"},{"sha":"6fba7d15e87f5dafb5cd2b076c9456b65dc2ef95","filename":"app/controllers/api/v1/items/most_items_controller.rb","status":"added","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/cd10d7c84f4e7208a681adce61facf6b164599be/app/controllers/api/v1/items/most_items_controller.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/cd10d7c84f4e7208a681adce61facf6b164599be/app/controllers/api/v1/items/most_items_controller.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/controllers/api/v1/items/most_items_controller.rb?ref=cd10d7c84f4e7208a681adce61facf6b164599be","patch":"@@
        -0,0 +1,5 @@\n+class Api::V1::Items::MostItemsController < ApplicationController\n+  def
        index\n+    render json: Item.most_sold(params[:quantity])\n+  end\n+end"},{"sha":"d1184aeb069eca8e15054a73aa6c9bbb3fc605f5","filename":"app/controllers/api/v1/items/most_revenue_controller.rb","status":"added","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/cd10d7c84f4e7208a681adce61facf6b164599be/app/controllers/api/v1/items/most_revenue_controller.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/cd10d7c84f4e7208a681adce61facf6b164599be/app/controllers/api/v1/items/most_revenue_controller.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/controllers/api/v1/items/most_revenue_controller.rb?ref=cd10d7c84f4e7208a681adce61facf6b164599be","patch":"@@
        -0,0 +1,5 @@\n+class Api::V1::Items::MostRevenueController < ApplicationController\n+  def
        index\n+    render json: Item.most_revenue(params[:quantity])\n+  end\n+end"},{"sha":"2dc680c637e0044ab6eacf6fcfe6b282357366c6","filename":"app/controllers/api/v1/merchants/favorite_customer_controller.rb","status":"added","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/cd10d7c84f4e7208a681adce61facf6b164599be/app/controllers/api/v1/merchants/favorite_customer_controller.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/cd10d7c84f4e7208a681adce61facf6b164599be/app/controllers/api/v1/merchants/favorite_customer_controller.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/controllers/api/v1/merchants/favorite_customer_controller.rb?ref=cd10d7c84f4e7208a681adce61facf6b164599be","patch":"@@
        -0,0 +1,5 @@\n+class Api::V1::Merchants::FavoriteCustomerController < ApplicationController\n+  def
        show\n+    render json: Merchant.find(params[:id]).favorite_customer\n+  end\n+end"},{"sha":"1b36a6d219d01867be3ffa175481fc2b2a2d2628","filename":"app/controllers/api/v1/merchants/most_items_controller.rb","status":"added","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/cd10d7c84f4e7208a681adce61facf6b164599be/app/controllers/api/v1/merchants/most_items_controller.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/cd10d7c84f4e7208a681adce61facf6b164599be/app/controllers/api/v1/merchants/most_items_controller.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/controllers/api/v1/merchants/most_items_controller.rb?ref=cd10d7c84f4e7208a681adce61facf6b164599be","patch":"@@
        -0,0 +1,5 @@\n+class Api::V1::Merchants::MostItemsController < ApplicationController\n+  def
        index\n+    render json: Merchant.most_items_sold(params[:quantity])\n+  end\n+end"},{"sha":"141deae137aa35281dc0d15377ece3e43637c888","filename":"app/controllers/api/v1/merchants/most_revenue_controller.rb","status":"added","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/cd10d7c84f4e7208a681adce61facf6b164599be/app/controllers/api/v1/merchants/most_revenue_controller.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/cd10d7c84f4e7208a681adce61facf6b164599be/app/controllers/api/v1/merchants/most_revenue_controller.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/controllers/api/v1/merchants/most_revenue_controller.rb?ref=cd10d7c84f4e7208a681adce61facf6b164599be","patch":"@@
        -0,0 +1,5 @@\n+class Api::V1::Merchants::MostRevenueController < ApplicationController\n+  def
        index\n+    render json: Merchant.most_revenue(params[:quantity])\n+  end\n+end"},{"sha":"3839d68b19c545bdaa1dd7f6166f0afa4a20d035","filename":"app/controllers/api/v1/merchants/revenue_controller.rb","status":"added","additions":18,"deletions":0,"changes":18,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/cd10d7c84f4e7208a681adce61facf6b164599be/app/controllers/api/v1/merchants/revenue_controller.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/cd10d7c84f4e7208a681adce61facf6b164599be/app/controllers/api/v1/merchants/revenue_controller.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/controllers/api/v1/merchants/revenue_controller.rb?ref=cd10d7c84f4e7208a681adce61facf6b164599be","patch":"@@
        -0,0 +1,18 @@\n+class Api::V1::Merchants::RevenueController < ApplicationController\n+  def
        show\n+    if !params[:date]\n+      revenue = Merchant.find(params[:id]).successful_transactions_total\n+      render
        json: {\"revenue\" => (revenue * 0.01).round(2).to_s}\n+    else\n+      date
        = Date.parse(\"#{params[:date]} 00.00.00. UTC\")\n+      revenue = Merchant.find(params[:id]).revenue_by_date(date)\n+      render
        json: {\"revenue\" => (revenue * 0.01).round(2).to_s}\n+    end\n+  end\n+\n+  def
        index\n+    date = Date.parse(\"#{params[:date]} 00.00.00. UTC\")\n+    revenue
        = Merchant.total_revenue_for_date(date)\n+    render json: {\"total_revenue\"
        => (revenue * 0.01).round(2).to_s}\n+  end\n+end"},{"sha":"35aadf9089aa6ba0d12ff2f4488a044fd0380ecd","filename":"app/models/customer.rb","status":"modified","additions":8,"deletions":0,"changes":8,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/cd10d7c84f4e7208a681adce61facf6b164599be/app/models/customer.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/cd10d7c84f4e7208a681adce61facf6b164599be/app/models/customer.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/models/customer.rb?ref=cd10d7c84f4e7208a681adce61facf6b164599be","patch":"@@
        -3,4 +3,12 @@ class Customer < ApplicationRecord\n   has_many :transactions,
        through: :invoices\n   has_many :merchants, through: :invoices\n   has_many
        :invoice_items, through: :invoices\n+\n+  def favorite_merchant\n+    merchants.select(''merchants.*,
        count(transactions.result) as trans'').\n+    joins(invoices: :transactions).\n+    where(transactions:
        {result: \"success\"}).\n+    group(:id).order(''trans desc'').\n+    limit(1)[0]\n+  end\n
        end"},{"sha":"42737d7735950da6bcf473331ab3b88dd95bc757","filename":"app/models/item.rb","status":"modified","additions":27,"deletions":0,"changes":27,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/cd10d7c84f4e7208a681adce61facf6b164599be/app/models/item.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/cd10d7c84f4e7208a681adce61facf6b164599be/app/models/item.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/models/item.rb?ref=cd10d7c84f4e7208a681adce61facf6b164599be","patch":"@@
        -2,4 +2,31 @@ class Item < ApplicationRecord\n   has_many :invoice_items\n   has_many
        :invoices, through: :invoice_items\n   belongs_to :merchant\n+\n+  def self.most_revenue(x
        = 5)\n+    select(''items.*, sum(invoice_items.quantity * invoice_items.unit_price)
        as revenue'').\n+    joins(invoices: :transactions).\n+    where(transactions:
        {result: ''success''}).\n+    group(:id).\n+    order(''revenue desc'').\n+    limit(x)\n+  end\n+\n+  def
        self.most_sold(x = 5)\n+    select(''items.*, sum(invoice_items.quantity)
        as total_sold'').\n+    joins(invoices: :transactions).\n+    where(transactions:
        {result: ''success''}).\n+    group(:id).\n+    order(''total_sold desc'').\n+    limit(x)\n+  end\n+\n+  def
        best_day\n+    invoices.\n+    select(''invoices.*, sum(invoice_items.quantity)
        as total_sales'').\n+    joins(:transactions, :invoice_items).where(transactions:
        {result: ''success''}).\n+    group(:id).\n+    order(''total_sales desc'').\n+    order(''updated_at
        desc'').first.updated_at\n+  end\n end"},{"sha":"e577d7a979b629f5189aee07d93b5b1d212dc90d","filename":"app/models/merchant.rb","status":"modified","additions":50,"deletions":0,"changes":50,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/cd10d7c84f4e7208a681adce61facf6b164599be/app/models/merchant.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/cd10d7c84f4e7208a681adce61facf6b164599be/app/models/merchant.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/models/merchant.rb?ref=cd10d7c84f4e7208a681adce61facf6b164599be","patch":"@@
        -2,6 +2,56 @@ class Merchant < ApplicationRecord\n   validates_presence_of
        :name\n   has_many :invoices\n   has_many :items\n+  has_many :customers,
        through: :invoices\n   has_many :transactions, through: :invoices\n   has_many
        :invoice_items, through: :invoices\n+\n+  def self.most_revenue(x = 5)\n+    select(''merchants.*,
        sum(invoice_items.unit_price * invoice_items.quantity) as revenue'')\n+    .joins(invoices:
        [:transactions, :invoice_items])\n+    .where(transactions: {result: ''success''})\n+    .group(:id)\n+    .order(''revenue
        desc'')\n+    .limit(x)\n+  end\n+\n+  def self.most_items_sold(x = 5)\n+    select(''merchants.*,
        sum(invoice_items.quantity) as item_count'')\n+    .joins(invoices: [:transactions,
        :invoice_items])\n+    .where(transactions: {result: ''success''})\n+    .group(:id)\n+    .order(''item_count
        desc'')\n+    .limit(x)\n+  end\n+\n+  def self.total_revenue_for_date(date)\n+    joins(invoices:
        [:transactions, :invoice_items]).\n+    where(transactions: {result: ''success''}).\n+    where(invoices:
        {updated_at: date.beginning_of_day..date.end_of_day}).\n+    sum(''quantity
        * unit_price'')\n+  end\n+\n+  def successful_transactions_total\n+    invoices.\n+    joins(:transactions,
        :invoice_items).\n+    where(transactions: {result: ''success''}).\n+    sum(''quantity
        * unit_price'')\n+  end\n+\n+  def revenue_by_date(date)\n+    invoices.\n+    joins(:transactions,
        :invoice_items).\n+    where(transactions: {result: ''success''}).\n+    where(invoices:
        {updated_at: date.beginning_of_day..date.end_of_day}).\n+    sum(''quantity
        * unit_price'')\n+  end\n+\n+  def favorite_customer\n+    customers.\n+    select(''customers.*,
        count(transactions.result) as trans'').\n+    joins(invoices: :transactions).where(transactions:
        {result: ''success''}).\n+    group(:id).\n+    order(''trans desc'').\n+    limit(1)[0]\n+  end\n
        end"},{"sha":"149882cf54417a1a66753beda586ad5c702c76dd","filename":"config/routes.rb","status":"modified","additions":9,"deletions":0,"changes":9,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/cd10d7c84f4e7208a681adce61facf6b164599be/config/routes.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/cd10d7c84f4e7208a681adce61facf6b164599be/config/routes.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/config/routes.rb?ref=cd10d7c84f4e7208a681adce61facf6b164599be","patch":"@@
        -5,6 +5,11 @@\n       get ''/merchants/find_all'', to: ''merchants/search#index''\n       get
        ''/merchants/:id/items'', to: ''merchants/items_relation#index''\n       get
        ''/merchants/:id/invoices'', to: ''merchants/invoices_relation#index''\n+      get
        ''/merchants/most_revenue'', to: ''merchants/most_revenue#index''\n+      get
        ''/merchants/most_items'', to: ''merchants/most_items#index''\n+      get
        ''/merchants/revenue'', to: ''merchants/revenue#index''\n+      get ''/merchants/:id/revenue'',
        to: ''merchants/revenue#show''\n+      get ''/merchants/:id/favorite_customer'',
        to: ''merchants/favorite_customer#show''\n       resources :merchants, only:
        [:index, :show]\n       get ''/transactions/find'', to: ''transactions/search#show''\n       get
        ''/transactions/find_all'', to: ''transactions/search#index''\n@@ -22,11 +27,15
        @@\n       get ''/items/find_all'', to: ''items/search#index''\n       get
        ''/items/:id/invoice_items'', to: ''items/invoice_items_relation#index''\n       get
        ''/items/:id/merchant'', to: ''items/merchant_relation#show''\n+      get
        ''/items/most_revenue'', to: ''items/most_revenue#index''\n+      get ''/items/most_items'',
        to: ''items/most_items#index''\n+      get ''/items/:id/best_day'', to: ''items/best_day#show''\n       resources
        :items, only: [:index, :show]\n       get ''/customers/find'', to: ''customers/search#show''\n       get
        ''/customers/find_all'', to: ''customers/search#index''\n       get ''/customers/:id/invoices'',
        to: ''customers/invoices_relation#index''\n       get ''/customers/:id/transactions'',
        to: ''customers/transactions_relation#index''\n+      get ''/customers/:id/favorite_merchant'',
        to: ''customers/favorite_merchant#show''\n       resources :customers, only:
        [:index, :show]\n       get ''/invoice_items/find'', to: ''invoice_items/search#show''\n       get
        ''/invoice_items/find_all'', to: ''invoice_items/search#index''"},{"sha":"c1053d4605aa125151454aab90449f2db47016bb","filename":"spec/models/customer_spec.rb","status":"modified","additions":18,"deletions":0,"changes":18,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/cd10d7c84f4e7208a681adce61facf6b164599be/spec/models/customer_spec.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/cd10d7c84f4e7208a681adce61facf6b164599be/spec/models/customer_spec.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/spec/models/customer_spec.rb?ref=cd10d7c84f4e7208a681adce61facf6b164599be","patch":"@@
        -5,4 +5,22 @@\n     it { should have_many(:merchants).through(:invoices) }\n     it
        { should have_many(:invoice_items).through(:invoices) }\n     it { should
        have_many(:transactions).through(:invoices) }\n+  describe ''instance method''
        do\n+    it ''can find a favorite merchant'' do\n+      customer = create(:customer)\n+\n+      merchant1
        = create(:merchant)\n+      merchant2 = create(:merchant)\n+\n+      invoice1
        = create(:invoice, merchant_id: merchant1.id, customer_id: customer.id)\n+      invoice2
        = create(:invoice, merchant_id: merchant1.id, customer_id: customer.id)\n+      invoice3
        = create(:invoice, merchant_id: merchant2.id, customer_id: customer.id)\n+\n+      trans1
        = create(:transaction, invoice_id: invoice1.id, result: ''success'')\n+      trans2
        = create(:transaction, invoice_id: invoice2.id, result: ''success'')\n+      trans3
        = create(:transaction, invoice_id: invoice3.id, result: ''success'')\n+\n+      expect(customer.favorite_merchant).to
        eq(merchant1)\n+    end\n+  end\n end"},{"sha":"6370d633692e624791f15deb49a867607d0afb67","filename":"spec/models/item_spec.rb","status":"modified","additions":53,"deletions":0,"changes":53,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/cd10d7c84f4e7208a681adce61facf6b164599be/spec/models/item_spec.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/cd10d7c84f4e7208a681adce61facf6b164599be/spec/models/item_spec.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/spec/models/item_spec.rb?ref=cd10d7c84f4e7208a681adce61facf6b164599be","patch":"@@
        -4,4 +4,57 @@\n   it { should have_many(:invoice_items) }\n   it { should
        have_many(:invoices).through(:invoice_items) }\n   it { should belong_to(:merchant)
        }\n+\n+  describe ''class methods'' do\n+    it ''returns the top items ranked
        by revenue'' do\n+      item1 = create(:item)\n+      item2 = create(:item)\n+      item3
        = create(:item)\n+\n+      invoice1 = create(:invoice)\n+      invoice2 =
        create(:invoice)\n+\n+      invoice_item = create(:invoice_item, invoice_id:
        invoice1.id, item_id: item1.id, unit_price: 80, quantity: 4)\n+      invoice_item
        = create(:invoice_item, invoice_id: invoice2.id, item_id: item2.id, unit_price:
        40, quantity: 20)\n+      invoice_item = create(:invoice_item, invoice_id:
        invoice1.id, item_id: item3.id, unit_price: 80, quantity: 2)\n+\n+      transaction1
        = create(:transaction, invoice_id: invoice1.id, result: ''success'')\n+      transaction2
        = create(:transaction, invoice_id: invoice2.id, result: ''success'')\n+\n+      expect(Item.most_revenue(3)).to
        eq([item2, item1, item3])\n+    end\n+    it ''returns the top items ranked
        by number sold'' do\n+      item1 = create(:item)\n+      item2 = create(:item)\n+      item3
        = create(:item)\n+\n+      invoice1 = create(:invoice)\n+      invoice2 =
        create(:invoice)\n+\n+      invoice_item = create(:invoice_item, invoice_id:
        invoice1.id, item_id: item1.id, unit_price: 80, quantity: 4)\n+      invoice_item
        = create(:invoice_item, invoice_id: invoice2.id, item_id: item2.id, unit_price:
        40, quantity: 20)\n+      invoice_item = create(:invoice_item, invoice_id:
        invoice1.id, item_id: item3.id, unit_price: 80, quantity: 2)\n+\n+      transaction1
        = create(:transaction, invoice_id: invoice1.id, result: ''success'')\n+      transaction2
        = create(:transaction, invoice_id: invoice2.id, result: ''success'')\n+\n+      expect(Item.most_sold(3)).to
        eq([item2, item1, item3])\n+    end\n+    it ''returns the date for an item
        when it sold the most'' do\n+      item = create(:item)\n+\n+      invoice1
        = create(:invoice, updated_at: \"2012-03-09 08:57:21 UTC\")\n+      invoice2
        = create(:invoice, updated_at: \"2012-04-09 08:57:21 UTC\")\n+      invoice3
        = create(:invoice, updated_at: \"2012-05-09 08:57:21 UTC\")\n+\n+      invoice_item
        = create(:invoice_item, invoice_id: invoice1.id, item_id: item.id, unit_price:
        80, quantity: 4)\n+      invoice_item = create(:invoice_item, invoice_id:
        invoice2.id, item_id: item.id, unit_price: 80, quantity: 20)\n+      invoice_item
        = create(:invoice_item, invoice_id: invoice3.id, item_id: item.id, unit_price:
        80, quantity: 2)\n+\n+      transaction1 = create(:transaction, invoice_id:
        invoice1.id, result: ''success'')\n+      transaction2 = create(:transaction,
        invoice_id: invoice2.id, result: ''success'')\n+\n+      expect(item.best_day).to
        eq(invoice2.updated_at)\n+    end\n+  end\n end"},{"sha":"c3c721c78e935ae3b5ee01c712682d5e62ec9d81","filename":"spec/models/merchant_spec.rb","status":"modified","additions":108,"deletions":0,"changes":108,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/cd10d7c84f4e7208a681adce61facf6b164599be/spec/models/merchant_spec.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/cd10d7c84f4e7208a681adce61facf6b164599be/spec/models/merchant_spec.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/spec/models/merchant_spec.rb?ref=cd10d7c84f4e7208a681adce61facf6b164599be","patch":"@@
        -10,4 +10,112 @@\n     it { should have_many(:transactions).through(:invoices)
        }\n     it { should have_many(:invoice_items).through(:invoices) }\n   end\n+  describe
        ''class methods'' do\n+    it ''can find top by revenue'' do\n+      merchant1
        = create(:merchant)\n+      merchant2 = create(:merchant)\n+      merchant3
        = create(:merchant)\n+      merchant4 = create(:merchant)\n+      merchant5
        = create(:merchant)\n+\n+      invoice1 = create(:invoice, merchant_id: merchant1.id)\n+      invoice2
        = create(:invoice, merchant_id: merchant2.id)\n+      invoice3 = create(:invoice,
        merchant_id: merchant3.id)\n+      invoice4 = create(:invoice, merchant_id:
        merchant4.id)\n+      invoice5 = create(:invoice, merchant_id: merchant5.id)\n+\n+      transaction1
        = create(:transaction, invoice_id: invoice1.id, result: ''success'')\n+      transaction2
        = create(:transaction, invoice_id: invoice2.id, result: ''success'')\n+      transaction3
        = create(:transaction, invoice_id: invoice3.id, result: ''success'')\n+      transaction4
        = create(:transaction, invoice_id: invoice4.id, result: ''success'')\n+      transaction5
        = create(:transaction, invoice_id: invoice5.id, result: ''success'')\n+\n+      invoice_item1
        = create(:invoice_item, invoice_id: invoice1.id, quantity: 5, unit_price:
        50)\n+      invoice_item2 = create(:invoice_item, invoice_id: invoice2.id,
        quantity: 2, unit_price: 300)\n+      invoice_item3 = create(:invoice_item,
        invoice_id: invoice3.id, quantity: 10, unit_price: 100)\n+      invoice_item4
        = create(:invoice_item, invoice_id: invoice4.id, quantity: 10, unit_price:
        200)\n+      invoice_item5 = create(:invoice_item, invoice_id: invoice5.id,
        quantity: 5, unit_price: 100)\n+\n+      expect(Merchant.most_revenue(3)).to
        eq([merchant4, merchant3, merchant2])\n+    end\n+    it ''can find top most_items_sold''
        do\n+      merchant1 = create(:merchant)\n+      merchant2 = create(:merchant)\n+      merchant3
        = create(:merchant)\n+      merchant4 = create(:merchant)\n+      merchant5
        = create(:merchant)\n+\n+      invoice1 = create(:invoice, merchant_id: merchant1.id)\n+      invoice2
        = create(:invoice, merchant_id: merchant2.id)\n+      invoice3 = create(:invoice,
        merchant_id: merchant3.id)\n+      invoice4 = create(:invoice, merchant_id:
        merchant4.id)\n+      invoice5 = create(:invoice, merchant_id: merchant5.id)\n+\n+      transaction1
        = create(:transaction, invoice_id: invoice1.id, result: ''success'')\n+      transaction2
        = create(:transaction, invoice_id: invoice2.id, result: ''success'')\n+      transaction3
        = create(:transaction, invoice_id: invoice3.id, result: ''success'')\n+      transaction4
        = create(:transaction, invoice_id: invoice4.id, result: ''success'')\n+      transaction5
        = create(:transaction, invoice_id: invoice5.id, result: ''success'')\n+\n+      invoice_item1
        = create(:invoice_item, invoice_id: invoice1.id, quantity: 6, unit_price:
        50)\n+      invoice_item2 = create(:invoice_item, invoice_id: invoice2.id,
        quantity: 2, unit_price: 300)\n+      invoice_item3 = create(:invoice_item,
        invoice_id: invoice3.id, quantity: 10, unit_price: 100)\n+      invoice_item4
        = create(:invoice_item, invoice_id: invoice4.id, quantity: 15, unit_price:
        200)\n+      invoice_item5 = create(:invoice_item, invoice_id: invoice5.id,
        quantity: 5, unit_price: 100)\n+\n+      expect(Merchant.most_items_sold(3)).to
        eq([merchant4, merchant3, merchant1])\n+    end\n+    it ''can total revenue
        across all merchants by date'' do\n+      merchant1 = create(:merchant)\n+      merchant2
        = create(:merchant)\n+      merchant3 = create(:merchant)\n+      merchant4
        = create(:merchant)\n+      merchant5 = create(:merchant)\n+\n+      invoice1
        = create(:invoice, merchant_id: merchant1.id)\n+      invoice2 = create(:invoice,
        merchant_id: merchant2.id)\n+      invoice3 = create(:invoice, merchant_id:
        merchant3.id)\n+      invoice4 = create(:invoice, merchant_id: merchant4.id)\n+      invoice5
        = create(:invoice, merchant_id: merchant5.id)\n+\n+      transaction1 = create(:transaction,
        invoice_id: invoice1.id, result: ''success'')\n+      transaction2 = create(:transaction,
        invoice_id: invoice2.id, result: ''success'')\n+      transaction3 = create(:transaction,
        invoice_id: invoice3.id, result: ''success'')\n+      transaction4 = create(:transaction,
        invoice_id: invoice4.id, result: ''success'')\n+      transaction5 = create(:transaction,
        invoice_id: invoice5.id, result: ''success'')\n+\n+      invoice_item1 = create(:invoice_item,
        invoice_id: invoice1.id, quantity: 6, unit_price: 50)\n+      invoice_item2
        = create(:invoice_item, invoice_id: invoice2.id, quantity: 2, unit_price:
        300)\n+      invoice_item3 = create(:invoice_item, invoice_id: invoice3.id,
        quantity: 10, unit_price: 100)\n+      invoice_item4 = create(:invoice_item,
        invoice_id: invoice4.id, quantity: 15, unit_price: 200)\n+      invoice_item5
        = create(:invoice_item, invoice_id: invoice5.id, quantity: 5, unit_price:
        100)\n+\n+      expect(Merchant.most_items_sold(3)).to eq([merchant4, merchant3,
        merchant1])\n+    end\n+  end\n+  describe ''instance methods'' do\n+    it
        ''can return total revenue for successful transactions'' do\n+      merchant
        = create(:merchant)\n+\n+      invoice1 = create(:invoice, merchant_id: merchant.id)\n+      invoice2
        = create(:invoice, merchant_id: merchant.id)\n+      invoice3 = create(:invoice,
        merchant_id: merchant.id)\n+      invoice4 = create(:invoice, merchant_id:
        merchant.id)\n+      invoice5 = create(:invoice, merchant_id: merchant.id)\n+\n+      transaction1
        = create(:transaction, invoice_id: invoice1.id, result: ''success'')\n+      transaction2
        = create(:transaction, invoice_id: invoice2.id, result: ''success'')\n+      transaction3
        = create(:transaction, invoice_id: invoice3.id, result: ''success'')\n+      transaction4
        = create(:transaction, invoice_id: invoice4.id, result: ''success'')\n+      transaction5
        = create(:transaction, invoice_id: invoice5.id, result: ''success'')\n+\n+      invoice_item1
        = create(:invoice_item, invoice_id: invoice1.id, quantity: 6, unit_price:
        50)\n+      invoice_item2 = create(:invoice_item, invoice_id: invoice2.id,
        quantity: 2, unit_price: 300)\n+      invoice_item3 = create(:invoice_item,
        invoice_id: invoice3.id, quantity: 10, unit_price: 100)\n+      invoice_item4
        = create(:invoice_item, invoice_id: invoice4.id, quantity: 15, unit_price:
        200)\n+      invoice_item5 = create(:invoice_item, invoice_id: invoice5.id,
        quantity: 5, unit_price: 100)\n+\n+      expect(merchant.successful_transactions_total).to
        eq(5400)\n+    end\n+  end\n end"},{"sha":"52ccd28cff3894c7c6d7e74e96a46922d94a75ba","filename":"spec/requests/api/v1/customer_business_logic_spec.rb","status":"added","additions":28,"deletions":0,"changes":28,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/cd10d7c84f4e7208a681adce61facf6b164599be/spec/requests/api/v1/customer_business_logic_spec.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/cd10d7c84f4e7208a681adce61facf6b164599be/spec/requests/api/v1/customer_business_logic_spec.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/spec/requests/api/v1/customer_business_logic_spec.rb?ref=cd10d7c84f4e7208a681adce61facf6b164599be","patch":"@@
        -0,0 +1,28 @@\n+require ''rails_helper''\n+\n+describe ''API for customer
        favorite merchant'' do\n+  context ''GET api/v1/customers/:id/favorite_merchant''
        do\n+    it ''returns a merchant for the customer\\''s most successful transactions''
        do\n+      customer = create(:customer)\n+\n+      merchant1 = create(:merchant)\n+      merchant2
        = create(:merchant)\n+\n+      invoice1 = create(:invoice, merchant_id: merchant1.id,
        customer_id: customer.id)\n+      invoice2 = create(:invoice, merchant_id:
        merchant1.id, customer_id: customer.id)\n+      invoice3 = create(:invoice,
        merchant_id: merchant2.id, customer_id: customer.id)\n+\n+      trans1 = create(:transaction,
        invoice_id: invoice1.id, result: ''success'')\n+      trans2 = create(:transaction,
        invoice_id: invoice2.id, result: ''success'')\n+      trans3 = create(:transaction,
        invoice_id: invoice3.id, result: ''success'')\n+\n+      get \"/api/v1/customers/#{customer.id}/favorite_merchant\"\n+\n+      expect(response).to
        be_successful\n+\n+      merch = JSON.parse(response.body)\n+\n+      expect(merch[''id'']).to
        eq(merchant1.id)\n+    end\n+  end\n+end"},{"sha":"414ecd6a504240c76825e0a97ff63257715978f4","filename":"spec/requests/api/v1/items_business_logic_request_spec.rb","status":"added","additions":78,"deletions":0,"changes":78,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/cd10d7c84f4e7208a681adce61facf6b164599be/spec/requests/api/v1/items_business_logic_request_spec.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/cd10d7c84f4e7208a681adce61facf6b164599be/spec/requests/api/v1/items_business_logic_request_spec.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/spec/requests/api/v1/items_business_logic_request_spec.rb?ref=cd10d7c84f4e7208a681adce61facf6b164599be","patch":"@@
        -0,0 +1,78 @@\n+require ''rails_helper''\n+\n+describe ''Api for index business
        logic'' do\n+  context ''GET /api/v1/items/most_revenue?quantity=x'' do\n+    it
        ''returns api for the top items ranked by revenue'' do\n+      item1 = create(:item)\n+      item2
        = create(:item)\n+      item3 = create(:item)\n+\n+      invoice1 = create(:invoice)\n+      invoice2
        = create(:invoice)\n+\n+      invoice_item = create(:invoice_item, invoice_id:
        invoice1.id, item_id: item1.id, unit_price: 80, quantity: 4)\n+      invoice_item
        = create(:invoice_item, invoice_id: invoice2.id, item_id: item2.id, unit_price:
        40, quantity: 20)\n+      invoice_item = create(:invoice_item, invoice_id:
        invoice1.id, item_id: item3.id, unit_price: 80, quantity: 2)\n+\n+      transaction1
        = create(:transaction, invoice_id: invoice1.id, result: ''success'')\n+      transaction2
        = create(:transaction, invoice_id: invoice2.id, result: ''success'')\n+\n+      expect(Item.most_revenue(3)).to
        eq([item2, item1, item3])\n+\n+      get \"/api/v1/items/most_revenue?quantity=3\"\n+\n+      expect(response).to
        be_successful\n+\n+      items = JSON.parse(response.body)\n+\n+      expect(items.length).to
        eq(3)\n+    end\n+    it ''returns api for the top items ranked by total sold''
        do\n+      item1 = create(:item)\n+      item2 = create(:item)\n+      item3
        = create(:item)\n+\n+      invoice1 = create(:invoice)\n+      invoice2 =
        create(:invoice)\n+\n+      invoice_item = create(:invoice_item, invoice_id:
        invoice1.id, item_id: item1.id, unit_price: 80, quantity: 4)\n+      invoice_item
        = create(:invoice_item, invoice_id: invoice2.id, item_id: item2.id, unit_price:
        40, quantity: 20)\n+      invoice_item = create(:invoice_item, invoice_id:
        invoice1.id, item_id: item3.id, unit_price: 80, quantity: 2)\n+\n+      transaction1
        = create(:transaction, invoice_id: invoice1.id, result: ''success'')\n+      transaction2
        = create(:transaction, invoice_id: invoice2.id, result: ''success'')\n+\n+      expect(Item.most_revenue(3)).to
        eq([item2, item1, item3])\n+\n+      get \"/api/v1/items/most_items?quantity=3\"\n+\n+      expect(response).to
        be_successful\n+\n+      items = JSON.parse(response.body)\n+\n+      expect(items.length).to
        eq(3)\n+    end\n+    it ''returns the date for an item when it sold the most''
        do\n+      item = create(:item)\n+\n+      invoice1 = create(:invoice, updated_at:
        \"2012-03-09 08:57:21 UTC\")\n+      invoice2 = create(:invoice, updated_at:
        \"2012-04-09 08:57:21 UTC\")\n+      invoice3 = create(:invoice, updated_at:
        \"2012-05-09 08:57:21 UTC\")\n+\n+      invoice_item = create(:invoice_item,
        invoice_id: invoice1.id, item_id: item.id, unit_price: 80, quantity: 4)\n+      invoice_item
        = create(:invoice_item, invoice_id: invoice2.id, item_id: item.id, unit_price:
        80, quantity: 20)\n+      invoice_item = create(:invoice_item, invoice_id:
        invoice3.id, item_id: item.id, unit_price: 80, quantity: 2)\n+\n+      transaction1
        = create(:transaction, invoice_id: invoice1.id, result: ''success'')\n+      transaction2
        = create(:transaction, invoice_id: invoice2.id, result: ''success'')\n+\n+      get
        \"/api/v1/items/#{item.id}/best_day\"\n+\n+      expect(response).to be_successful\n+\n+      date
        = JSON.parse(response.body)\n+\n+      expect(date).to eq(\"2012-04-09T08:57:21.000Z\")\n+    end\n+  end\n+end"},{"sha":"5a85d4e1f5267364ae97529ab3dcb991b07ffd61","filename":"spec/requests/api/v1/merchant_business_logic_spec.rb","status":"added","additions":103,"deletions":0,"changes":103,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/cd10d7c84f4e7208a681adce61facf6b164599be/spec/requests/api/v1/merchant_business_logic_spec.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/cd10d7c84f4e7208a681adce61facf6b164599be/spec/requests/api/v1/merchant_business_logic_spec.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/spec/requests/api/v1/merchant_business_logic_spec.rb?ref=cd10d7c84f4e7208a681adce61facf6b164599be","patch":"@@
        -0,0 +1,103 @@\n+require ''rails_helper''\n+\n+describe ''Api for top x merchants
        by revenue'' do\n+  context ''GET /api/v1/merchants/most_revenue?quantity=x''
        do\n+    it ''shows top merchants by revenue in json'' do\n+      merchant1
        = create(:merchant)\n+      merchant2 = create(:merchant)\n+      merchant3
        = create(:merchant)\n+      merchant4 = create(:merchant)\n+      merchant5
        = create(:merchant)\n+\n+      invoice1 = create(:invoice, merchant_id: merchant1.id)\n+      invoice2
        = create(:invoice, merchant_id: merchant2.id)\n+      invoice3 = create(:invoice,
        merchant_id: merchant3.id)\n+      invoice4 = create(:invoice, merchant_id:
        merchant4.id)\n+      invoice5 = create(:invoice, merchant_id: merchant5.id)\n+\n+      transaction1
        = create(:transaction, invoice_id: invoice1.id, result: ''success'')\n+      transaction2
        = create(:transaction, invoice_id: invoice2.id, result: ''success'')\n+      transaction3
        = create(:transaction, invoice_id: invoice3.id, result: ''success'')\n+      transaction4
        = create(:transaction, invoice_id: invoice4.id, result: ''success'')\n+      transaction5
        = create(:transaction, invoice_id: invoice5.id, result: ''success'')\n+\n+      invoice_item1
        = create(:invoice_item, invoice_id: invoice1.id, quantity: 5, unit_price:
        50)\n+      invoice_item2 = create(:invoice_item, invoice_id: invoice2.id,
        quantity: 2, unit_price: 300)\n+      invoice_item3 = create(:invoice_item,
        invoice_id: invoice3.id, quantity: 10, unit_price: 100)\n+      invoice_item4
        = create(:invoice_item, invoice_id: invoice4.id, quantity: 10, unit_price:
        200)\n+      invoice_item5 = create(:invoice_item, invoice_id: invoice5.id,
        quantity: 5, unit_price: 100)\n+\n+      get ''/api/v1/merchants/most_revenue?quantity=3''\n+\n+      expect(response).to
        be_successful\n+\n+      merchants = JSON.parse(response.body)\n+\n+      expect(merchants.first[''id'']).to
        eq(merchant4.id)\n+      expect(merchants.last[''id'']).to eq(merchant2.id)\n+    end\n+    it
        ''shows top merchants by most items sold in json'' do\n+      merchant1 =
        create(:merchant)\n+      merchant2 = create(:merchant)\n+      merchant3
        = create(:merchant)\n+      merchant4 = create(:merchant)\n+      merchant5
        = create(:merchant)\n+\n+      invoice1 = create(:invoice, merchant_id: merchant1.id)\n+      invoice2
        = create(:invoice, merchant_id: merchant2.id)\n+      invoice3 = create(:invoice,
        merchant_id: merchant3.id)\n+      invoice4 = create(:invoice, merchant_id:
        merchant4.id)\n+      invoice5 = create(:invoice, merchant_id: merchant5.id)\n+\n+      transaction1
        = create(:transaction, invoice_id: invoice1.id, result: ''success'')\n+      transaction2
        = create(:transaction, invoice_id: invoice2.id, result: ''success'')\n+      transaction3
        = create(:transaction, invoice_id: invoice3.id, result: ''success'')\n+      transaction4
        = create(:transaction, invoice_id: invoice4.id, result: ''success'')\n+      transaction5
        = create(:transaction, invoice_id: invoice5.id, result: ''success'')\n+\n+      invoice_item1
        = create(:invoice_item, invoice_id: invoice1.id, quantity: 6, unit_price:
        50)\n+      invoice_item2 = create(:invoice_item, invoice_id: invoice2.id,
        quantity: 2, unit_price: 300)\n+      invoice_item3 = create(:invoice_item,
        invoice_id: invoice3.id, quantity: 10, unit_price: 100)\n+      invoice_item4
        = create(:invoice_item, invoice_id: invoice4.id, quantity: 11, unit_price:
        200)\n+      invoice_item5 = create(:invoice_item, invoice_id: invoice5.id,
        quantity: 5, unit_price: 100)\n+\n+      get ''/api/v1/merchants/most_items?quantity=3''\n+\n+      expect(response).to
        be_successful\n+\n+      merchants = JSON.parse(response.body)\n+\n+      expect(merchants.first[''id'']).to
        eq(merchant4.id)\n+      expect(merchants.last[''id'']).to eq(merchant1.id)\n+    end\n+    it
        ''can return total revenue for successful transactions'' do\n+      merchant
        = create(:merchant)\n+\n+      invoice1 = create(:invoice, merchant_id: merchant.id)\n+      invoice2
        = create(:invoice, merchant_id: merchant.id)\n+      invoice3 = create(:invoice,
        merchant_id: merchant.id)\n+      invoice4 = create(:invoice, merchant_id:
        merchant.id)\n+      invoice5 = create(:invoice, merchant_id: merchant.id)\n+\n+      transaction1
        = create(:transaction, invoice_id: invoice1.id, result: ''success'')\n+      transaction2
        = create(:transaction, invoice_id: invoice2.id, result: ''success'')\n+      transaction3
        = create(:transaction, invoice_id: invoice3.id, result: ''success'')\n+      transaction4
        = create(:transaction, invoice_id: invoice4.id, result: ''success'')\n+      transaction5
        = create(:transaction, invoice_id: invoice5.id, result: ''success'')\n+\n+      invoice_item1
        = create(:invoice_item, invoice_id: invoice1.id, quantity: 6, unit_price:
        50)\n+      invoice_item2 = create(:invoice_item, invoice_id: invoice2.id,
        quantity: 2, unit_price: 300)\n+      invoice_item3 = create(:invoice_item,
        invoice_id: invoice3.id, quantity: 10, unit_price: 100)\n+      invoice_item4
        = create(:invoice_item, invoice_id: invoice4.id, quantity: 15, unit_price:
        200)\n+      invoice_item5 = create(:invoice_item, invoice_id: invoice5.id,
        quantity: 5, unit_price: 100)\n+\n+      get \"/api/v1/merchants/#{merchant.id}/revenue\"\n+\n+      expect(response).to
        be_successful\n+\n+      total = JSON.parse(response.body)\n+\n+      expect(total[''revenue'']).to
        eq(\"54.0\")\n+    end\n+  end\n+end"}]}'
    http_version: 
  recorded_at: Fri, 24 Aug 2018 14:27:37 GMT
- request:
    method: get
    uri: https://api.github.com/repos/1powechri2/Rails-Engine/commits/d59c99c5088bcd41a2e39e0bf3b42ede997e2863
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Faraday v0.15.2
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - GitHub.com
      Date:
      - Fri, 24 Aug 2018 14:27:24 GMT
      Content-Type:
      - application/json; charset=utf-8
      Transfer-Encoding:
      - chunked
      Status:
      - 200 OK
      X-Ratelimit-Limit:
      - '60'
      X-Ratelimit-Remaining:
      - '37'
      X-Ratelimit-Reset:
      - '1535122878'
      Cache-Control:
      - public, max-age=60, s-maxage=60
      Vary:
      - Accept
      Etag:
      - W/"53d568a5cfa9562cb5752ba4058f66e6"
      Last-Modified:
      - Fri, 17 Aug 2018 04:25:39 GMT
      X-Github-Media-Type:
      - github.v3; format=json
      Access-Control-Expose-Headers:
      - ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining,
        X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
      Access-Control-Allow-Origin:
      - "*"
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      X-Frame-Options:
      - deny
      X-Content-Type-Options:
      - nosniff
      X-Xss-Protection:
      - 1; mode=block
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Content-Security-Policy:
      - default-src 'none'
      X-Runtime-Rack:
      - '0.050922'
      X-Github-Request-Id:
      - 9C69:55A3:F1C871:1EACC79:5B8015CC
    body:
      encoding: ASCII-8BIT
      string: '{"sha":"d59c99c5088bcd41a2e39e0bf3b42ede997e2863","node_id":"MDY6Q29tbWl0MTQ0NjI3MjQxOmQ1OWM5OWM1MDg4YmNkNDFhMmUzOWUwYmYzYjQyZWRlOTk3ZTI4NjM=","commit":{"author":{"name":"Chris
        Powell","email":"chris.ian.powell@gmail.com","date":"2018-08-17T04:25:39Z"},"committer":{"name":"Chris
        Powell","email":"chris.ian.powell@gmail.com","date":"2018-08-17T04:25:39Z"},"message":"adds
        it all but boss mode","tree":{"sha":"f0cefd638575d8f92530264313a86a4f0033f443","url":"https://api.github.com/repos/1powechri2/Rails-Engine/git/trees/f0cefd638575d8f92530264313a86a4f0033f443"},"url":"https://api.github.com/repos/1powechri2/Rails-Engine/git/commits/d59c99c5088bcd41a2e39e0bf3b42ede997e2863","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/d59c99c5088bcd41a2e39e0bf3b42ede997e2863","html_url":"https://github.com/1powechri2/Rails-Engine/commit/d59c99c5088bcd41a2e39e0bf3b42ede997e2863","comments_url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/d59c99c5088bcd41a2e39e0bf3b42ede997e2863/comments","author":{"login":"1powechri2","id":34900620,"node_id":"MDQ6VXNlcjM0OTAwNjIw","avatar_url":"https://avatars1.githubusercontent.com/u/34900620?v=4","gravatar_id":"","url":"https://api.github.com/users/1powechri2","html_url":"https://github.com/1powechri2","followers_url":"https://api.github.com/users/1powechri2/followers","following_url":"https://api.github.com/users/1powechri2/following{/other_user}","gists_url":"https://api.github.com/users/1powechri2/gists{/gist_id}","starred_url":"https://api.github.com/users/1powechri2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1powechri2/subscriptions","organizations_url":"https://api.github.com/users/1powechri2/orgs","repos_url":"https://api.github.com/users/1powechri2/repos","events_url":"https://api.github.com/users/1powechri2/events{/privacy}","received_events_url":"https://api.github.com/users/1powechri2/received_events","type":"User","site_admin":false},"committer":{"login":"1powechri2","id":34900620,"node_id":"MDQ6VXNlcjM0OTAwNjIw","avatar_url":"https://avatars1.githubusercontent.com/u/34900620?v=4","gravatar_id":"","url":"https://api.github.com/users/1powechri2","html_url":"https://github.com/1powechri2","followers_url":"https://api.github.com/users/1powechri2/followers","following_url":"https://api.github.com/users/1powechri2/following{/other_user}","gists_url":"https://api.github.com/users/1powechri2/gists{/gist_id}","starred_url":"https://api.github.com/users/1powechri2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1powechri2/subscriptions","organizations_url":"https://api.github.com/users/1powechri2/orgs","repos_url":"https://api.github.com/users/1powechri2/repos","events_url":"https://api.github.com/users/1powechri2/events{/privacy}","received_events_url":"https://api.github.com/users/1powechri2/received_events","type":"User","site_admin":false},"parents":[{"sha":"08452b6b87aae4497da72bbbaf4825b0755e7499","url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/08452b6b87aae4497da72bbbaf4825b0755e7499","html_url":"https://github.com/1powechri2/Rails-Engine/commit/08452b6b87aae4497da72bbbaf4825b0755e7499"}],"stats":{"total":4,"additions":2,"deletions":2},"files":[{"sha":"42737d7735950da6bcf473331ab3b88dd95bc757","filename":"app/models/item.rb","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/d59c99c5088bcd41a2e39e0bf3b42ede997e2863/app/models/item.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/d59c99c5088bcd41a2e39e0bf3b42ede997e2863/app/models/item.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/models/item.rb?ref=d59c99c5088bcd41a2e39e0bf3b42ede997e2863","patch":"@@
        -23,8 +23,8 @@ def self.most_sold(x = 5)\n \n   def best_day\n     invoices.\n-    select(''invoices.*,
        count(invoices.*) as total_sales'').\n-    joins(:transactions).where(transactions:
        {result: ''success''}).\n+    select(''invoices.*, sum(invoice_items.quantity)
        as total_sales'').\n+    joins(:transactions, :invoice_items).where(transactions:
        {result: ''success''}).\n     group(:id).\n     order(''total_sales desc'').\n     order(''updated_at
        desc'').first.updated_at"}]}'
    http_version: 
  recorded_at: Fri, 24 Aug 2018 14:27:37 GMT
- request:
    method: get
    uri: https://api.github.com/repos/1powechri2/Rails-Engine/commits/08452b6b87aae4497da72bbbaf4825b0755e7499
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Faraday v0.15.2
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - GitHub.com
      Date:
      - Fri, 24 Aug 2018 14:27:25 GMT
      Content-Type:
      - application/json; charset=utf-8
      Transfer-Encoding:
      - chunked
      Status:
      - 200 OK
      X-Ratelimit-Limit:
      - '60'
      X-Ratelimit-Remaining:
      - '36'
      X-Ratelimit-Reset:
      - '1535122878'
      Cache-Control:
      - public, max-age=60, s-maxage=60
      Vary:
      - Accept
      Etag:
      - W/"86bce8ac929e3559b077762cbda0d174"
      Last-Modified:
      - Fri, 17 Aug 2018 02:51:47 GMT
      X-Github-Media-Type:
      - github.v3; format=json
      Access-Control-Expose-Headers:
      - ETag, Link, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining,
        X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval
      Access-Control-Allow-Origin:
      - "*"
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains; preload
      X-Frame-Options:
      - deny
      X-Content-Type-Options:
      - nosniff
      X-Xss-Protection:
      - 1; mode=block
      Referrer-Policy:
      - origin-when-cross-origin, strict-origin-when-cross-origin
      Content-Security-Policy:
      - default-src 'none'
      X-Runtime-Rack:
      - '0.039804'
      X-Github-Request-Id:
      - B4EC:55A2:7472B1:11762E2:5B8015CC
    body:
      encoding: ASCII-8BIT
      string: '{"sha":"08452b6b87aae4497da72bbbaf4825b0755e7499","node_id":"MDY6Q29tbWl0MTQ0NjI3MjQxOjA4NDUyYjZiODdhYWU0NDk3ZGE3MmJiYmFmNDgyNWIwNzU1ZTc0OTk=","commit":{"author":{"name":"Chris
        Powell","email":"chris.ian.powell@gmail.com","date":"2018-08-17T02:51:47Z"},"committer":{"name":"Chris
        Powell","email":"chris.ian.powell@gmail.com","date":"2018-08-17T02:51:47Z"},"message":"adds
        best day logic for items","tree":{"sha":"9c9ac3a6339dc4e9a96f7ae0f2918e984ef5fb78","url":"https://api.github.com/repos/1powechri2/Rails-Engine/git/trees/9c9ac3a6339dc4e9a96f7ae0f2918e984ef5fb78"},"url":"https://api.github.com/repos/1powechri2/Rails-Engine/git/commits/08452b6b87aae4497da72bbbaf4825b0755e7499","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/08452b6b87aae4497da72bbbaf4825b0755e7499","html_url":"https://github.com/1powechri2/Rails-Engine/commit/08452b6b87aae4497da72bbbaf4825b0755e7499","comments_url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/08452b6b87aae4497da72bbbaf4825b0755e7499/comments","author":{"login":"1powechri2","id":34900620,"node_id":"MDQ6VXNlcjM0OTAwNjIw","avatar_url":"https://avatars1.githubusercontent.com/u/34900620?v=4","gravatar_id":"","url":"https://api.github.com/users/1powechri2","html_url":"https://github.com/1powechri2","followers_url":"https://api.github.com/users/1powechri2/followers","following_url":"https://api.github.com/users/1powechri2/following{/other_user}","gists_url":"https://api.github.com/users/1powechri2/gists{/gist_id}","starred_url":"https://api.github.com/users/1powechri2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1powechri2/subscriptions","organizations_url":"https://api.github.com/users/1powechri2/orgs","repos_url":"https://api.github.com/users/1powechri2/repos","events_url":"https://api.github.com/users/1powechri2/events{/privacy}","received_events_url":"https://api.github.com/users/1powechri2/received_events","type":"User","site_admin":false},"committer":{"login":"1powechri2","id":34900620,"node_id":"MDQ6VXNlcjM0OTAwNjIw","avatar_url":"https://avatars1.githubusercontent.com/u/34900620?v=4","gravatar_id":"","url":"https://api.github.com/users/1powechri2","html_url":"https://github.com/1powechri2","followers_url":"https://api.github.com/users/1powechri2/followers","following_url":"https://api.github.com/users/1powechri2/following{/other_user}","gists_url":"https://api.github.com/users/1powechri2/gists{/gist_id}","starred_url":"https://api.github.com/users/1powechri2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1powechri2/subscriptions","organizations_url":"https://api.github.com/users/1powechri2/orgs","repos_url":"https://api.github.com/users/1powechri2/repos","events_url":"https://api.github.com/users/1powechri2/events{/privacy}","received_events_url":"https://api.github.com/users/1powechri2/received_events","type":"User","site_admin":false},"parents":[{"sha":"caa17c9725c7c4c71b955fd9fcbc72cd43785d3d","url":"https://api.github.com/repos/1powechri2/Rails-Engine/commits/caa17c9725c7c4c71b955fd9fcbc72cd43785d3d","html_url":"https://github.com/1powechri2/Rails-Engine/commit/caa17c9725c7c4c71b955fd9fcbc72cd43785d3d"}],"stats":{"total":53,"additions":53,"deletions":0},"files":[{"sha":"2e158fc6e9a0142bd64f7e64a4aef460a5480a54","filename":"app/controllers/api/v1/items/best_day_controller.rb","status":"added","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/08452b6b87aae4497da72bbbaf4825b0755e7499/app/controllers/api/v1/items/best_day_controller.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/08452b6b87aae4497da72bbbaf4825b0755e7499/app/controllers/api/v1/items/best_day_controller.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/controllers/api/v1/items/best_day_controller.rb?ref=08452b6b87aae4497da72bbbaf4825b0755e7499","patch":"@@
        -0,0 +1,5 @@\n+class Api::V1::Items::BestDayController < ApplicationController\n+  def
        show\n+    render json: Item.find(params[:id]).best_day\n+  end\n+end"},{"sha":"8e2acedac6b9dd25d0115de2a74d87c9b97aedce","filename":"app/models/item.rb","status":"modified","additions":9,"deletions":0,"changes":9,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/08452b6b87aae4497da72bbbaf4825b0755e7499/app/models/item.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/08452b6b87aae4497da72bbbaf4825b0755e7499/app/models/item.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/app/models/item.rb?ref=08452b6b87aae4497da72bbbaf4825b0755e7499","patch":"@@
        -20,4 +20,13 @@ def self.most_sold(x = 5)\n     order(''total_sold desc'').\n     limit(x)\n   end\n+\n+  def
        best_day\n+    invoices.\n+    select(''invoices.*, count(invoices.*) as total_sales'').\n+    joins(:transactions).where(transactions:
        {result: ''success''}).\n+    group(:id).\n+    order(''total_sales desc'').\n+    order(''updated_at
        desc'').first.updated_at\n+  end\n end"},{"sha":"149882cf54417a1a66753beda586ad5c702c76dd","filename":"config/routes.rb","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/08452b6b87aae4497da72bbbaf4825b0755e7499/config/routes.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/08452b6b87aae4497da72bbbaf4825b0755e7499/config/routes.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/config/routes.rb?ref=08452b6b87aae4497da72bbbaf4825b0755e7499","patch":"@@
        -29,6 +29,7 @@\n       get ''/items/:id/merchant'', to: ''items/merchant_relation#show''\n       get
        ''/items/most_revenue'', to: ''items/most_revenue#index''\n       get ''/items/most_items'',
        to: ''items/most_items#index''\n+      get ''/items/:id/best_day'', to: ''items/best_day#show''\n       resources
        :items, only: [:index, :show]\n       get ''/customers/find'', to: ''customers/search#show''\n       get
        ''/customers/find_all'', to: ''customers/search#index''"},{"sha":"6370d633692e624791f15deb49a867607d0afb67","filename":"spec/models/item_spec.rb","status":"modified","additions":16,"deletions":0,"changes":16,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/08452b6b87aae4497da72bbbaf4825b0755e7499/spec/models/item_spec.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/08452b6b87aae4497da72bbbaf4825b0755e7499/spec/models/item_spec.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/spec/models/item_spec.rb?ref=08452b6b87aae4497da72bbbaf4825b0755e7499","patch":"@@
        -40,5 +40,21 @@\n \n       expect(Item.most_sold(3)).to eq([item2, item1,
        item3])\n     end\n+    it ''returns the date for an item when it sold the
        most'' do\n+      item = create(:item)\n+\n+      invoice1 = create(:invoice,
        updated_at: \"2012-03-09 08:57:21 UTC\")\n+      invoice2 = create(:invoice,
        updated_at: \"2012-04-09 08:57:21 UTC\")\n+      invoice3 = create(:invoice,
        updated_at: \"2012-05-09 08:57:21 UTC\")\n+\n+      invoice_item = create(:invoice_item,
        invoice_id: invoice1.id, item_id: item.id, unit_price: 80, quantity: 4)\n+      invoice_item
        = create(:invoice_item, invoice_id: invoice2.id, item_id: item.id, unit_price:
        80, quantity: 20)\n+      invoice_item = create(:invoice_item, invoice_id:
        invoice3.id, item_id: item.id, unit_price: 80, quantity: 2)\n+\n+      transaction1
        = create(:transaction, invoice_id: invoice1.id, result: ''success'')\n+      transaction2
        = create(:transaction, invoice_id: invoice2.id, result: ''success'')\n+\n+      expect(item.best_day).to
        eq(invoice2.updated_at)\n+    end\n   end\n end"},{"sha":"414ecd6a504240c76825e0a97ff63257715978f4","filename":"spec/requests/api/v1/items_business_logic_request_spec.rb","status":"modified","additions":22,"deletions":0,"changes":22,"blob_url":"https://github.com/1powechri2/Rails-Engine/blob/08452b6b87aae4497da72bbbaf4825b0755e7499/spec/requests/api/v1/items_business_logic_request_spec.rb","raw_url":"https://github.com/1powechri2/Rails-Engine/raw/08452b6b87aae4497da72bbbaf4825b0755e7499/spec/requests/api/v1/items_business_logic_request_spec.rb","contents_url":"https://api.github.com/repos/1powechri2/Rails-Engine/contents/spec/requests/api/v1/items_business_logic_request_spec.rb?ref=08452b6b87aae4497da72bbbaf4825b0755e7499","patch":"@@
        -52,5 +52,27 @@\n \n       expect(items.length).to eq(3)\n     end\n+    it
        ''returns the date for an item when it sold the most'' do\n+      item = create(:item)\n+\n+      invoice1
        = create(:invoice, updated_at: \"2012-03-09 08:57:21 UTC\")\n+      invoice2
        = create(:invoice, updated_at: \"2012-04-09 08:57:21 UTC\")\n+      invoice3
        = create(:invoice, updated_at: \"2012-05-09 08:57:21 UTC\")\n+\n+      invoice_item
        = create(:invoice_item, invoice_id: invoice1.id, item_id: item.id, unit_price:
        80, quantity: 4)\n+      invoice_item = create(:invoice_item, invoice_id:
        invoice2.id, item_id: item.id, unit_price: 80, quantity: 20)\n+      invoice_item
        = create(:invoice_item, invoice_id: invoice3.id, item_id: item.id, unit_price:
        80, quantity: 2)\n+\n+      transaction1 = create(:transaction, invoice_id:
        invoice1.id, result: ''success'')\n+      transaction2 = create(:transaction,
        invoice_id: invoice2.id, result: ''success'')\n+\n+      get \"/api/v1/items/#{item.id}/best_day\"\n+\n+      expect(response).to
        be_successful\n+\n+      date = JSON.parse(response.body)\n+\n+      expect(date).to
        eq(\"2012-04-09T08:57:21.000Z\")\n+    end\n   end\n end"}]}'
    http_version: 
  recorded_at: Fri, 24 Aug 2018 14:27:37 GMT
recorded_with: VCR 4.0.0
